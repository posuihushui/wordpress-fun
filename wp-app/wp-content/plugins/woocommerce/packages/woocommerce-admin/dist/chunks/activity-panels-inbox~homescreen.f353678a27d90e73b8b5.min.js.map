{"version":3,"sources":["webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/action.js","webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/card.js","webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/index.js","webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/placeholder.js","webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/style.scss","webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/utils.js","webpack://wc.[modulename]/./client/lib/sanitize-html/index.js"],"names":["InboxNoteAction","props","state","inAction","handleActionClick","bind","event","action","actionCallback","noteId","triggerNoteAction","removeAllNotes","removeNote","href","target","length","startsWith","adminUrl","preventDefault","window","open","setState","id","dismiss","label","isPrimary","primary","url","undefined","Component","propTypes","PropTypes","number","string","bool","func","shape","isRequired","compose","withDispatch","dispatch","InboxNoteCard","onVisible","hasBeenSeen","isDismissModalOpen","dismissType","openDismissModal","closeDismissModal","bodyNotificationRef","createRef","screen","getScreenName","current","addEventListener","handleBodyClick","removeEventListener","innerLink","note","recordEvent","note_name","name","note_title","title","note_content_inner_link","screenName","getUrlParams","location","search","page","path","postType","post_type","currentPage","replace","substring","isVisible","note_content","content","note_type","type","onToggle","noteNameDismissConfirmation","noteNameDismissAll","note_name_dismiss_all","note_name_dismiss_confirmation","onClose","dropdownClasses","relatedTarget","document","activeElement","isClickOutsideDropdown","some","className","includes","handleBlur","__","noArrow","getDismissConfirmationButton","noteActions","actions","map","index","lastRead","dateCreated","date_created","dateCreatedGmt","date_created_gmt","image","isDeleted","is_deleted","layout","unread","Date","getTime","date","hasImage","cardClassName","classnames","moment","utc","fromNow","sanitizeHTML","renderActions","renderDismissButton","renderDismissConfirmationModal","status","arrayOf","renderEmptyCard","renderNotes","hasNotes","isDismissUndoRequesting","isDismissAllUndoRequesting","notes","notesArray","Object","keys","key","InboxPanel","isError","isPanelEmpty","isRequesting","isUndoRequesting","useUserPreferences","updateUserPreferences","userPrefs","activity_panel_inbox_last_read","useEffect","mountTime","now","userDataFields","actionLabel","reload","hasValidNotes","isActivityHeaderVisible","getUnreadNotesCount","withSelect","select","getNotes","getNotesError","isGetNotesRequesting","getUndoDismissRequesting","inboxQuery","per_page","QUERY_DEFAULTS","pageSize","noteTypes","orderby","order","_fields","Boolean","InboxNotePlaceholder","unreadNotes","filter","validNotes","ALLOWED_TAGS","ALLOWED_ATTR","html","__html","sanitize"],"mappings":"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","file":"chunks/activity-panels-inbox~homescreen.f353678a27d90e73b8b5.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\nimport PropTypes from 'prop-types';\n\n/**\n * WooCommerce dependencies\n */\nimport { ADMIN_URL as adminUrl } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\n\nclass InboxNoteAction extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tinAction: false,\n\t\t};\n\n\t\tthis.handleActionClick = this.handleActionClick.bind( this );\n\t}\n\n\thandleActionClick( event ) {\n\t\tconst {\n\t\t\taction,\n\t\t\tactionCallback,\n\t\t\tnoteId,\n\t\t\ttriggerNoteAction,\n\t\t\tremoveAllNotes,\n\t\t\tremoveNote,\n\t\t} = this.props;\n\t\tconst href = event.target.href || '';\n\t\tlet inAction = true;\n\n\t\tif ( href.length && ! href.startsWith( adminUrl ) ) {\n\t\t\tevent.preventDefault();\n\t\t\tinAction = false; // link buttons shouldn't be \"busy\".\n\t\t\twindow.open( href, '_blank' );\n\t\t}\n\n\t\tif ( ! action ) {\n\t\t\tif ( noteId ) {\n\t\t\t\tremoveNote( noteId );\n\t\t\t} else {\n\t\t\t\tremoveAllNotes();\n\t\t\t}\n\t\t\tactionCallback( true );\n\t\t} else {\n\t\t\tthis.setState( { inAction }, () =>\n\t\t\t\ttriggerNoteAction( noteId, action.id )\n\t\t\t);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { action, dismiss, label } = this.props;\n\t\tconst isPrimary = dismiss || action.primary;\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tisPrimary={ isPrimary }\n\t\t\t\tisSecondary={ ! isPrimary }\n\t\t\t\tisBusy={ this.state.inAction }\n\t\t\t\tdisabled={ this.state.inAction }\n\t\t\t\thref={ action ? action.url : undefined }\n\t\t\t\tonClick={ this.handleActionClick }\n\t\t\t>\n\t\t\t\t{ dismiss ? label : action.label }\n\t\t\t</Button>\n\t\t);\n\t}\n}\n\nInboxNoteAction.propTypes = {\n\tnoteId: PropTypes.number,\n\tlabel: PropTypes.string,\n\tdismiss: PropTypes.bool,\n\tactionCallback: PropTypes.func,\n\taction: PropTypes.shape( {\n\t\tid: PropTypes.number.isRequired,\n\t\turl: PropTypes.string,\n\t\tlabel: PropTypes.string.isRequired,\n\t\tprimary: PropTypes.bool.isRequired,\n\t} ),\n};\n\nexport default compose(\n\twithDispatch( ( dispatch ) => {\n\t\tconst { removeAllNotes, removeNote, triggerNoteAction } = dispatch(\n\t\t\t'wc-api'\n\t\t);\n\n\t\treturn {\n\t\t\tremoveAllNotes,\n\t\t\tremoveNote,\n\t\t\ttriggerNoteAction,\n\t\t};\n\t} )\n)( InboxNoteAction );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, createRef, Fragment } from '@wordpress/element';\nimport { Button, Dropdown, Modal } from '@wordpress/components';\nimport PropTypes from 'prop-types';\nimport VisibilitySensor from 'react-visibility-sensor';\nimport moment from 'moment';\n\n/**\n * Internal dependencies\n */\nimport NoteAction from './action';\nimport sanitizeHTML from 'lib/sanitize-html';\nimport classnames from 'classnames';\nimport { recordEvent } from 'lib/tracks';\nimport './style.scss';\nimport { H, Section } from '@woocommerce/components';\nimport { getUrlParams } from 'utils';\n\nclass InboxNoteCard extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onVisible = this.onVisible.bind( this );\n\t\tthis.hasBeenSeen = false;\n\t\tthis.state = {\n\t\t\tisDismissModalOpen: false,\n\t\t\tdismissType: null,\n\t\t};\n\t\tthis.openDismissModal = this.openDismissModal.bind( this );\n\t\tthis.closeDismissModal = this.closeDismissModal.bind( this );\n\t\tthis.bodyNotificationRef = createRef();\n\t\tthis.screen = this.getScreenName();\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( this.bodyNotificationRef.current ) {\n\t\t\tthis.bodyNotificationRef.current.addEventListener(\n\t\t\t\t'click',\n\t\t\t\t( event ) => this.handleBodyClick( event, this.props )\n\t\t\t);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif ( this.bodyNotificationRef.current ) {\n\t\t\tthis.bodyNotificationRef.current.removeEventListener(\n\t\t\t\t'click',\n\t\t\t\t( event ) => this.handleBodyClick( event, this.props )\n\t\t\t);\n\t\t}\n\t}\n\n\thandleBodyClick( event, props ) {\n\t\tconst innerLink = event.target.href;\n\t\tif ( innerLink ) {\n\t\t\tconst { note } = props;\n\n\t\t\trecordEvent( 'wcadmin_inbox_action_click', {\n\t\t\t\tnote_name: note.name,\n\t\t\t\tnote_title: note.title,\n\t\t\t\tnote_content_inner_link: innerLink,\n\t\t\t\tscreen: this.screen,\n\t\t\t} );\n\t\t}\n\t}\n\n\tgetScreenName() {\n\t\tlet screenName = '';\n\t\tconst { page, path, post_type: postType } = getUrlParams(\n\t\t\twindow.location.search\n\t\t);\n\t\tif ( page ) {\n\t\t\tconst currentPage = page === 'wc-admin' ? 'home_screen' : page;\n\t\t\tscreenName = path\n\t\t\t\t? path.replace( /\\//g, '_' ).substring( 1 )\n\t\t\t\t: currentPage;\n\t\t} else if ( postType ) {\n\t\t\tscreenName = postType;\n\t\t}\n\t\treturn screenName;\n\t}\n\n\t// Trigger a view Tracks event when the note is seen.\n\tonVisible( isVisible ) {\n\t\tif ( isVisible && ! this.hasBeenSeen ) {\n\t\t\tconst { note } = this.props;\n\n\t\t\trecordEvent( 'inbox_note_view', {\n\t\t\t\tnote_content: note.content,\n\t\t\t\tnote_name: note.name,\n\t\t\t\tnote_title: note.title,\n\t\t\t\tnote_type: note.type,\n\t\t\t\tscreen: this.screen,\n\t\t\t} );\n\n\t\t\tthis.hasBeenSeen = true;\n\t\t}\n\t}\n\n\topenDismissModal( type, onToggle ) {\n\t\tthis.setState( {\n\t\t\tisDismissModalOpen: true,\n\t\t\tdismissType: type,\n\t\t} );\n\t\tonToggle();\n\t}\n\n\tcloseDismissModal( noteNameDismissConfirmation ) {\n\t\tconst { dismissType } = this.state;\n\t\tconst { note } = this.props;\n\t\tconst noteNameDismissAll = dismissType === 'all' ? true : false;\n\n\t\trecordEvent( 'inbox_action_dismiss', {\n\t\t\tnote_name: note.name,\n\t\t\tnote_title: note.title,\n\t\t\tnote_name_dismiss_all: noteNameDismissAll,\n\t\t\tnote_name_dismiss_confirmation:\n\t\t\t\tnoteNameDismissConfirmation || false,\n\t\t\tscreen: this.screen,\n\t\t} );\n\n\t\tthis.setState( {\n\t\t\tisDismissModalOpen: false,\n\t\t} );\n\t}\n\n\thandleBlur( event, onClose ) {\n\t\tconst dropdownClasses = [\n\t\t\t'woocommerce-admin-dismiss-notification',\n\t\t\t'components-popover__content',\n\t\t];\n\t\t// This line is for IE compatibility.\n\t\tconst relatedTarget = event.relatedTarget\n\t\t\t? event.relatedTarget\n\t\t\t: document.activeElement;\n\t\tconst isClickOutsideDropdown = relatedTarget\n\t\t\t? dropdownClasses.some( ( className ) =>\n\t\t\t\t\trelatedTarget.className.includes( className )\n\t\t\t  )\n\t\t\t: false;\n\t\tif ( isClickOutsideDropdown ) {\n\t\t\tevent.preventDefault();\n\t\t} else {\n\t\t\tonClose();\n\t\t}\n\t}\n\n\trenderDismissButton() {\n\t\treturn (\n\t\t\t<Dropdown\n\t\t\t\tcontentClassName=\"woocommerce-admin-dismiss-dropdown\"\n\t\t\t\tposition=\"bottom right\"\n\t\t\t\trenderToggle={ ( { onClose, onToggle } ) => (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\tonBlur={ ( event ) =>\n\t\t\t\t\t\t\tthis.handleBlur( event, onClose )\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Dismiss', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\tfocusOnMount={ false }\n\t\t\t\tpopoverProps={ { noArrow: true } }\n\t\t\t\trenderContent={ ( { onToggle } ) => (\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-admin-dismiss-notification\"\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tthis.openDismissModal( 'this', onToggle )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Dismiss this message',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-admin-dismiss-notification\"\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tthis.openDismissModal( 'all', onToggle )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Dismiss all messages',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t) }\n\t\t\t/>\n\t\t);\n\t}\n\n\tgetDismissConfirmationButton() {\n\t\tconst { note } = this.props;\n\t\tconst { dismissType } = this.state;\n\t\treturn (\n\t\t\t<NoteAction\n\t\t\t\tkey={ note.id }\n\t\t\t\tnoteId={ dismissType === 'all' ? null : note.id }\n\t\t\t\tlabel={ __( \"Yes, I'm sure\", 'woocommerce-admin' ) }\n\t\t\t\tactionCallback={ this.closeDismissModal }\n\t\t\t\tdismiss={ true }\n\t\t\t/>\n\t\t);\n\t}\n\n\trenderDismissConfirmationModal() {\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\ttitle={\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t{ __( 'Are you sure?', 'woocommerce-admin' ) }\n\t\t\t\t\t</Fragment>\n\t\t\t\t}\n\t\t\t\tonRequestClose={ () => this.closeDismissModal() }\n\t\t\t\tclassName=\"woocommerce-inbox-dismiss-confirmation_modal\"\n\t\t\t>\n\t\t\t\t<div className=\"woocommerce-inbox-dismiss-confirmation_wrapper\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Dismissed messages cannot be viewed again',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"woocommerce-inbox-dismiss-confirmation_buttons\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\tonClick={ () => this.closeDismissModal() }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Cancel', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{ this.getDismissConfirmationButton() }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n\trenderActions( note ) {\n\t\tconst { actions: noteActions, id: noteId } = note;\n\t\tif ( ! noteActions ) {\n\t\t\treturn;\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{ noteActions.map( ( action, index ) => (\n\t\t\t\t\t<NoteAction\n\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\tnoteId={ noteId }\n\t\t\t\t\t\taction={ action }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { lastRead, note } = this.props;\n\t\tconst { isDismissModalOpen } = this.state;\n\t\tconst {\n\t\t\tcontent,\n\t\t\tdate_created: dateCreated,\n\t\t\tdate_created_gmt: dateCreatedGmt,\n\t\t\timage,\n\t\t\tis_deleted: isDeleted,\n\t\t\tlayout,\n\t\t\ttitle,\n\t\t} = note;\n\n\t\tif ( isDeleted ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst unread =\n\t\t\t! lastRead ||\n\t\t\t! dateCreatedGmt ||\n\t\t\tnew Date( dateCreatedGmt + 'Z' ).getTime() > lastRead;\n\t\tconst date = dateCreated;\n\t\tconst hasImage = layout !== 'plain' && layout !== '';\n\t\tconst cardClassName = classnames( 'woocommerce-inbox-message', layout, {\n\t\t\t'message-is-unread': unread,\n\t\t} );\n\n\t\treturn (\n\t\t\t<VisibilitySensor onChange={ this.onVisible }>\n\t\t\t\t<section className={ cardClassName }>\n\t\t\t\t\t{ hasImage && (\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__image\">\n\t\t\t\t\t\t\t<img src={ image } alt=\"\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t\t<div className=\"woocommerce-inbox-message__wrapper\">\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__content\">\n\t\t\t\t\t\t\t{ date && (\n\t\t\t\t\t\t\t\t<span className=\"woocommerce-inbox-message__date\">\n\t\t\t\t\t\t\t\t\t{ moment.utc( date ).fromNow() }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<H className=\"woocommerce-inbox-message__title\">\n\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t</H>\n\t\t\t\t\t\t\t<Section className=\"woocommerce-inbox-message__text\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML(\n\t\t\t\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\tref={ this.bodyNotificationRef }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__actions\">\n\t\t\t\t\t\t\t{ this.renderActions( note ) }\n\t\t\t\t\t\t\t{ this.renderDismissButton() }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{ isDismissModalOpen &&\n\t\t\t\t\t\tthis.renderDismissConfirmationModal() }\n\t\t\t\t</section>\n\t\t\t</VisibilitySensor>\n\t\t);\n\t}\n}\n\nInboxNoteCard.propTypes = {\n\tnote: PropTypes.shape( {\n\t\tid: PropTypes.number,\n\t\tstatus: PropTypes.string,\n\t\ttitle: PropTypes.string,\n\t\tcontent: PropTypes.string,\n\t\tdate_created: PropTypes.string,\n\t\tdate_created_gmt: PropTypes.string,\n\t\tactions: PropTypes.arrayOf(\n\t\t\tPropTypes.shape( {\n\t\t\t\tid: PropTypes.number.isRequired,\n\t\t\t\turl: PropTypes.string,\n\t\t\t\tlabel: PropTypes.string.isRequired,\n\t\t\t\tprimary: PropTypes.bool.isRequired,\n\t\t\t} )\n\t\t),\n\t\tlayout: PropTypes.string,\n\t\timage: PropTypes.string,\n\t\tis_deleted: PropTypes.bool,\n\t} ),\n\tlastRead: PropTypes.number,\n};\n\nexport default InboxNoteCard;\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useEffect } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\n\n/**\n * WooCommerce dependencies\n */\nimport { useUserPreferences } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport { ActivityCard } from '../../activity-card';\nimport InboxNotePlaceholder from './placeholder';\nimport ActivityHeader from '../../activity-header';\nimport InboxNoteCard from './card';\nimport { EmptyContent, Section } from '@woocommerce/components';\nimport { QUERY_DEFAULTS } from 'wc-api/constants';\nimport withSelect from 'wc-api/with-select';\nimport { getUnreadNotesCount, hasValidNotes } from './utils';\n\nconst renderEmptyCard = () => (\n\t<ActivityCard\n\t\tclassName=\"woocommerce-empty-activity-card\"\n\t\ttitle={ __( 'Your inbox is empty', 'woocommerce-admin' ) }\n\t\ticon={ false }\n\t>\n\t\t{ __(\n\t\t\t'As things begin to happen in your store your inbox will start to fill up. ' +\n\t\t\t\t\"You'll see things like achievements, new feature announcements, extension recommendations and more!\",\n\t\t\t'woocommerce-admin'\n\t\t) }\n\t</ActivityCard>\n);\n\nconst renderNotes = ( {\n\thasNotes,\n\tisDismissUndoRequesting,\n\tisDismissAllUndoRequesting,\n\tlastRead,\n\tnotes,\n} ) => {\n\tif ( isDismissAllUndoRequesting ) {\n\t\treturn;\n\t}\n\n\tif ( ! hasNotes ) {\n\t\treturn renderEmptyCard();\n\t}\n\n\tconst notesArray = Object.keys( notes ).map( ( key ) => notes[ key ] );\n\n\treturn notesArray.map( ( note ) => {\n\t\tif ( isDismissUndoRequesting === note.id ) {\n\t\t\treturn (\n\t\t\t\t<InboxNotePlaceholder\n\t\t\t\t\tclassName=\"banner message-is-unread\"\n\t\t\t\t\tkey={ note.id }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<InboxNoteCard\n\t\t\t\tkey={ note.id }\n\t\t\t\tnote={ note }\n\t\t\t\tlastRead={ lastRead }\n\t\t\t/>\n\t\t);\n\t} );\n}\n\nconst InboxPanel = ( props ) => {\n\tconst {\n\t\tisError,\n\t\tisPanelEmpty,\n\t\tisRequesting,\n\t\tisUndoRequesting,\n\t\tisDismissAllUndoRequesting,\n\t\tisDismissUndoRequesting,\n\t\tnotes,\n\t} = props;\n\tconst { updateUserPreferences, ...userPrefs } = useUserPreferences();\n\tconst lastRead = userPrefs.activity_panel_inbox_last_read;\n\n\tuseEffect( () => {\n\t\tconst mountTime = Date.now();\n\t\n\t\treturn () => {\n\t\t\tconst userDataFields = {\n\t\t\t\tactivity_panel_inbox_last_read: mountTime,\n\t\t\t};\n\t\t\tupdateUserPreferences( userDataFields );\n\t\t};\n\t}, [] );\n\n\tif ( isError ) {\n\t\tconst title = __(\n\t\t\t'There was an error getting your inbox. Please try again.',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t\tconst actionLabel = __( 'Reload', 'woocommerce-admin' );\n\t\tconst actionCallback = () => {\n\t\t\t// @todo Add tracking for how often an error is displayed, and the reload action is clicked.\n\t\t\twindow.location.reload();\n\t\t};\n\n\t\t\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<EmptyContent\n\t\t\t\t\ttitle={ title }\n\t\t\t\t\tactionLabel={ actionLabel }\n\t\t\t\t\tactionURL={ null }\n\t\t\t\t\tactionCallback={ actionCallback }\n\t\t\t\t/>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\tconst hasNotes = hasValidNotes( notes );\n\n\tconst isActivityHeaderVisible =\n\t\thasNotes || isRequesting || isUndoRequesting;\n\n\tif ( isPanelEmpty ) {\n\t\tisPanelEmpty( ! hasNotes && ! isActivityHeaderVisible );\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{ isActivityHeaderVisible && (\n\t\t\t\t<ActivityHeader\n\t\t\t\t\ttitle={ __( 'Inbox', 'woocommerce-admin' ) }\n\t\t\t\t\tsubtitle={ __(\n\t\t\t\t\t\t'Insights and growth tips for your business',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t\tunreadMessages={ getUnreadNotesCount(\n\t\t\t\t\t\tnotes,\n\t\t\t\t\t\tlastRead\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<div className=\"woocommerce-homepage-notes-wrapper\">\n\t\t\t\t{ ( isRequesting || isDismissAllUndoRequesting ) && (\n\t\t\t\t\t<Section>\n\t\t\t\t\t\t<InboxNotePlaceholder className=\"banner message-is-unread\" />\n\t\t\t\t\t</Section>\n\t\t\t\t) }\n\t\t\t\t<Section>\n\t\t\t\t\t{ ! isRequesting &&\n\t\t\t\t\t\t! isDismissAllUndoRequesting &&\n\t\t\t\t\t\trenderNotes( {\n\t\t\t\t\t\t\thasNotes,\n\t\t\t\t\t\t\tisDismissUndoRequesting,\n\t\t\t\t\t\t\tisDismissAllUndoRequesting,\n\t\t\t\t\t\t\tlastRead,\n\t\t\t\t\t\t\tnotes,\n\t\t\t\t\t\t} ) }\n\t\t\t\t</Section>\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetNotes,\n\t\t\tgetNotesError,\n\t\t\tisGetNotesRequesting,\n\t\t\tgetUndoDismissRequesting,\n\t\t} = select( 'wc-api' );\n\t\tconst inboxQuery = {\n\t\t\tpage: 1,\n\t\t\tper_page: QUERY_DEFAULTS.pageSize,\n\t\t\ttype: QUERY_DEFAULTS.noteTypes,\n\t\t\torderby: 'date',\n\t\t\torder: 'desc',\n\t\t\tstatus: 'unactioned',\n\t\t\t_fields: [\n\t\t\t\t'id',\n\t\t\t\t'name',\n\t\t\t\t'title',\n\t\t\t\t'content',\n\t\t\t\t'type',\n\t\t\t\t'status',\n\t\t\t\t'actions',\n\t\t\t\t'date_created',\n\t\t\t\t'date_created_gmt',\n\t\t\t\t'layout',\n\t\t\t\t'image',\n\t\t\t\t'is_deleted',\n\t\t\t],\n\t\t};\n\n\t\tconst notes = getNotes( inboxQuery );\n\t\tconst isError = Boolean( getNotesError( inboxQuery ) );\n\t\tconst isRequesting = isGetNotesRequesting( inboxQuery );\n\t\tconst {\n\t\t\tisUndoRequesting,\n\t\t\tisDismissUndoRequesting,\n\t\t\tisDismissAllUndoRequesting,\n\t\t} = getUndoDismissRequesting();\n\n\t\treturn {\n\t\t\tnotes,\n\t\t\tisError,\n\t\t\tisRequesting,\n\t\t\tisUndoRequesting,\n\t\t\tisDismissUndoRequesting,\n\t\t\tisDismissAllUndoRequesting,\n\t\t};\n\t} )\n)( InboxPanel );\n","/**\n * External dependencies\n */\nimport { Component } from '@wordpress/element';\nimport PropTypes from 'prop-types';\n\nclass InboxNotePlaceholder extends Component {\n\trender() {\n\t\tconst { className } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={ `woocommerce-inbox-message is-placeholder ${ className }` }\n\t\t\t\taria-hidden\n\t\t\t>\n\t\t\t\t<div className=\"woocommerce-inbox-message__image\">\n\t\t\t\t\t<div className=\"banner-block\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"woocommerce-inbox-message__wrapper\">\n\t\t\t\t\t<div className=\"woocommerce-inbox-message__content\">\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__date\">\n\t\t\t\t\t\t\t<div className=\"sixth-line\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__title\">\n\t\t\t\t\t\t\t<div className=\"line\" />\n\t\t\t\t\t\t\t<div className=\"line\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__text\">\n\t\t\t\t\t\t\t<div className=\"line\" />\n\t\t\t\t\t\t\t<div className=\"third-line\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"woocommerce-inbox-message__actions\">\n\t\t\t\t\t\t<div className=\"fifth-line\" />\n\t\t\t\t\t\t<div className=\"fifth-line\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nInboxNotePlaceholder.propTypes = {\n\tclassName: PropTypes.string,\n};\n\nexport default InboxNotePlaceholder;\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport { filter } from 'lodash';\n\n/**\n * Get the count of the unread notes.\n *\n * @param {Array} notes - List of notes, contains read and unread notes.\n * @param {number} lastRead - The timestamp that the user read a note.\n * @return {number} - Unread notes count.\n */\nexport function getUnreadNotesCount( notes, lastRead ) {\n\tconst unreadNotes = filter( notes, ( note ) => {\n\t\tconst {\n\t\t\tis_deleted: isDeleted,\n\t\t\tdate_created_gmt: dateCreatedGmt,\n\t\t} = note;\n\t\tif ( ! isDeleted ) {\n\t\t\treturn (\n\t\t\t\t! lastRead ||\n\t\t\t\t! dateCreatedGmt ||\n\t\t\t\tnew Date( dateCreatedGmt + 'Z' ).getTime() > lastRead\n\t\t\t);\n\t\t}\n\t} );\n\treturn unreadNotes.length;\n}\n\n/**\n * Verifies if there are any valid notes in the list.\n *\n * @param {Array} notes - List of notes, contains read and unread notes.\n * @return {boolean} - Whether there are valid notes or not.\n */\nexport function hasValidNotes( notes ) {\n\tconst validNotes = filter( notes, ( note ) => {\n\t\tconst { is_deleted: isDeleted } = note;\n\t\treturn ! isDeleted;\n\t} );\n\treturn validNotes.length > 0;\n}\n","/**\n * External dependencies\n */\nimport { sanitize } from 'dompurify';\n\nexport const ALLOWED_TAGS = [ 'a', 'b', 'em', 'i', 'strong', 'p' ];\nexport const ALLOWED_ATTR = [ 'target', 'href', 'rel', 'name', 'download' ];\n\nexport default ( html ) => {\n\treturn {\n\t\t__html: sanitize( html, { ALLOWED_TAGS, ALLOWED_ATTR } ),\n\t};\n};\n"],"sourceRoot":""}