{"version":3,"sources":["webpack://wc.[modulename]/./client/layout/store-alerts/index.js","webpack://wc.[modulename]/./client/layout/store-alerts/placeholder.js","webpack://wc.[modulename]/./client/layout/store-alerts/style.scss","webpack://wc.[modulename]/./client/lib/sanitize-html/index.js"],"names":["StoreAlerts","props","alerts","state","currentIndex","previousAlert","bind","nextAlert","event","stopPropagation","setState","length","alert","triggerNoteAction","updateNote","actions","map","action","name","primary","url","undefined","id","label","snoozeOptions","value","moment","add","unix","toString","__","hour","minute","second","millisecond","setReminderDate","snoozeOption","status","date_reminder","eventProps","alert_name","alert_title","title","snooze_duration","snooze_label","recordEvent","snooze","is_snoozable","reminderOption","find","option","reminderDate","preloadAlertCount","getSetting","count","parseInt","isLoading","numberOfAlerts","type","className","classnames","icon","chevronLeft","interpolateComponents","mixedString","components","current","total","chevronRight","sanitizeHTML","content","renderActions","Component","compose","withSelect","select","getNotes","isGetNotesRequesting","alertsQuery","page","per_page","QUERY_DEFAULTS","pageSize","filterNotes","note","filter","withDispatch","dispatch","StoreAlertsPlaceholder","hasMultipleAlerts","propTypes","PropTypes","bool","defaultProps","ALLOWED_TAGS","ALLOWED_ATTR","html","__html","sanitize"],"mappings":"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","file":"chunks/store-alerts.db93c83288dada77e881.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Button, Dashicon, SelectControl } from '@wordpress/components';\nimport classnames from 'classnames';\nimport interpolateComponents from 'interpolate-components';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\nimport moment from 'moment';\nimport { Icon, chevronLeft, chevronRight } from '@wordpress/icons';\n\n/**\n * WooCommerce dependencies\n */\nimport { Card } from '@woocommerce/components';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport withSelect from 'wc-api/with-select';\nimport { QUERY_DEFAULTS } from 'wc-api/constants';\nimport sanitizeHTML from 'lib/sanitize-html';\nimport StoreAlertsPlaceholder from './placeholder';\nimport { recordEvent } from 'lib/tracks';\n\nimport './style.scss';\n\nclass StoreAlerts extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tconst { alerts } = this.props;\n\n\t\tthis.state = {\n\t\t\tcurrentIndex: alerts ? 0 : null,\n\t\t};\n\n\t\tthis.previousAlert = this.previousAlert.bind( this );\n\t\tthis.nextAlert = this.nextAlert.bind( this );\n\t}\n\n\tpreviousAlert( event ) {\n\t\tevent.stopPropagation();\n\t\tconst { currentIndex } = this.state;\n\n\t\tif ( currentIndex > 0 ) {\n\t\t\tthis.setState( {\n\t\t\t\tcurrentIndex: currentIndex - 1,\n\t\t\t} );\n\t\t}\n\t}\n\n\tnextAlert( event ) {\n\t\tevent.stopPropagation();\n\t\tconst { alerts } = this.props;\n\t\tconst { currentIndex } = this.state;\n\n\t\tif ( currentIndex < alerts.length - 1 ) {\n\t\t\tthis.setState( {\n\t\t\t\tcurrentIndex: currentIndex + 1,\n\t\t\t} );\n\t\t}\n\t}\n\n\trenderActions( alert ) {\n\t\tconst { triggerNoteAction, updateNote } = this.props;\n\t\tconst actions = alert.actions.map( ( action ) => {\n\t\t\treturn (\n\t\t\t\t<Button\n\t\t\t\t\tkey={ action.name }\n\t\t\t\t\tisPrimary={ action.primary }\n\t\t\t\t\tisSecondary={ ! action.primary }\n\t\t\t\t\thref={ action.url || undefined }\n\t\t\t\t\tonClick={ () => triggerNoteAction( alert.id, action.id ) }\n\t\t\t\t>\n\t\t\t\t\t{ action.label }\n\t\t\t\t</Button>\n\t\t\t);\n\t\t} );\n\n\t\t// TODO: should \"next X\" be the start, or exactly 1X from the current date?\n\t\tconst snoozeOptions = [\n\t\t\t{\n\t\t\t\tvalue: moment()\n\t\t\t\t\t.add( 4, 'hours' )\n\t\t\t\t\t.unix()\n\t\t\t\t\t.toString(),\n\t\t\t\tlabel: __( 'Later Today', 'woocommerce-admin' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: moment()\n\t\t\t\t\t.add( 1, 'day' )\n\t\t\t\t\t.hour( 9 )\n\t\t\t\t\t.minute( 0 )\n\t\t\t\t\t.second( 0 )\n\t\t\t\t\t.millisecond( 0 )\n\t\t\t\t\t.unix()\n\t\t\t\t\t.toString(),\n\t\t\t\tlabel: __( 'Tomorrow', 'woocommerce-admin' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: moment()\n\t\t\t\t\t.add( 1, 'week' )\n\t\t\t\t\t.hour( 9 )\n\t\t\t\t\t.minute( 0 )\n\t\t\t\t\t.second( 0 )\n\t\t\t\t\t.millisecond( 0 )\n\t\t\t\t\t.unix()\n\t\t\t\t\t.toString(),\n\t\t\t\tlabel: __( 'Next Week', 'woocommerce-admin' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: moment()\n\t\t\t\t\t.add( 1, 'month' )\n\t\t\t\t\t.hour( 9 )\n\t\t\t\t\t.minute( 0 )\n\t\t\t\t\t.second( 0 )\n\t\t\t\t\t.millisecond( 0 )\n\t\t\t\t\t.unix()\n\t\t\t\t\t.toString(),\n\t\t\t\tlabel: __( 'Next Month', 'woocommerce-admin' ),\n\t\t\t},\n\t\t];\n\n\t\tconst setReminderDate = ( snoozeOption ) => {\n\t\t\tupdateNote( alert.id, {\n\t\t\t\tstatus: 'snoozed',\n\t\t\t\tdate_reminder: snoozeOption.value,\n\t\t\t} );\n\n\t\t\tconst eventProps = {\n\t\t\t\talert_name: alert.name,\n\t\t\t\talert_title: alert.title,\n\t\t\t\tsnooze_duration: snoozeOption.value,\n\t\t\t\tsnooze_label: snoozeOption.label,\n\t\t\t};\n\t\t\trecordEvent( 'store_alert_snooze', eventProps );\n\t\t};\n\n\t\tconst snooze = alert.is_snoozable && (\n\t\t\t<SelectControl\n\t\t\t\tclassName=\"woocommerce-store-alerts__snooze\"\n\t\t\t\toptions={ [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __( 'Remind Me Later', 'woocommerce-admin' ),\n\t\t\t\t\t\tvalue: '0',\n\t\t\t\t\t},\n\t\t\t\t\t...snoozeOptions,\n\t\t\t\t] }\n\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\tif ( value === '0' ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst reminderOption = snoozeOptions.find(\n\t\t\t\t\t\t( option ) => option.value === value\n\t\t\t\t\t);\n\t\t\t\t\tconst reminderDate = {\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tlabel: reminderOption && reminderOption.label,\n\t\t\t\t\t};\n\t\t\t\t\tsetReminderDate( reminderDate );\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\n\t\tif ( actions || snooze ) {\n\t\t\treturn (\n\t\t\t\t<div className=\"woocommerce-store-alerts__actions\">\n\t\t\t\t\t{ actions }\n\t\t\t\t\t{ snooze }\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst alerts = this.props.alerts || [];\n\t\tconst preloadAlertCount = getSetting( 'alertCount', 0, ( count ) =>\n\t\t\tparseInt( count, 10 )\n\t\t);\n\n\t\tif ( preloadAlertCount > 0 && this.props.isLoading ) {\n\t\t\treturn (\n\t\t\t\t<StoreAlertsPlaceholder\n\t\t\t\t\thasMultipleAlerts={ preloadAlertCount > 1 }\n\t\t\t\t/>\n\t\t\t);\n\t\t} else if ( alerts.length === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { currentIndex } = this.state;\n\t\tconst numberOfAlerts = alerts.length;\n\t\tconst alert = alerts[ currentIndex ];\n\t\tconst type = alert.type;\n\t\tconst className = classnames(\n\t\t\t'woocommerce-store-alerts',\n\t\t\t'woocommerce-analytics__card',\n\t\t\t{\n\t\t\t\t'is-alert-error': type === 'error',\n\t\t\t\t'is-alert-update': type === 'update',\n\t\t\t}\n\t\t);\n\n\t\treturn (\n\t\t\t<Card\n\t\t\t\ttitle={ [\n\t\t\t\t\talert.icon && <Dashicon key=\"icon\" icon={ alert.icon } />,\n\t\t\t\t\t<Fragment key=\"title\">{ alert.title }</Fragment>,\n\t\t\t\t] }\n\t\t\t\tclassName={ className }\n\t\t\t\taction={\n\t\t\t\t\tnumberOfAlerts > 1 && (\n\t\t\t\t\t\t<div className=\"woocommerce-store-alerts__pagination\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={ this.previousAlert }\n\t\t\t\t\t\t\t\tdisabled={ currentIndex === 0 }\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Previous Alert',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon icon={ chevronLeft } />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-store-alerts__pagination-label\"\n\t\t\t\t\t\t\t\trole=\"status\"\n\t\t\t\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t\t\t\t'{{current /}} of {{total /}}',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\t\t\tcurrent: (\n\t\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t{ currentIndex + 1 }\n\t\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\ttotal: (\n\t\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t{ numberOfAlerts }\n\t\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={ this.nextAlert }\n\t\t\t\t\t\t\t\tdisabled={ numberOfAlerts - 1 === currentIndex }\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Next Alert',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon icon={ chevronRight } />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"woocommerce-store-alerts__message\"\n\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML( alert.content ) }\n\t\t\t\t/>\n\t\t\t\t{ this.renderActions( alert ) }\n\t\t\t</Card>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getNotes, isGetNotesRequesting } = select( 'wc-api' );\n\t\tconst alertsQuery = {\n\t\t\tpage: 1,\n\t\t\tper_page: QUERY_DEFAULTS.pageSize,\n\t\t\ttype: 'error,update',\n\t\t\tstatus: 'unactioned',\n\t\t};\n\n\t\t// Filter out notes that may have been marked actioned or not delayed after the initial request\n\t\tconst filterNotes = ( note ) => note.status === 'unactioned';\n\t\tconst alerts = getNotes( alertsQuery ).filter( filterNotes );\n\n\t\tconst isLoading = isGetNotesRequesting( alertsQuery );\n\n\t\treturn {\n\t\t\talerts,\n\t\t\tisLoading,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { triggerNoteAction, updateNote } = dispatch( 'wc-api' );\n\n\t\treturn {\n\t\t\ttriggerNoteAction,\n\t\t\tupdateNote,\n\t\t};\n\t} )\n)( StoreAlerts );\n","/**\n * External dependencies\n */\nimport { Component } from '@wordpress/element';\nimport PropTypes from 'prop-types';\n\nclass StoreAlertsPlaceholder extends Component {\n\trender() {\n\t\tconst { hasMultipleAlerts } = this.props;\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"woocommerce-card woocommerce-store-alerts is-loading\"\n\t\t\t\taria-hidden\n\t\t\t>\n\t\t\t\t<div className=\"woocommerce-card__header\">\n\t\t\t\t\t<div className=\"woocommerce-card__title woocommerce-card__header-item\">\n\t\t\t\t\t\t<span className=\"is-placeholder\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t{ hasMultipleAlerts && (\n\t\t\t\t\t\t<div className=\"woocommerce-card__action woocommerce-card__header-item\">\n\t\t\t\t\t\t\t<span className=\"is-placeholder\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"woocommerce-card__body\">\n\t\t\t\t\t<div className=\"woocommerce-store-alerts__message\">\n\t\t\t\t\t\t<span className=\"is-placeholder\" />\n\t\t\t\t\t\t<span className=\"is-placeholder\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"woocommerce-store-alerts__actions\">\n\t\t\t\t\t\t<span className=\"is-placeholder\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default StoreAlertsPlaceholder;\n\nStoreAlertsPlaceholder.propTypes = {\n\t/**\n\t * Whether multiple alerts exists.\n\t */\n\thasMultipleAlerts: PropTypes.bool,\n};\n\nStoreAlertsPlaceholder.defaultProps = {\n\thasMultipleAlerts: false,\n};\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport { sanitize } from 'dompurify';\n\nexport const ALLOWED_TAGS = [ 'a', 'b', 'em', 'i', 'strong', 'p' ];\nexport const ALLOWED_ATTR = [ 'target', 'href', 'rel', 'name', 'download' ];\n\nexport default ( html ) => {\n\treturn {\n\t\t__html: sanitize( html, { ALLOWED_TAGS, ALLOWED_ATTR } ),\n\t};\n};\n"],"sourceRoot":""}