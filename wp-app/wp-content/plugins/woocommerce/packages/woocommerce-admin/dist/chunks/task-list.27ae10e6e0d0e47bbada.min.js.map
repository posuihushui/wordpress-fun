{"version":3,"sources":["webpack://wc.[modulename]/./client/dashboard/components/cart-modal.js","webpack://wc.[modulename]/./client/dashboard/components/settings/general/store-address.js","webpack://wc.[modulename]/./client/lib/in-app-purchase.js","webpack://wc.[modulename]/./client/lib/sanitize-html/index.js","webpack://wc.[modulename]/./client/task-list/index.js","webpack://wc.[modulename]/./client/task-list/tasks.js","webpack://wc.[modulename]/./client/task-list/tasks/appearance.js","webpack://wc.[modulename]/./client/task-list/tasks/connect.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/bacs.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/images/bacs.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/images/cod.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/images/wcpay.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/index.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/klarna.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/methods.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/payfast.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/paypal.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/square.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/stripe.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/wcpay.js","webpack://wc.[modulename]/./client/task-list/tasks/products.js","webpack://wc.[modulename]/./client/task-list/tasks/shipping/index.js","webpack://wc.[modulename]/./client/task-list/tasks/shipping/rates.js","webpack://wc.[modulename]/./client/task-list/tasks/steps/location.js","webpack://wc.[modulename]/./client/task-list/tasks/tax.js"],"names":["CartModal","props","state","purchaseNowButtonBusy","purchaseLaterButtonBusy","productIds","onClickPurchaseNow","setState","length","recordEvent","product_ids","purchase_install","url","getInAppPurchaseUrl","join","window","location","onClickPurchaseLater","onClose","getSetting","productTypes","themes","listItems","forEach","productId","productInfo","find","productType","product","push","title","label","content","description","themeInfo","theme","id","sprintf","__","decodeEntities","price","sanitizeHTML","excerpt","renderProducts","Component","compose","withSelect","select","PLUGINS_STORE_NAME","getInstalledPlugins","ONBOARDING_STORE_NAME","getProfileItems","profileItems","installedPlugins","getProductIdsForCart","countries","validateStoreAddress","values","errors","addressLine1","countryState","city","postCode","getCountryStateOptions","countryStateOptions","reduce","acc","country","states","key","code","name","countryStates","map","useGetCountryStateAutofill","options","setValue","useState","autofillCountry","setAutofillCountry","autofillState","setAutofillState","useEffect","filteredOptions","countrySearch","RegExp","escapeRegExp","filter","option","test","stateSearch","replace","countryKeyOptions","stateKeyOptions","event","target","value","StoreAddress","getInputProps","useMemo","countryStateAutofill","className","queryArgs","pathname","search","connectNonce","addQueryArgs","ALLOWED_TAGS","ALLOWED_ATTR","html","__html","sanitize","TaskDashboard","isCartModalOpen","isWelcomeModalOpen","modalDismissed","incompleteTasks","updateOptions","document","body","classList","add","recordTaskView","recordTaskListView","woocommerce_task_list_complete","possiblyTrackCompletedTasks","prevProps","completedTaskKeys","query","prevCompletedTaskKeys","prevIncompleteTasks","prevQuery","prevTask","task","documentElement","scrollTop","isEqual","trackedCompletedTasks","woocommerce_task_list_tracked_completed_tasks","remove","taskListPayments","getAllTasks","toggleCartModal","bind","visible","isJetpackConnected","activePlugins","wcs_installed","includes","wcs_active","jetpack_installed","jetpack_active","jetpack_connected","pluginsInformation","getPluginsInformation","task_name","getCurrentTask","tasks","getTasks","number_tasks","store_connected","wccom_connected","action","woocommerce_task_list_prompt_shown","woocommerce_task_list_hidden","currentTask","s","hideTaskCard","contains","woocommerce_task_list_welcome_modal_dismissed","closeWelcomeModal","listTasks","classNames","completed","before","check","after","time","chevronRight","onClick","updateQueryString","numCompleteTasks","progressBarClass","cloneElement","container","renderMenu","renderWelcomeModal","OPTIONS_STORE_NAME","getOption","getActivePlugins","payments","withDispatch","dispatch","hasPhysicalProducts","hasProducts","isAppearanceComplete","isTaxComplete","shippingZonesCount","remainingProductIds","paymentsCompleted","Boolean","paymentsSkipped","skipped","getAdminLink","items_purchased","product_types","applyFilters","Appearance","hasHomepage","stepVisibility","homepage","import","isDirty","isPending","logo","stepIndex","isUpdatingLogo","isUpdatingNotice","storeNoticeText","demoStoreNotice","completeStep","createHomepage","importProducts","updateLogo","updateNotice","themeMods","custom_logo","wp","media","attachment","fetch","then","logoUrl","get","nextStep","getSteps","getHistory","getNewPath","createNotice","apiFetch","path","WC_ADMIN_NAMESPACE","method","result","failed","setSetting","catch","error","message","create_homepage","response","status","actions","edit_post_link","queueRecordEvent","stylesheet","updatedThemeMods","update","success","added_text","woocommerce_task_list_appearance_complete","woocommerce_demo_store","woocommerce_demo_store_notice","steps","image","step","currentStep","Connect","deny","errorMessage","request_token","request","finish","baseQuery","omit","page","connectResponse","connectAction","Error","data","updateProfileItems","isProfileItemsError","getOnboardingError","PayFast","getInitialConfigValues","account_name","account_number","bank_name","sort_code","iban","bic","validate","updateSettings","markConfigured","woocommerce_bacs_settings","enabled","woocommerce_bacs_accounts","isOptionsRequesting","handleSubmit","isOptionsUpdating","Payments","arguments","methods","enabledMethods","isEnabled","busyMethod","recommendedMethod","getRecommendedMethod","completeTask","skipTask","m","woocommerce_task_list_payments","timestamp","Math","floor","Date","now","configured","isConfigured","payment_method","currentMethod","getCurrentMethod","plugins","pluginsToInstall","pluginNamesString","pluginSlug","pluginNames","isComplete","optionName","selected","Promise","requesting","hasEnabledMethods","Object","keys","installStep","getInstallStep","hasCbdIndustry","classes","classnames","isRecommended","showRecommendedRibbon","showRecommendedPill","handleClick","toggleMethod","e","stopPropagation","installAndActivatePlugins","optionNames","countryCode","getCountryCode","woocommerce_default_country","getPaymentMethods","Klarna","continue","plugin","slug","section","link","adminUrl","helpLink","configureText","interpolateComponents","mixedString","components","renderConnectStep","settings","stripeSupportedCountries","wcPayIsConnected","some","industry","wcAdminFeatures","wcpay","tosLink","tosPrompt","wcPayDocLink","wcPayDocPrompt","wcPaySettingsLink","setup_client","resolve","reject","connect","connectUrl","createNoticesFromResponse","woocommerce_woocommerce_payments_settings","wcAssetUrl","woocommerce_stripe_settings","publishable_key","secret_key","woocommerce_ppec_paypal_settings","api_username","api_password","woocommerce_kco_settings","woocommerce_klarna_payments_settings","selling_venues","wc_square_refresh_tokens","woocommerce_square_credit_card_settings","woocommerce_payfast_settings","merchant_id","merchant_key","pass_phrase","woocommerce_cod_settings","woocommerce_currency","helpText","PayPal","autoConnectFailed","connectURL","getQuery","fetchOAuthConnectURL","help","connectStep","renderConnectButton","renderManualConfig","getConnectStep","defaultProps","manualConfig","Square","newWindow","open","close","redirect","href","isResolving","optionsIsRequesting","Stripe","oAuthConnectFailed","stripeSettings","isStripeConnected","completeMethod","requiresManualConfig","WCS_NAMESPACE","returnUrl","oauthUrl","match","stripeHelp","docsLink","registerLink","validateManualConfig","WCPay","subTasks","Products","Shipping","initialState","shippingZones","reset","countryName","zones","hasCountryZone","all","zone","toggleable","locations","countryLocation","type","reverse","prevState","storeAddress","woocommerce_store_address","defaultCountry","storePostCode","woocommerce_store_postcode","fetchShippingZones","isCompleteAddress","currentStepIndex","findIndex","difference","pluginsToActivate","getPluginsToActivate","requiresJetpackConnection","install","isSettingsRequesting","SETTINGS_STORE_NAME","getSettings","getSettingsError","isGetSettingsRequesting","general","isSettingsError","c","updateAndPersistSettingsForGroup","ShippingRates","updateShippingZones","Array","isArray","method_id","instance_id","restOfTheWorld","shippingCost","parseFloat","shippingMethods","getShippingMethods","methodType","shippingMethod","disableShippingMethods","methodsToDisable","cost","shipping_cost","rest_world","onComplete","context","getCurrency","symbolPosition","symbol","indexOf","rate","formatDecimalString","currencyString","getFormattedRate","rates","field","endsWith","buttonText","getInitialValues","setTouched","renderInputPrefix","renderInputSuffix","propTypes","PropTypes","string","func","isRequired","array","contextType","CurrencyContext","StoreLocation","onSubmit","woocommerce_store_address_2","addressLine2","woocommerce_store_city","storeAddress2","storeCity","storePostcode","Tax","automatedTaxEnabled","configureTaxRates","updateAutomatedTax","setIsPending","shouldShowSuccessScreen","generalSettings","isTaxJarSupported","taxSettings","isGeneralSettingsRequesting","calcTaxes","woocommerce_calc_taxes","currentStepKey","wc_connect_taxes_enabled","prevCalcTaxes","tosAccepted","automatedTaxSupportedCountries","taxJarActivated","tax","isTaxSettingsError","isGeneralSettingsError","install_extensions","isTaxSettingsRequesting","strong","setup_automatically","connectOptions","tos_accepted"],"mappings":"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","file":"chunks/task-list.27ae10e6e0d0e47bbada.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { Button, Modal } from '@wordpress/components';\nimport { find } from 'lodash';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { getSetting } from '@woocommerce/wc-admin-settings';\nimport { List } from '@woocommerce/components';\nimport { ONBOARDING_STORE_NAME, PLUGINS_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport { getProductIdsForCart } from 'dashboard/utils';\nimport sanitizeHTML from 'lib/sanitize-html';\nimport { recordEvent } from 'lib/tracks';\nimport { getInAppPurchaseUrl } from 'lib/in-app-purchase';\n\nclass CartModal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tpurchaseNowButtonBusy: false,\n\t\t\tpurchaseLaterButtonBusy: false,\n\t\t};\n\t}\n\n\tonClickPurchaseNow() {\n\t\tconst { productIds, onClickPurchaseNow } = this.props;\n\t\tthis.setState( { purchaseNowButtonBusy: true } );\n\t\tif ( ! productIds.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\trecordEvent( 'tasklist_modal_proceed_checkout', {\n\t\t\tproduct_ids: productIds,\n\t\t\tpurchase_install: true,\n\t\t} );\n\n\t\tconst url = getInAppPurchaseUrl( 'https://woocommerce.com/cart', {\n\t\t\t'wccom-replace-with': productIds.join( ',' ),\n\t\t} );\n\n\t\tif ( onClickPurchaseNow ) {\n\t\t\tonClickPurchaseNow( url );\n\t\t\treturn;\n\t\t}\n\n\t\twindow.location = url;\n\t}\n\n\tonClickPurchaseLater() {\n\t\tconst { productIds } = this.props;\n\n\t\trecordEvent( 'tasklist_modal_proceed_checkout', {\n\t\t\tproduct_ids: productIds,\n\t\t\tpurchase_install: false,\n\t\t} );\n\n\t\tthis.setState( { purchaseLaterButtonBusy: true } );\n\t\tthis.props.onClickPurchaseLater();\n\t}\n\n\tonClose() {\n\t\tconst { onClose, productIds } = this.props;\n\n\t\trecordEvent( 'tasklist_modal_proceed_checkout', {\n\t\t\tproduct_ids: productIds,\n\t\t\tpurchase_install: false,\n\t\t} );\n\n\t\tonClose();\n\t}\n\n\trenderProducts() {\n\t\tconst { productIds } = this.props;\n\t\tconst { productTypes = {}, themes = [] } = getSetting(\n\t\t\t'onboarding',\n\t\t\t{}\n\t\t);\n\t\tconst listItems = [];\n\n\t\tproductIds.forEach( ( productId ) => {\n\t\t\tconst productInfo = find( productTypes, ( productType ) => {\n\t\t\t\treturn productType.product === productId;\n\t\t\t} );\n\n\t\t\tif ( productInfo ) {\n\t\t\t\tlistItems.push( {\n\t\t\t\t\ttitle: productInfo.label,\n\t\t\t\t\tcontent: productInfo.description,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tconst themeInfo = find( themes, ( theme ) => {\n\t\t\t\treturn theme.id === productId;\n\t\t\t} );\n\n\t\t\tif ( themeInfo ) {\n\t\t\t\tlistItems.push( {\n\t\t\t\t\ttitle: sprintf(\n\t\t\t\t\t\t__( '%s — %s per year', 'woocommerce-admin' ),\n\t\t\t\t\t\tthemeInfo.title,\n\t\t\t\t\t\tdecodeEntities( themeInfo.price )\n\t\t\t\t\t),\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML(\n\t\t\t\t\t\t\t\tthemeInfo.excerpt\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\treturn <List items={ listItems } />;\n\t}\n\n\trender() {\n\t\tconst { purchaseNowButtonBusy, purchaseLaterButtonBusy } = this.state;\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\ttitle={ __(\n\t\t\t\t\t'Would you like to purchase and install the following features now?',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t) }\n\t\t\t\tonRequestClose={ () => this.onClose() }\n\t\t\t\tclassName=\"woocommerce-cart-modal\"\n\t\t\t>\n\t\t\t\t{ this.renderProducts() }\n\n\t\t\t\t<p className=\"woocommerce-cart-modal__help-text\">\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t\"You won't have access to this functionality until the extensions have been purchased and installed.\",\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\n\t\t\t\t<div className=\"woocommerce-cart-modal__actions\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisLink\n\t\t\t\t\t\tisBusy={ purchaseLaterButtonBusy }\n\t\t\t\t\t\tonClick={ () => this.onClickPurchaseLater() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( \"I'll do it later\", 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tisBusy={ purchaseNowButtonBusy }\n\t\t\t\t\t\tonClick={ () => this.onClickPurchaseNow() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Purchase & install now', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getInstalledPlugins } = select( PLUGINS_STORE_NAME );\n\t\tconst { getProfileItems } = select( ONBOARDING_STORE_NAME );\n\t\tconst profileItems = getProfileItems();\n\t\tconst installedPlugins = getInstalledPlugins();\n\t\tconst productIds = getProductIdsForCart(\n\t\t\tprofileItems,\n\t\t\tfalse,\n\t\t\tinstalledPlugins\n\t\t);\n\n\t\treturn { profileItems, productIds };\n\t} )\n)( CartModal );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { escapeRegExp } from 'lodash';\nimport { Fragment } from '@wordpress/element';\nimport { useEffect, useMemo, useState } from 'react';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport { SelectControl, TextControl } from '@woocommerce/components';\n\nconst { countries } = getSetting( 'dataEndpoints', { countries: {} } );\n/**\n * Form validation.\n *\n * @param {Object} values Keyed values of all fields in the form.\n * @return {Object} Key value of fields and error messages, { myField: 'This field is required' }\n */\nexport function validateStoreAddress( values ) {\n\tconst errors = {};\n\n\tif ( ! values.addressLine1.length ) {\n\t\terrors.addressLine1 = __(\n\t\t\t'Please add an address',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t}\n\tif ( ! values.countryState.length ) {\n\t\terrors.countryState = __(\n\t\t\t'Please select a country / region',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t}\n\tif ( ! values.city.length ) {\n\t\terrors.city = __( 'Please add a city', 'woocommerce-admin' );\n\t}\n\tif ( ! values.postCode.length ) {\n\t\terrors.postCode = __( 'Please add a post code', 'woocommerce-admin' );\n\t}\n\n\treturn errors;\n}\n\n/**\n * Get all country and state combinations used for select dropdowns.\n *\n * @return {Object} Select options, { value: 'US:GA', label: 'United States - Georgia' }\n */\nexport function getCountryStateOptions() {\n\tconst countryStateOptions = countries.reduce( ( acc, country ) => {\n\t\tif ( ! country.states.length ) {\n\t\t\tacc.push( {\n\t\t\t\tkey: country.code,\n\t\t\t\tlabel: decodeEntities( country.name ),\n\t\t\t} );\n\n\t\t\treturn acc;\n\t\t}\n\n\t\tconst countryStates = country.states.map( ( state ) => {\n\t\t\treturn {\n\t\t\t\tkey: country.code + ':' + state.code,\n\t\t\t\tlabel:\n\t\t\t\t\tdecodeEntities( country.name ) +\n\t\t\t\t\t' — ' +\n\t\t\t\t\tdecodeEntities( state.name ),\n\t\t\t};\n\t\t} );\n\n\t\tacc.push( ...countryStates );\n\n\t\treturn acc;\n\t}, [] );\n\n\treturn countryStateOptions;\n}\n\n/**\n * Get the autofill countryState fields and set value from filtered options.\n *\n * @param {Array} options Array of filterable options.\n * @param {string} countryState The value of the countryState field.\n * @param {Function} setValue Set value of the countryState input.\n * @return {Object} React component.\n */\nexport function useGetCountryStateAutofill( options, countryState, setValue ) {\n\tconst [ autofillCountry, setAutofillCountry ] = useState( '' );\n\tconst [ autofillState, setAutofillState ] = useState( '' );\n\n\tuseEffect( () => {\n\t\tlet filteredOptions = [];\n\t\tconst countrySearch = new RegExp(\n\t\t\tescapeRegExp( autofillCountry ),\n\t\t\t'i'\n\t\t);\n\t\tif ( autofillState.length || autofillCountry.length ) {\n\t\t\tfilteredOptions = options.filter( ( option ) =>\n\t\t\t\tcountrySearch.test( option.label )\n\t\t\t);\n\t\t}\n\t\tif ( autofillCountry.length && autofillState.length ) {\n\t\t\tconst stateSearch = new RegExp(\n\t\t\t\tescapeRegExp( autofillState.replace( /\\s/g, '' ) ),\n\t\t\t\t'i'\n\t\t\t);\n\t\t\tfilteredOptions = filteredOptions.filter( ( option ) =>\n\t\t\t\tstateSearch.test(\n\t\t\t\t\toption.label.replace( '-', '' ).replace( /\\s/g, '' )\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif ( filteredOptions.length > 1 ) {\n\t\t\t\tlet countryKeyOptions = [];\n\t\t\t\tcountryKeyOptions = filteredOptions.filter( ( option ) =>\n\t\t\t\t\tcountrySearch.test( option.key )\n\t\t\t\t);\n\n\t\t\t\tif ( countryKeyOptions.length > 0 ) {\n\t\t\t\t\tfilteredOptions = countryKeyOptions;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( filteredOptions.length > 1 ) {\n\t\t\t\tlet stateKeyOptions = [];\n\t\t\t\tstateKeyOptions = filteredOptions.filter( ( option ) =>\n\t\t\t\t\tstateSearch.test( option.key )\n\t\t\t\t);\n\n\t\t\t\tif ( stateKeyOptions.length === 1 ) {\n\t\t\t\t\tfilteredOptions = stateKeyOptions;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tfilteredOptions.length === 1 &&\n\t\t\tcountryState !== filteredOptions[ 0 ].key\n\t\t) {\n\t\t\tsetValue( 'countryState', filteredOptions[ 0 ].key );\n\t\t}\n\t}, [ autofillCountry, autofillState ] );\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<input\n\t\t\t\tonChange={ ( event ) =>\n\t\t\t\t\tsetAutofillCountry( event.target.value )\n\t\t\t\t}\n\t\t\t\tvalue={ autofillCountry }\n\t\t\t\tname=\"country\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tclassName=\"woocommerce-select-control__autofill-input\"\n\t\t\t\ttabIndex=\"-1\"\n\t\t\t\tautoComplete=\"country\"\n\t\t\t/>\n\n\t\t\t<input\n\t\t\t\tonChange={ ( event ) => setAutofillState( event.target.value ) }\n\t\t\t\tvalue={ autofillState }\n\t\t\t\tname=\"state\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tclassName=\"woocommerce-select-control__autofill-input\"\n\t\t\t\ttabIndex=\"-1\"\n\t\t\t\tautoComplete=\"address-level1\"\n\t\t\t/>\n\t\t</Fragment>\n\t);\n}\n\n/**\n * Store address fields.\n *\n * @param {Object} props Props for input components.\n * @return {Object} -\n */\nexport function StoreAddress( props ) {\n\tconst { getInputProps, setValue } = props;\n\tconst countryStateOptions = useMemo( () => getCountryStateOptions(), [] );\n\tconst countryStateAutofill = useGetCountryStateAutofill(\n\t\tcountryStateOptions,\n\t\tgetInputProps( 'countryState' ).value,\n\t\tsetValue\n\t);\n\n\treturn (\n\t\t<div className=\"woocommerce-store-address-fields\">\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Address line 1', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"address-line1\"\n\t\t\t\t{ ...getInputProps( 'addressLine1' ) }\n\t\t\t/>\n\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Address line 2 (optional)', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"address-line2\"\n\t\t\t\t{ ...getInputProps( 'addressLine2' ) }\n\t\t\t/>\n\n\t\t\t<SelectControl\n\t\t\t\tlabel={ __( 'Country / Region', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\toptions={ countryStateOptions }\n\t\t\t\texcludeSelectedOptions={ false }\n\t\t\t\tshowAllOnFocus\n\t\t\t\tisSearchable\n\t\t\t\t{ ...getInputProps( 'countryState' ) }\n\t\t\t\tcontrolClassName={ getInputProps( 'countryState' ).className }\n\t\t\t>\n\t\t\t\t{ countryStateAutofill }\n\t\t\t</SelectControl>\n\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'City', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\t{ ...getInputProps( 'city' ) }\n\t\t\t\tautoComplete=\"address-level2\"\n\t\t\t/>\n\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Post code', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"postal-code\"\n\t\t\t\t{ ...getInputProps( 'postCode' ) }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * WooCommerce dependencies\n */\nimport { getSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Returns an in-app-purchase URL.\n *\n * @param {string} url\n * @param {Object} queryArgs\n * @return {string} url with in-app-purchase query parameters\n */\nexport const getInAppPurchaseUrl = ( url, queryArgs = {} ) => {\n\tconst { pathname, search } = window.location;\n\tconst connectNonce = getSetting( 'connectNonce', '' );\n\tqueryArgs = {\n\t\t'wccom-site': getSetting( 'siteUrl' ),\n\t\t// If the site is installed in a directory the directory must be included in the back param path.\n\t\t'wccom-back': pathname + search,\n\t\t'wccom-woo-version': getSetting( 'wcVersion' ),\n\t\t'wccom-connect-nonce': connectNonce,\n\t\t...queryArgs,\n\t}\n\n\treturn addQueryArgs( url, queryArgs );\n}\n","/**\n * External dependencies\n */\nimport { sanitize } from 'dompurify';\n\nexport const ALLOWED_TAGS = [ 'a', 'b', 'em', 'i', 'strong', 'p' ];\nexport const ALLOWED_ATTR = [ 'target', 'href', 'rel', 'name', 'download' ];\n\nexport default ( html ) => {\n\treturn {\n\t\t__html: sanitize( html, { ALLOWED_TAGS, ALLOWED_ATTR } ),\n\t};\n};\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, cloneElement, Fragment } from '@wordpress/element';\nimport { isEqual } from 'lodash';\nimport { compose } from '@wordpress/compose';\nimport classNames from 'classnames';\nimport {\n\tButton,\n\tCard,\n\tCardBody,\n\tCardHeader,\n\tModal,\n} from '@wordpress/components';\nimport { withDispatch } from '@wordpress/data';\nimport { Icon, check, chevronRight } from '@wordpress/icons';\n\n/**\n * WooCommerce dependencies\n */\nimport { H, List, EllipsisMenu } from '@woocommerce/components';\nimport { updateQueryString } from '@woocommerce/navigation';\nimport {\n\tPLUGINS_STORE_NAME,\n\tOPTIONS_STORE_NAME,\n\tONBOARDING_STORE_NAME,\n} from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport CartModal from 'dashboard/components/cart-modal';\nimport { getAllTasks } from './tasks';\nimport { recordEvent } from 'lib/tracks';\nimport withSelect from 'wc-api/with-select';\n\nclass TaskDashboard extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tisCartModalOpen: false,\n\t\t\tisWelcomeModalOpen: ! props.modalDismissed,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { incompleteTasks, updateOptions } = this.props;\n\t\tdocument.body.classList.add( 'woocommerce-onboarding' );\n\t\tdocument.body.classList.add( 'woocommerce-task-dashboard__body' );\n\n\t\tthis.recordTaskView();\n\t\tthis.recordTaskListView();\n\n\t\tif ( ! incompleteTasks.length ) {\n\t\t\tupdateOptions( {\n\t\t\t\twoocommerce_task_list_complete: 'yes',\n\t\t\t} );\n\t\t}\n\n\t\tthis.possiblyTrackCompletedTasks();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst {\n\t\t\tcompletedTaskKeys,\n\t\t\tincompleteTasks,\n\t\t\tquery,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\t\tconst {\n\t\t\tcompletedTaskKeys: prevCompletedTaskKeys,\n\t\t\tincompleteTasks: prevIncompleteTasks,\n\t\t\tquery: prevQuery,\n\t\t} = prevProps;\n\t\tconst { task: prevTask } = prevQuery;\n\t\tconst { task } = query;\n\n\t\tif ( prevTask !== task ) {\n\t\t\twindow.document.documentElement.scrollTop = 0;\n\t\t\tthis.recordTaskView();\n\t\t}\n\n\t\tif ( ! incompleteTasks.length && prevIncompleteTasks.length ) {\n\t\t\tupdateOptions( {\n\t\t\t\twoocommerce_task_list_complete: 'yes',\n\t\t\t} );\n\t\t}\n\n\t\tif ( ! isEqual( prevCompletedTaskKeys, completedTaskKeys ) ) {\n\t\t\tthis.possiblyTrackCompletedTasks();\n\t\t}\n\t}\n\n\tpossiblyTrackCompletedTasks() {\n\t\tconst {\n\t\t\tcompletedTaskKeys,\n\t\t\ttrackedCompletedTasks,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\n\t\tif ( ! isEqual( trackedCompletedTasks, completedTaskKeys ) ) {\n\t\t\tupdateOptions( {\n\t\t\t\twoocommerce_task_list_tracked_completed_tasks: completedTaskKeys,\n\t\t\t} );\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.body.classList.remove( 'woocommerce-onboarding' );\n\t\tdocument.body.classList.remove( 'woocommerce-task-dashboard__body' );\n\t}\n\n\tgetTasks() {\n\t\tconst {\n\t\t\tprofileItems,\n\t\t\tquery,\n\t\t\ttaskListPayments,\n\t\t\tinstalledPlugins,\n\t\t} = this.props;\n\n\t\treturn getAllTasks( {\n\t\t\tprofileItems,\n\t\t\ttaskListPayments,\n\t\t\tquery,\n\t\t\ttoggleCartModal: this.toggleCartModal.bind( this ),\n\t\t\tinstalledPlugins,\n\t\t} ).filter( ( task ) => task.visible );\n\t}\n\n\tgetPluginsInformation() {\n\t\tconst {\n\t\t\tisJetpackConnected,\n\t\t\tactivePlugins,\n\t\t\tinstalledPlugins,\n\t\t} = this.props;\n\t\treturn {\n\t\t\twcs_installed: installedPlugins.includes( 'woocommerce-services' ),\n\t\t\twcs_active: activePlugins.includes( 'woocommerce-services' ),\n\t\t\tjetpack_installed: installedPlugins.includes( 'jetpack' ),\n\t\t\tjetpack_active: activePlugins.includes( 'jetpack' ),\n\t\t\tjetpack_connected: isJetpackConnected,\n\t\t};\n\t}\n\n\trecordTaskView() {\n\t\tconst { task } = this.props.query;\n\t\t// eslint-disable-next-line @wordpress/no-unused-vars-before-return\n\t\tconst pluginsInformation = this.getPluginsInformation();\n\n\t\tif ( ! task ) {\n\t\t\treturn;\n\t\t}\n\n\t\trecordEvent( 'task_view', {\n\t\t\ttask_name: task,\n\t\t\t...pluginsInformation,\n\t\t} );\n\t}\n\n\trecordTaskListView() {\n\t\tif ( this.getCurrentTask() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { profileItems } = this.props;\n\t\tconst tasks = this.getTasks();\n\n\t\trecordEvent( 'tasklist_view', {\n\t\t\tnumber_tasks: tasks.length,\n\t\t\tstore_connected: profileItems.wccom_connected,\n\t\t} );\n\t}\n\n\tkeepTaskCard() {\n\t\trecordEvent( 'tasklist_completed', {\n\t\t\taction: 'keep_card',\n\t\t} );\n\n\t\tthis.props.updateOptions( {\n\t\t\twoocommerce_task_list_prompt_shown: true,\n\t\t} );\n\t}\n\n\thideTaskCard( action ) {\n\t\trecordEvent( 'tasklist_completed', {\n\t\t\taction,\n\t\t} );\n\t\tthis.props.updateOptions( {\n\t\t\twoocommerce_task_list_hidden: 'yes',\n\t\t\twoocommerce_task_list_prompt_shown: true,\n\t\t} );\n\t}\n\n\tgetCurrentTask() {\n\t\tconst { task } = this.props.query;\n\t\tconst currentTask = this.getTasks().find( ( s ) => s.key === task );\n\n\t\tif ( ! currentTask ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn currentTask;\n\t}\n\n\trenderMenu() {\n\t\treturn (\n\t\t\t<div className=\"woocommerce-card__menu woocommerce-card__header-item\">\n\t\t\t\t<EllipsisMenu\n\t\t\t\t\tlabel={ __( 'Task List Options', 'woocommerce-admin' ) }\n\t\t\t\t\trenderContent={ () => (\n\t\t\t\t\t\t<div className=\"woocommerce-task-card__section-controls\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tthis.hideTaskCard( 'remove_card' )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Hide this', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\ttoggleCartModal() {\n\t\tconst { isCartModalOpen } = this.state;\n\n\t\tif ( ! isCartModalOpen ) {\n\t\t\trecordEvent( 'tasklist_purchase_extensions' );\n\t\t}\n\n\t\tthis.setState( { isCartModalOpen: ! isCartModalOpen } );\n\t}\n\n\tcloseWelcomeModal() {\n\t\t// Prevent firing this event before the modal is seen.\n\t\tif (\n\t\t\tdocument.body.classList.contains( 'woocommerce-admin-is-loading' )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( { isWelcomeModalOpen: false } );\n\t\tthis.props.updateOptions( {\n\t\t\twoocommerce_task_list_welcome_modal_dismissed: true,\n\t\t} );\n\t}\n\n\trenderWelcomeModal() {\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\ttitle={\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\tfocusable=\"false\"\n\t\t\t\t\t\t\tclassName=\"woocommerce-task-dashboard__welcome-modal-icon\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t🚀\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\"Woo hoo - you're almost there!\",\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Fragment>\n\t\t\t\t}\n\t\t\t\tonRequestClose={ () => this.closeWelcomeModal() }\n\t\t\t\tclassName=\"woocommerce-task-dashboard__welcome-modal\"\n\t\t\t>\n\t\t\t\t<div className=\"woocommerce-task-dashboard__welcome-modal-wrapper\">\n\t\t\t\t\t<div className=\"woocommerce-task-dashboard__welcome-modal-message\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'Based on the information you provided we’ve prepared some final set up tasks for you to perform.',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'Once complete your store will be ready for launch - exciting!',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tonClick={ () => this.closeWelcomeModal() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Continue', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { query } = this.props;\n\t\tconst { isCartModalOpen, isWelcomeModalOpen } = this.state;\n\t\tconst currentTask = this.getCurrentTask();\n\t\tconst listTasks = this.getTasks().map( ( task ) => {\n\t\t\ttask.className = classNames(\n\t\t\t\ttask.completed ? 'is-complete' : null,\n\t\t\t\ttask.className\n\t\t\t);\n\t\t\ttask.before = (\n\t\t\t\t<div className=\"woocommerce-task__icon\">\n\t\t\t\t\t{ task.completed && <Icon icon={ check } /> }\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tif ( ! task.completed ) {\n\t\t\t\ttask.after = task.time ? (\n\t\t\t\t\t<span className=\"woocommerce-task-estimated-time\">\n\t\t\t\t\t\t{ task.time }\n\t\t\t\t\t</span>\n\t\t\t\t) : (\n\t\t\t\t\t<Icon icon={ chevronRight } />\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( ! task.onClick ) {\n\t\t\t\ttask.onClick = () => updateQueryString( { task: task.key } );\n\t\t\t}\n\n\t\t\treturn task;\n\t\t} );\n\t\tconst numCompleteTasks = listTasks.filter( ( task ) => task.completed )\n\t\t\t.length;\n\t\tconst progressBarClass = classNames(\n\t\t\t'woocommerce-task-card__progress-bar',\n\t\t\t{\n\t\t\t\tcompleted: listTasks.length === numCompleteTasks,\n\t\t\t}\n\t\t);\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"woocommerce-task-dashboard__container\">\n\t\t\t\t\t{ currentTask ? (\n\t\t\t\t\t\tcloneElement( currentTask.container, {\n\t\t\t\t\t\t\tquery,\n\t\t\t\t\t\t} )\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-task-card\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<progress\n\t\t\t\t\t\t\t\t\tclassName={ progressBarClass }\n\t\t\t\t\t\t\t\t\tmax={ listTasks.length }\n\t\t\t\t\t\t\t\t\tvalue={ numCompleteTasks }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<CardHeader>\n\t\t\t\t\t\t\t\t\t<H>\n\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t'Finish setup',\n\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</H>\n\t\t\t\t\t\t\t\t\t{ this.renderMenu() }\n\t\t\t\t\t\t\t\t</CardHeader>\n\t\t\t\t\t\t\t\t<CardBody>\n\t\t\t\t\t\t\t\t\t<List items={ listTasks } />\n\t\t\t\t\t\t\t\t</CardBody>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t{ isWelcomeModalOpen && this.renderWelcomeModal() }\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t{ isCartModalOpen && (\n\t\t\t\t\t<CartModal\n\t\t\t\t\t\tonClose={ () => this.toggleCartModal() }\n\t\t\t\t\t\tonClickPurchaseLater={ () => this.toggleCartModal() }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select, props ) => {\n\t\tconst { getProfileItems } = select( ONBOARDING_STORE_NAME );\n\t\tconst { getOption } = select( OPTIONS_STORE_NAME );\n\t\tconst {\n\t\t\tgetActivePlugins,\n\t\t\tgetInstalledPlugins,\n\t\t\tisJetpackConnected,\n\t\t} = select( PLUGINS_STORE_NAME );\n\t\tconst profileItems = getProfileItems();\n\n\t\tconst modalDismissed =\n\t\t\tgetOption( 'woocommerce_task_list_welcome_modal_dismissed' ) ||\n\t\t\tfalse;\n\t\tconst taskListPayments = getOption( 'woocommerce_task_list_payments' );\n\t\tconst trackedCompletedTasks =\n\t\t\tgetOption( 'woocommerce_task_list_tracked_completed_tasks' ) || [];\n\t\tconst payments = getOption( 'woocommerce_task_list_payments' );\n\n\t\tconst installedPlugins = getInstalledPlugins();\n\t\tconst tasks = getAllTasks( {\n\t\t\tprofileItems,\n\t\t\toptions: payments,\n\t\t\tquery: props.query,\n\t\t\tinstalledPlugins,\n\t\t} );\n\t\tconst completedTaskKeys = tasks\n\t\t\t.filter( ( task ) => task.completed )\n\t\t\t.map( ( task ) => task.key );\n\t\tconst incompleteTasks = tasks.filter(\n\t\t\t( task ) => task.visible && ! task.completed\n\t\t);\n\t\tconst activePlugins = getActivePlugins();\n\n\t\treturn {\n\t\t\tmodalDismissed,\n\t\t\tprofileItems,\n\t\t\ttaskListPayments,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tincompleteTasks,\n\t\t\ttrackedCompletedTasks,\n\t\t\tcompletedTaskKeys,\n\t\t\tactivePlugins,\n\t\t\tinstalledPlugins,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\treturn {\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( TaskDashboard );\n","/**\n * External dependencies\n */\n\nimport { __ } from '@wordpress/i18n';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * WooCommerce dependencies\n */\nimport { getAdminLink, getSetting } from '@woocommerce/wc-admin-settings';\nimport { updateQueryString } from '@woocommerce/navigation';\n\n/**\n * Internal dependencies\n */\nimport Appearance from './tasks/appearance';\nimport Connect from './tasks/connect';\nimport { getProductIdsForCart } from 'dashboard/utils';\nimport Products from './tasks/products';\nimport Shipping from './tasks/shipping';\nimport Tax from './tasks/tax';\nimport Payments from './tasks/payments';\n\nexport function getAllTasks( {\n\tprofileItems,\n\ttaskListPayments,\n\tquery,\n\ttoggleCartModal,\n\tinstalledPlugins,\n} ) {\n\tconst {\n\t\thasPhysicalProducts,\n\t\thasProducts,\n\t\tisAppearanceComplete,\n\t\tisTaxComplete,\n\t\tshippingZonesCount,\n\t} = getSetting( 'onboarding', {\n\t\thasPhysicalProducts: false,\n\t\thasProducts: false,\n\t\tisAppearanceComplete: false,\n\t\tisTaxComplete: false,\n\t\tshippingZonesCount: 0,\n\t} );\n\n\tconst productIds = getProductIdsForCart(\n\t\tprofileItems,\n\t\ttrue,\n\t\tinstalledPlugins\n\t);\n\tconst remainingProductIds = getProductIdsForCart(\n\t\tprofileItems,\n\t\tfalse,\n\t\tinstalledPlugins\n\t);\n\n\tconst paymentsCompleted = Boolean(\n\t\ttaskListPayments && taskListPayments.completed\n\t);\n\tconst paymentsSkipped = Boolean(\n\t\ttaskListPayments && taskListPayments.skipped\n\t);\n\n\tconst tasks = [\n\t\t{\n\t\t\tkey: 'store_details',\n\t\t\ttitle: __( 'Store details', 'woocommerce-admin' ),\n\t\t\tcontainer: null,\n\t\t\tonClick: () => {\n\t\t\t\twindow.location = getAdminLink(\n\t\t\t\t\t'admin.php?page=wc-admin&reset_profiler=1'\n\t\t\t\t);\n\t\t\t},\n\t\t\tcompleted: profileItems.completed,\n\t\t\tvisible: true,\n\t\t\ttime: __( '4 minutes', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'purchase',\n\t\t\ttitle: __( 'Purchase & install extensions', 'woocommerce-admin' ),\n\t\t\tcontainer: null,\n\t\t\tonClick: () =>\n\t\t\t\tremainingProductIds.length ? toggleCartModal() : null,\n\t\t\tvisible: productIds.length,\n\t\t\tcompleted: productIds.length && ! remainingProductIds.length,\n\t\t\ttime: __( '2 minutes', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'connect',\n\t\t\ttitle: __(\n\t\t\t\t'Connect your store to WooCommerce.com',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcontainer: <Connect query={ query } />,\n\t\t\tvisible:\n\t\t\t\tprofileItems.items_purchased && ! profileItems.wccom_connected,\n\t\t\tcompleted: profileItems.wccom_connected,\n\t\t\ttime: __( '1 minute', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'products',\n\t\t\ttitle: __( 'Add my products', 'woocommerce-admin' ),\n\t\t\tcontainer: <Products />,\n\t\t\tcompleted: hasProducts,\n\t\t\tvisible: true,\n\t\t\ttime: __( '1 minute per product', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'appearance',\n\t\t\ttitle: __( 'Personalize my store', 'woocommerce-admin' ),\n\t\t\tcontainer: <Appearance />,\n\t\t\tcompleted: isAppearanceComplete,\n\t\t\tvisible: true,\n\t\t\ttime: __( '2 minutes', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'shipping',\n\t\t\ttitle: __( 'Set up shipping', 'woocommerce-admin' ),\n\t\t\tcontainer: <Shipping />,\n\t\t\tcompleted: shippingZonesCount > 0,\n\t\t\tvisible:\n\t\t\t\t( profileItems.product_types &&\n\t\t\t\t\tprofileItems.product_types.includes( 'physical' ) ) ||\n\t\t\t\thasPhysicalProducts,\n\t\t\ttime: __( '1 minute', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'tax',\n\t\t\ttitle: __( 'Set up tax', 'woocommerce-admin' ),\n\t\t\tcontainer: <Tax />,\n\t\t\tcompleted: isTaxComplete,\n\t\t\tvisible: true,\n\t\t\ttime: __( '1 minute', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'payments',\n\t\t\ttitle: __( 'Set up payments', 'woocommerce-admin' ),\n\t\t\tcontainer: <Payments />,\n\t\t\tcompleted: paymentsCompleted || paymentsSkipped,\n\t\t\tonClick: () => {\n\t\t\t\tif ( paymentsCompleted || paymentsSkipped ) {\n\t\t\t\t\twindow.location = getAdminLink(\n\t\t\t\t\t\t'admin.php?page=wc-settings&tab=checkout'\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tupdateQueryString( { task: 'payments' } );\n\t\t\t},\n\t\t\tvisible: true,\n\t\t\ttime: __( '2 minutes', 'woocommerce-admin' ),\n\t\t},\n\t];\n\n\treturn applyFilters(\n\t\t'woocommerce_admin_onboarding_task_list',\n\t\ttasks,\n\t\tquery\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { filter } from 'lodash';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport {\n\tCard,\n\tStepper,\n\tTextControl,\n\tImageUpload,\n} from '@woocommerce/components';\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport { getSetting, setSetting } from '@woocommerce/wc-admin-settings';\nimport { OPTIONS_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport { queueRecordEvent, recordEvent } from 'lib/tracks';\nimport { WC_ADMIN_NAMESPACE } from 'wc-api/constants';\n\nclass Appearance extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tconst { hasHomepage, hasProducts } = getSetting( 'onboarding', {} );\n\n\t\tthis.stepVisibility = {\n\t\t\thomepage: ! hasHomepage,\n\t\t\timport: ! hasProducts,\n\t\t};\n\n\t\tthis.state = {\n\t\t\tisDirty: false,\n\t\t\tisPending: false,\n\t\t\tlogo: null,\n\t\t\tstepIndex: 0,\n\t\t\tisUpdatingLogo: false,\n\t\t\tisUpdatingNotice: false,\n\t\t\tstoreNoticeText: props.demoStoreNotice || '',\n\t\t};\n\n\t\tthis.completeStep = this.completeStep.bind( this );\n\t\tthis.createHomepage = this.createHomepage.bind( this );\n\t\tthis.importProducts = this.importProducts.bind( this );\n\t\tthis.updateLogo = this.updateLogo.bind( this );\n\t\tthis.updateNotice = this.updateNotice.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { themeMods } = getSetting( 'onboarding', {} );\n\n\t\tif ( themeMods.custom_logo ) {\n\t\t\t/* eslint-disable react/no-did-mount-set-state */\n\t\t\tthis.setState( { logo: { id: themeMods.custom_logo } } );\n\t\t\t/* eslint-enable react/no-did-mount-set-state */\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { isPending, logo } = this.state;\n\t\tconst { demoStoreNotice } = this.props;\n\n\t\tif ( logo && ! logo.url && ! isPending ) {\n\t\t\t/* eslint-disable react/no-did-update-set-state */\n\t\t\tthis.setState( { isPending: true } );\n\t\t\twp.media\n\t\t\t\t.attachment( logo.id )\n\t\t\t\t.fetch()\n\t\t\t\t.then( () => {\n\t\t\t\t\tconst logoUrl = wp.media.attachment( logo.id ).get( 'url' );\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tisPending: false,\n\t\t\t\t\t\tlogo: { id: logo.id, url: logoUrl },\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t/* eslint-enable react/no-did-update-set-state */\n\t\t}\n\n\t\tif (\n\t\t\tdemoStoreNotice &&\n\t\t\tprevProps.demoStoreNotice !== demoStoreNotice\n\t\t) {\n\t\t\t/* eslint-disable react/no-did-update-set-state */\n\t\t\tthis.setState( {\n\t\t\t\tstoreNoticeText: demoStoreNotice,\n\t\t\t} );\n\t\t\t/* eslint-enable react/no-did-update-set-state */\n\t\t}\n\t}\n\n\tcompleteStep() {\n\t\tconst { stepIndex } = this.state;\n\t\tconst nextStep = this.getSteps()[ stepIndex + 1 ];\n\n\t\tif ( nextStep ) {\n\t\t\tthis.setState( { stepIndex: stepIndex + 1 } );\n\t\t} else {\n\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t}\n\t}\n\n\timportProducts() {\n\t\tconst { createNotice } = this.props;\n\t\tthis.setState( { isPending: true } );\n\n\t\trecordEvent( 'tasklist_appearance_import_demo', {} );\n\n\t\tapiFetch( {\n\t\t\tpath: `${ WC_ADMIN_NAMESPACE }/onboarding/tasks/import_sample_products`,\n\t\t\tmethod: 'POST',\n\t\t} )\n\t\t\t.then( ( result ) => {\n\t\t\t\tif ( result.failed && result.failed.length ) {\n\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'There was an error importing some of the sample products.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t'success',\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'All sample products have been imported.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\tsetSetting( 'onboarding', {\n\t\t\t\t\t\t...getSetting( 'onboarding', {} ),\n\t\t\t\t\t\thasProducts: true,\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t\tthis.completeStep();\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\tcreateNotice( 'error', error.message );\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t} );\n\t}\n\n\tcreateHomepage() {\n\t\tconst { createNotice } = this.props;\n\t\tthis.setState( { isPending: true } );\n\n\t\trecordEvent( 'tasklist_appearance_create_homepage', {\n\t\t\tcreate_homepage: true,\n\t\t} );\n\n\t\tapiFetch( {\n\t\t\tpath: '/wc-admin/onboarding/tasks/create_homepage',\n\t\t\tmethod: 'POST',\n\t\t} )\n\t\t\t.then( ( response ) => {\n\t\t\t\tcreateNotice( response.status, response.message, {\n\t\t\t\t\tactions: response.edit_post_link\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t\t\t\t'Customize',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\tqueueRecordEvent(\n\t\t\t\t\t\t\t\t\t\t\t'tasklist_appearance_customize_homepage',\n\t\t\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\twindow.location = `${ response.edit_post_link }&wc_onboarding_active_task=homepage`;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: null,\n\t\t\t\t} );\n\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t\tthis.completeStep();\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\tcreateNotice( 'error', error.message );\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t} );\n\t}\n\n\tasync updateLogo() {\n\t\tconst { updateOptions, createNotice } = this.props;\n\t\tconst { logo } = this.state;\n\t\tconst { stylesheet, themeMods } = getSetting( 'onboarding', {} );\n\t\tconst updatedThemeMods = {\n\t\t\t...themeMods,\n\t\t\tcustom_logo: logo ? logo.id : null,\n\t\t};\n\n\t\trecordEvent( 'tasklist_appearance_upload_logo' );\n\n\t\tsetSetting( 'onboarding', {\n\t\t\t...getSetting( 'onboarding', {} ),\n\t\t\tthemeMods: updatedThemeMods,\n\t\t} );\n\n\t\tthis.setState( { isUpdatingLogo: true } );\n\t\tconst update = await updateOptions( {\n\t\t\t[ `theme_mods_${ stylesheet }` ]: updatedThemeMods,\n\t\t} );\n\n\t\tif ( update.success ) {\n\t\t\tthis.setState( { isUpdatingLogo: false } );\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__( 'Store logo updated sucessfully.', 'woocommerce-admin' )\n\t\t\t);\n\t\t\tthis.completeStep();\n\t\t} else {\n\t\t\tcreateNotice( 'error', update.message );\n\t\t}\n\t}\n\n\tasync updateNotice() {\n\t\tconst { updateOptions, createNotice } = this.props;\n\t\tconst { storeNoticeText } = this.state;\n\n\t\trecordEvent( 'tasklist_appearance_set_store_notice', {\n\t\t\tadded_text: Boolean( storeNoticeText.length ),\n\t\t} );\n\n\t\tsetSetting( 'onboarding', {\n\t\t\t...getSetting( 'onboarding', {} ),\n\t\t\tisAppearanceComplete: true,\n\t\t} );\n\n\t\tthis.setState( { isUpdatingNotice: true } );\n\t\tconst update = await updateOptions( {\n\t\t\twoocommerce_task_list_appearance_complete: true,\n\t\t\twoocommerce_demo_store: storeNoticeText.length ? 'yes' : 'no',\n\t\t\twoocommerce_demo_store_notice: storeNoticeText,\n\t\t} );\n\n\t\tif ( update.success ) {\n\t\t\tthis.setState( { isUpdatingNotice: false } );\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t\"🎨 Your store is looking great! Don't forget to continue personalizing it.\",\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\tthis.completeStep();\n\t\t} else {\n\t\t\tcreateNotice( 'error', update.message );\n\t\t}\n\t}\n\n\tgetSteps() {\n\t\tconst {\n\t\t\tisDirty,\n\t\t\tisPending,\n\t\t\tlogo,\n\t\t\tstoreNoticeText,\n\t\t\tisUpdatingLogo,\n\t\t} = this.state;\n\n\t\tconst steps = [\n\t\t\t{\n\t\t\t\tkey: 'import',\n\t\t\t\tlabel: __( 'Import sample products', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'We’ll add some products that will make it easier to see what your store looks like',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.importProducts }\n\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Import products', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={ () => this.completeStep() }>\n\t\t\t\t\t\t\t{ __( 'Skip', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: this.stepVisibility.import,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'homepage',\n\t\t\t\tlabel: __( 'Create a custom homepage', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Create a new homepage and customize it to suit your needs',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\tonClick={ this.createHomepage }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create homepage', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t'tasklist_appearance_create_homepage',\n\t\t\t\t\t\t\t\t\t{ create_homepage: false }\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Skip', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: this.stepVisibility.homepage,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'logo',\n\t\t\t\tlabel: __( 'Upload a logo', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Ensure your store is on-brand by adding your logo',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: isPending ? null : (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<ImageUpload\n\t\t\t\t\t\t\timage={ logo }\n\t\t\t\t\t\t\tonChange={ ( image ) =>\n\t\t\t\t\t\t\t\tthis.setState( { isDirty: true, logo: image } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={ ! logo && ! isDirty }\n\t\t\t\t\t\t\tonClick={ this.updateLogo }\n\t\t\t\t\t\t\tisBusy={ isUpdatingLogo }\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Proceed', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\t\tonClick={ () => this.completeStep() }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Skip', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'notice',\n\t\t\t\tlabel: __( 'Set a store notice', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Optionally display a prominent notice across all pages of your store',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t'Store notice text',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tplaceholder={ __(\n\t\t\t\t\t\t\t\t'Store notice text',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tvalue={ storeNoticeText }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tthis.setState( { storeNoticeText: value } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button onClick={ this.updateNotice } isPrimary>\n\t\t\t\t\t\t\t{ __( 'Complete task', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t];\n\n\t\treturn filter( steps, ( step ) => step.visible );\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tisPending,\n\t\t\tstepIndex,\n\t\t\tisUpdatingLogo,\n\t\t\tisUpdatingNotice,\n\t\t} = this.state;\n\t\tconst currentStep = this.getSteps()[ stepIndex ].key;\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-appearance\">\n\t\t\t\t<Card className=\"is-narrow\">\n\t\t\t\t\t<Stepper\n\t\t\t\t\t\tisPending={\n\t\t\t\t\t\t\tisUpdatingNotice || isUpdatingLogo || isPending\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisVertical\n\t\t\t\t\t\tcurrentStep={ currentStep }\n\t\t\t\t\t\tsteps={ this.getSteps() }\n\t\t\t\t\t/>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getOption } = select( OPTIONS_STORE_NAME );\n\n\t\treturn {\n\t\t\tdemoStoreNotice: getOption( 'woocommerce_demo_store_notice' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( Appearance );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport apiFetch from '@wordpress/api-fetch';\nimport { withDispatch } from '@wordpress/data';\nimport { omit } from 'lodash';\n\n/**\n * WooCommerce dependencies\n */\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport { ONBOARDING_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport { WC_ADMIN_NAMESPACE } from 'wc-api/constants';\nimport withSelect from 'wc-api/with-select';\n\nclass Connect extends Component {\n\tcomponentDidMount() {\n\t\tdocument.body.classList.add( 'woocommerce-admin-is-loading' );\n\t\tconst { query } = this.props;\n\n\t\tif ( query.deny === '1' ) {\n\t\t\tthis.errorMessage(\n\t\t\t\t__(\n\t\t\t\t\t'You must click approve to install your extensions and connect to WooCommerce.com.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! query[ 'wccom-connected' ] || ! query.request_token ) {\n\t\t\tthis.request();\n\t\t\treturn;\n\t\t}\n\t\tthis.finish();\n\t}\n\n\tbaseQuery() {\n\t\tconst { query } = this.props;\n\t\tconst baseQuery = omit( { ...query, page: 'wc-admin' }, [\n\t\t\t'task',\n\t\t\t'wccom-connected',\n\t\t\t'request_token',\n\t\t\t'deny',\n\t\t] );\n\t\treturn getNewPath( {}, '/', baseQuery );\n\t}\n\n\terrorMessage(\n\t\tmessage = __(\n\t\t\t'There was an error connecting to WooCommerce.com. Please try again.',\n\t\t\t'woocommerce-admin'\n\t\t)\n\t) {\n\t\tdocument.body.classList.remove( 'woocommerce-admin-is-loading' );\n\t\tgetHistory().push( this.baseQuery() );\n\t\tthis.props.createNotice( 'error', message );\n\t}\n\n\tasync request() {\n\t\ttry {\n\t\t\tconst connectResponse = await apiFetch( {\n\t\t\t\tpath: `${ WC_ADMIN_NAMESPACE }/plugins/request-wccom-connect`,\n\t\t\t\tmethod: 'POST',\n\t\t\t} );\n\t\t\tif ( connectResponse && connectResponse.connectAction ) {\n\t\t\t\twindow.location = connectResponse.connectAction;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthrow new Error();\n\t\t} catch ( err ) {\n\t\t\tthis.errorMessage();\n\t\t}\n\t}\n\n\tasync finish() {\n\t\tconst { query } = this.props;\n\t\ttry {\n\t\t\tconst connectResponse = await apiFetch( {\n\t\t\t\tpath: `${ WC_ADMIN_NAMESPACE }/plugins/finish-wccom-connect`,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\trequest_token: query.request_token,\n\t\t\t\t},\n\t\t\t} );\n\t\t\tif ( connectResponse && connectResponse.success ) {\n\t\t\t\tawait this.props.updateProfileItems( {\n\t\t\t\t\twccom_connected: true,\n\t\t\t\t} );\n\t\t\t\tif ( ! this.props.isProfileItemsError ) {\n\t\t\t\t\tthis.props.createNotice(\n\t\t\t\t\t\t'success',\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Store connected to WooCommerce.com and extensions are being installed.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\t// @todo Show a notice for when extensions are correctly installed.\n\n\t\t\t\t\tdocument.body.classList.remove(\n\t\t\t\t\t\t'woocommerce-admin-is-loading'\n\t\t\t\t\t);\n\t\t\t\t\tgetHistory().push( this.baseQuery() );\n\t\t\t\t} else {\n\t\t\t\t\tthis.errorMessage();\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthrow new Error();\n\t\t} catch ( err ) {\n\t\t\tthis.errorMessage();\n\t\t}\n\t}\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getOnboardingError } = select( ONBOARDING_STORE_NAME );\n\n\t\tconst isProfileItemsError = Boolean( getOnboardingError( 'updateProfileItems' ) );\n\n\t\treturn { isProfileItemsError };\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateProfileItems } = dispatch( ONBOARDING_STORE_NAME );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateProfileItems,\n\t\t};\n\t} )\n)( Connect );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Form, H, TextControl } from '@woocommerce/components';\nimport { OPTIONS_STORE_NAME } from '@woocommerce/data';\n\nclass PayFast extends Component {\n\tgetInitialConfigValues = () => {\n\t\treturn {\n\t\t\taccount_name: '',\n\t\t\taccount_number: '',\n\t\t\tbank_name: '',\n\t\t\tsort_code: '',\n\t\t\tiban: '',\n\t\t\tbic: '',\n\t\t};\n\t};\n\n\tvalidate = ( values ) => {\n\t\tconst errors = {};\n\n\t\tif ( ! values.account_number && ! values.iban ) {\n\t\t\terrors.account_number = errors.iban = __(\n\t\t\t\t'Please enter an account number or IBAN',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\treturn errors;\n\t};\n\n\tupdateSettings = async ( values ) => {\n\t\tconst { updateOptions, createNotice, markConfigured } = this.props;\n\n\t\tconst update = await updateOptions( {\n\t\t\twoocommerce_bacs_settings: {\n\t\t\t\tenabled: 'yes',\n\t\t\t},\n\t\t\twoocommerce_bacs_accounts: [ values ],\n\t\t} );\n\n\t\tif ( update.success ) {\n\t\t\tmarkConfigured( 'bacs' );\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t'Direct bank transfer details added successfully',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'error',\n\t\t\t\t__(\n\t\t\t\t\t'There was a problem saving your payment setings',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { isOptionsRequesting } = this.props;\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialConfigValues() }\n\t\t\t\tonSubmitCallback={ this.updateSettings }\n\t\t\t\tvalidate={ this.validate }\n\t\t\t>\n\t\t\t\t{ ( { getInputProps, handleSubmit } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<H>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Add your bank details',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</H>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'These details are required to receive payments via bank transfer',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment-method__fields\">\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Account name',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t{ ...getInputProps( 'account_name' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Account number',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t{ ...getInputProps( 'account_number' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Bank name',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t{ ...getInputProps( 'bank_name' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Sort code',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t{ ...getInputProps( 'sort_code' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={ __( 'IBAN', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t{ ...getInputProps( 'iban' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t'BIC / Swift',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t{ ...getInputProps( 'bic' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tisBusy={ isOptionsRequesting }\n\t\t\t\t\t\t\t\tonClick={ handleSubmit }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Save', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Form>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { isOptionsUpdating } = select( OPTIONS_STORE_NAME );\n\t\tconst isOptionsRequesting = isOptionsUpdating();\n\n\t\treturn {\n\t\t\tisOptionsRequesting,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( PayFast );\n","export default () => (\n\t<svg\n\t\twidth=\"96\"\n\t\theight=\"32\"\n\t\tviewBox=\"0 0 96 32\"\n\t\tfill=\"none\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t>\n\t\t<rect width=\"32\" height=\"32\" rx=\"16\" fill=\"#8E9196\" />\n\t\t<mask\n\t\t\tid=\"bacs0\"\n\t\t\tmask-type=\"alpha\"\n\t\t\tmaskUnits=\"userSpaceOnUse\"\n\t\t\tx=\"8\"\n\t\t\ty=\"8\"\n\t\t\twidth=\"16\"\n\t\t\theight=\"16\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M8.875 12.25L16 8.5L23.125 12.25V13.75H8.875V12.25ZM16 10.195L19.9075 12.25H12.0925L16 10.195ZM10.75 15.25H12.25V20.5H10.75V15.25ZM15.25 20.5V15.25H16.75V20.5H15.25ZM23.125 23.5V22H8.875V23.5H23.125ZM19.75 15.25H21.25V20.5H19.75V15.25Z\"\n\t\t\t\tfill=\"white\"\n\t\t\t/>\n\t\t</mask>\n\t\t<g mask=\"url(#bacs0)\">\n\t\t\t<rect x=\"7\" y=\"7\" width=\"18\" height=\"18\" fill=\"white\" />\n\t\t</g>\n\t\t<mask\n\t\t\tid=\"bacs1\"\n\t\t\tmask-type=\"alpha\"\n\t\t\tmaskUnits=\"userSpaceOnUse\"\n\t\t\tx=\"39\"\n\t\t\ty=\"10\"\n\t\t\twidth=\"18\"\n\t\t\theight=\"12\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M39 17L53.17 17L49.59 20.59L51 22L57 16L51 10L49.59 11.41L53.17 15L39 15L39 17Z\"\n\t\t\t\tfill=\"white\"\n\t\t\t/>\n\t\t</mask>\n\t\t<g mask=\"url(#bacs1)\">\n\t\t\t<rect\n\t\t\t\tx=\"60\"\n\t\t\t\ty=\"28\"\n\t\t\t\twidth=\"24\"\n\t\t\t\theight=\"24\"\n\t\t\t\ttransform=\"rotate(-180 60 28)\"\n\t\t\t\tfill=\"#8E9196\"\n\t\t\t/>\n\t\t</g>\n\t\t<rect x=\"64\" width=\"32\" height=\"32\" rx=\"16\" fill=\"#8E9196\" />\n\t\t<mask\n\t\t\tid=\"bacs2\"\n\t\t\tmask-type=\"alpha\"\n\t\t\tmaskUnits=\"userSpaceOnUse\"\n\t\t\tx=\"72\"\n\t\t\ty=\"8\"\n\t\t\twidth=\"16\"\n\t\t\theight=\"16\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M72.875 12.25L80 8.5L87.125 12.25V13.75H72.875V12.25ZM80 10.195L83.9075 12.25H76.0925L80 10.195ZM74.75 15.25H76.25V20.5H74.75V15.25ZM79.25 20.5V15.25H80.75V20.5H79.25ZM87.125 23.5V22H72.875V23.5H87.125ZM83.75 15.25H85.25V20.5H83.75V15.25Z\"\n\t\t\t\tfill=\"white\"\n\t\t\t/>\n\t\t</mask>\n\t\t<g mask=\"url(#bacs2)\">\n\t\t\t<rect x=\"71\" y=\"7\" width=\"18\" height=\"18\" fill=\"white\" />\n\t\t</g>\n\t</svg>\n);\n","export default () => (\n\t<svg\n\t\twidth=\"96\"\n\t\theight=\"32\"\n\t\tviewBox=\"0 0 96 32\"\n\t\tfill=\"none\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t>\n\t\t<rect width=\"32\" height=\"32\" rx=\"16\" fill=\"#8E9196\" />\n\t\t<mask\n\t\t\tid=\"cod-mask-0\"\n\t\t\tmask-type=\"alpha\"\n\t\t\tmaskUnits=\"userSpaceOnUse\"\n\t\t\tx=\"7\"\n\t\t\ty=\"10\"\n\t\t\twidth=\"18\"\n\t\t\theight=\"12\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M22 13H19.75V10H9.25C8.425 10 7.75 10.675 7.75 11.5V19.75H9.25C9.25 20.995 10.255 22 11.5 22C12.745 22 13.75 20.995 13.75 19.75H18.25C18.25 20.995 19.255 22 20.5 22C21.745 22 22.75 20.995 22.75 19.75H24.25V16L22 13ZM21.625 14.125L23.095 16H19.75V14.125H21.625ZM10.75 19.75C10.75 20.1625 11.0875 20.5 11.5 20.5C11.9125 20.5 12.25 20.1625 12.25 19.75C12.25 19.3375 11.9125 19 11.5 19C11.0875 19 10.75 19.3375 10.75 19.75ZM13.165 18.25C12.7525 17.7925 12.1675 17.5 11.5 17.5C10.8325 17.5 10.2475 17.7925 9.835 18.25H9.25V11.5H18.25V18.25H13.165ZM19.75 19.75C19.75 20.1625 20.0875 20.5 20.5 20.5C20.9125 20.5 21.25 20.1625 21.25 19.75C21.25 19.3375 20.9125 19 20.5 19C20.0875 19 19.75 19.3375 19.75 19.75Z\"\n\t\t\t\tfill=\"white\"\n\t\t\t/>\n\t\t</mask>\n\t\t<g mask=\"url(#cod-mask-0)\">\n\t\t\t<rect x=\"7\" y=\"7\" width=\"18\" height=\"18\" fill=\"white\" />\n\t\t</g>\n\t\t<mask\n\t\t\tid=\"cod-mask-1\"\n\t\t\tmask-type=\"alpha\"\n\t\t\tmaskUnits=\"userSpaceOnUse\"\n\t\t\tx=\"39\"\n\t\t\ty=\"10\"\n\t\t\twidth=\"18\"\n\t\t\theight=\"12\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M39 17L53.17 17L49.59 20.59L51 22L57 16L51 10L49.59 11.41L53.17 15L39 15L39 17Z\"\n\t\t\t\tfill=\"white\"\n\t\t\t/>\n\t\t</mask>\n\t\t<g mask=\"url(#cod-mask-1)\">\n\t\t\t<rect\n\t\t\t\tx=\"60\"\n\t\t\t\ty=\"28\"\n\t\t\t\twidth=\"24\"\n\t\t\t\theight=\"24\"\n\t\t\t\ttransform=\"rotate(-180 60 28)\"\n\t\t\t\tfill=\"#8E9196\"\n\t\t\t/>\n\t\t</g>\n\t\t<rect x=\"64\" width=\"32\" height=\"32\" rx=\"16\" fill=\"#8E9196\" />\n\t\t<mask\n\t\t\tid=\"cod-mask-2\"\n\t\t\tmask-type=\"alpha\"\n\t\t\tmaskUnits=\"userSpaceOnUse\"\n\t\t\tx=\"76\"\n\t\t\ty=\"9\"\n\t\t\twidth=\"8\"\n\t\t\theight=\"14\"\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M80.2926 15.175C78.5901 14.7325 78.0426 14.275 78.0426 13.5625C78.0426 12.745 78.8001 12.175 80.0676 12.175C81.4026 12.175 81.8976 12.8125 81.9426 13.75H83.6001C83.5476 12.46 82.7601 11.275 81.1926 10.8925V9.25H78.9426V10.87C77.4876 11.185 76.3176 12.13 76.3176 13.5775C76.3176 15.31 77.7501 16.1725 79.8426 16.675C81.7176 17.125 82.0926 17.785 82.0926 18.4825C82.0926 19 81.7251 19.825 80.0676 19.825C78.5226 19.825 77.9151 19.135 77.8326 18.25H76.1826C76.2726 19.8925 77.5026 20.815 78.9426 21.1225V22.75H81.1926V21.1375C82.6551 20.86 83.8176 20.0125 83.8176 18.475C83.8176 16.345 81.9951 15.6175 80.2926 15.175Z\"\n\t\t\t\tfill=\"white\"\n\t\t\t/>\n\t\t</mask>\n\t\t<g mask=\"url(#cod-mask-2)\">\n\t\t\t<rect x=\"71\" y=\"7\" width=\"18\" height=\"18\" fill=\"white\" />\n\t\t</g>\n\t</svg>\n);\n","export default () => (\n\t<svg\n\t\twidth=\"100\"\n\t\theight=\"64\"\n\t\tviewBox=\"-10 0 120 64\"\n\t\tfill=\"none\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M9.78073 0.5H91.1787C96.3299 0.5 100.5 4.77335 100.5 10.0522V41.8929C100.5 47.1717 96.3299 51.4451 91.1787 51.4451H61.9883L65.9948 61.5L48.3742 51.4451H9.82161C4.67036 51.4451 0.500298 47.1717 0.500298 41.8929V10.0522C0.459415 4.81524 4.62947 0.5 9.78073 0.5Z\"\n\t\t\tfill=\"#7F54B3\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M5.48791 9.1725C6.06028 8.37648 6.91882 7.95752 8.06354 7.87373C10.1486 7.70615 11.3342 8.71165 11.6204 10.8902C12.8877 19.6464 14.2778 27.0619 15.7495 33.1368L24.7029 15.6663C25.5206 14.0743 26.5426 13.2364 27.7691 13.1526C29.568 13.0269 30.6718 14.2 31.1215 16.6718C32.1436 22.2439 33.4519 26.9781 35.0054 31.0001C36.0684 20.3586 37.8672 12.6917 40.402 7.95753C41.0152 6.78445 41.9146 6.19791 43.1002 6.11412C44.0405 6.03033 44.8991 6.3236 45.6759 6.95203C46.4526 7.58047 46.8615 8.37648 46.9432 9.34008C46.9841 10.0942 46.8615 10.7226 46.5344 11.3511C44.94 14.3676 43.6317 19.4369 42.5688 26.4754C41.5467 33.3044 41.1787 38.6251 41.424 42.4376C41.5058 43.485 41.3423 44.4067 40.9334 45.2027C40.4428 46.1244 39.707 46.6272 38.7666 46.711C37.7037 46.7948 36.5998 46.292 35.5369 45.1608C31.7348 41.1807 28.7094 35.2316 26.5018 27.3133C23.8444 32.6759 21.882 36.6979 20.6146 39.3792C18.2025 44.1134 16.1584 46.5434 14.4413 46.6691C13.3374 46.7529 12.3971 45.7893 11.5795 43.7783C9.49445 38.2899 7.24589 27.6904 4.83379 11.9795C4.71114 10.8902 4.91555 9.92662 5.48791 9.1725Z\"\n\t\t\tfill=\"white\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M93.3864 15.7499C91.9146 13.1105 89.7478 11.5185 86.8451 10.89C86.0683 10.7225 85.3324 10.6387 84.6374 10.6387C80.7127 10.6387 77.5238 12.7335 75.0299 16.923C72.904 20.4841 71.8411 24.4223 71.8411 28.7376C71.8411 31.9635 72.4952 34.7286 73.8034 37.0329C75.2752 39.6723 77.442 41.2644 80.3447 41.8928C81.1215 42.0604 81.8574 42.1442 82.5524 42.1442C86.518 42.1442 89.7069 40.0494 92.1599 35.8598C94.2858 32.2568 95.3488 28.3186 95.3488 24.0034C95.3488 20.7355 94.6946 18.0123 93.3864 15.7499ZM88.2351 27.355C87.6628 30.1201 86.6407 32.173 85.128 33.5556C83.9424 34.6449 82.8386 35.1057 81.8165 34.8962C80.8353 34.6868 80.0177 33.8069 79.4044 32.173C78.9138 30.8742 78.6685 29.5755 78.6685 28.3605C78.6685 27.3131 78.7503 26.2657 78.9547 25.3021C79.3226 23.5844 80.0177 21.9086 81.1215 20.3166C82.4706 18.2637 83.9015 17.4258 85.3733 17.719C86.3545 17.9285 87.1722 18.8083 87.7854 20.4422C88.276 21.741 88.5213 23.0398 88.5213 24.2547C88.5213 25.344 88.3987 26.3914 88.2351 27.355Z\"\n\t\t\tfill=\"white\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M67.7528 15.7499C66.281 13.1105 64.0734 11.5185 61.2116 10.89C60.4348 10.7225 59.6989 10.6387 59.0039 10.6387C55.0791 10.6387 51.8903 12.7335 49.3964 16.923C47.2705 20.4841 46.2075 24.4223 46.2075 28.7376C46.2075 31.9635 46.8616 34.7286 48.1699 37.0329C49.6417 39.6723 51.8085 41.2644 54.7112 41.8928C55.488 42.0604 56.2238 42.1442 56.9189 42.1442C60.8845 42.1442 64.0734 40.0494 66.5263 35.8598C68.6523 32.2568 69.7152 28.3186 69.7152 24.0034C69.7152 20.7355 69.0611 18.0123 67.7528 15.7499ZM62.6016 27.355C62.0292 30.1201 61.0071 32.173 59.4945 33.5556C58.3089 34.6449 57.205 35.1057 56.183 34.8962C55.2018 34.6868 54.3841 33.8069 53.7709 32.173C53.2803 30.8742 53.035 29.5755 53.035 28.3605C53.035 27.3131 53.1167 26.2657 53.3212 25.3021C53.6891 23.5844 54.3841 21.9086 55.4879 20.3166C56.8371 18.2637 58.268 17.4258 59.7398 17.719C60.721 17.9285 61.5386 18.8083 62.1519 20.4422C62.6425 21.741 62.8878 23.0398 62.8878 24.2547C62.8878 25.344 62.806 26.3914 62.6016 27.355Z\"\n\t\t\tfill=\"white\"\n\t\t/>\n\t</svg>\n);\n","/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport classnames from 'classnames';\nimport { cloneElement, Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { Button, FormToggle } from '@wordpress/components';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Card, H, Plugins } from '@woocommerce/components';\nimport {\n\tgetHistory,\n\tgetNewPath,\n\tupdateQueryString,\n} from '@woocommerce/navigation';\nimport {\n\tONBOARDING_STORE_NAME,\n\tOPTIONS_STORE_NAME,\n\tPLUGINS_STORE_NAME,\n\tpluginNames,\n} from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport { recordEvent } from 'lib/tracks';\nimport { getCountryCode } from 'dashboard/utils';\nimport withSelect from 'wc-api/with-select';\nimport { getPaymentMethods } from './methods';\n\nclass Payments extends Component {\n\tconstructor( props ) {\n\t\tsuper( ...arguments );\n\t\tconst { methods } = props;\n\n\t\tconst enabledMethods = {};\n\t\tmethods.forEach(\n\t\t\t( method ) => ( enabledMethods[ method.key ] = method.isEnabled )\n\t\t);\n\t\tthis.state = {\n\t\t\tbusyMethod: null,\n\t\t\tenabledMethods,\n\t\t\trecommendedMethod: this.getRecommendedMethod(),\n\t\t};\n\n\t\tthis.completeTask = this.completeTask.bind( this );\n\t\tthis.markConfigured = this.markConfigured.bind( this );\n\t\tthis.skipTask = this.skipTask.bind( this );\n\t}\n\n\tcomponentDidUpdate() {\n\t\tconst { recommendedMethod } = this.state;\n\n\t\tconst method = this.getRecommendedMethod();\n\t\tif ( recommendedMethod !== method ) {\n\t\t\tthis.setState( {\n\t\t\t\trecommendedMethod: method,\n\t\t\t} );\n\t\t}\n\t}\n\n\tgetRecommendedMethod() {\n\t\tconst { methods } = this.props;\n\t\treturn methods.find( ( m ) => m.key === 'wcpay' && m.visible )\n\t\t\t? 'wcpay'\n\t\t\t: 'stripe';\n\t}\n\n\tasync completeTask() {\n\t\tconst { createNotice, methods, updateOptions } = this.props;\n\n\t\tconst update = await updateOptions( {\n\t\t\twoocommerce_task_list_payments: {\n\t\t\t\tcompleted: 1,\n\t\t\t\ttimestamp: Math.floor( Date.now() / 1000 ),\n\t\t\t},\n\t\t} );\n\n\t\trecordEvent( 'tasklist_payment_done', {\n\t\t\tconfigured: methods\n\t\t\t\t.filter( ( method ) => method.isConfigured )\n\t\t\t\t.map( ( method ) => method.key ),\n\t\t} );\n\n\t\tif ( update.success ) {\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t'💰 Ka-ching! Your store can now accept payments 💳',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'error',\n\t\t\t\t__(\n\t\t\t\t\t'There was a problem updating settings',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tskipTask() {\n\t\tconst { methods, updateOptions } = this.props;\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_task_list_payments: {\n\t\t\t\tskipped: 1,\n\t\t\t\ttimestamp: Math.floor( Date.now() / 1000 ),\n\t\t\t},\n\t\t} );\n\n\t\trecordEvent( 'tasklist_payment_skip_task', {\n\t\t\toptions: methods.map( ( method ) => method.key ),\n\t\t} );\n\n\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t}\n\n\tmarkConfigured( method ) {\n\t\tconst { enabledMethods } = this.state;\n\n\t\tthis.setState( {\n\t\t\tenabledMethods: {\n\t\t\t\t...enabledMethods,\n\t\t\t\t[ method ]: true,\n\t\t\t},\n\t\t} );\n\n\t\tgetHistory().push( getNewPath( { task: 'payments' }, '/', {} ) );\n\n\t\trecordEvent( 'tasklist_payment_connect_method', {\n\t\t\tpayment_method: method,\n\t\t} );\n\t}\n\n\tgetCurrentMethod() {\n\t\tconst { methods, query } = this.props;\n\n\t\tif ( ! query.method ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn methods.find( ( method ) => method.key === query.method );\n\t}\n\n\tgetInstallStep() {\n\t\tconst currentMethod = this.getCurrentMethod();\n\n\t\tif ( ! currentMethod.plugins || ! currentMethod.plugins.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { activePlugins } = this.props;\n\t\tconst pluginsToInstall = currentMethod.plugins.filter(\n\t\t\t( method ) => ! activePlugins.includes( method )\n\t\t);\n\t\tconst pluginNamesString = currentMethod.plugins\n\t\t\t.map( ( pluginSlug ) => pluginNames[ pluginSlug ] )\n\t\t\t.join( ' ' + __( 'and', 'woocommerce-admin' ) + ' ' );\n\n\t\treturn {\n\t\t\tkey: 'install',\n\t\t\tlabel: sprintf(\n\t\t\t\t__( 'Install %s', 'woocommerce-admin' ),\n\t\t\t\tpluginNamesString\n\t\t\t),\n\t\t\tcontent: (\n\t\t\t\t<Plugins\n\t\t\t\t\tonComplete={ () => {\n\t\t\t\t\t\trecordEvent( 'tasklist_payment_install_method', {\n\t\t\t\t\t\t\tplugins: currentMethod.plugins,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\tautoInstall\n\t\t\t\t\tpluginSlugs={ currentMethod.plugins }\n\t\t\t\t/>\n\t\t\t),\n\t\t\tisComplete: ! pluginsToInstall.length,\n\t\t};\n\t}\n\n\ttoggleMethod( key ) {\n\t\tconst { methods, options, updateOptions } = this.props;\n\t\tconst { enabledMethods } = this.state;\n\t\tconst method = methods.find( ( option ) => option.key === key );\n\n\t\tenabledMethods[ key ] = ! enabledMethods[ key ];\n\t\tthis.setState( { enabledMethods } );\n\n\t\trecordEvent( 'tasklist_payment_toggle', {\n\t\t\tenabled: ! method.isEnabled,\n\t\t\tpayment_method: key,\n\t\t} );\n\n\t\tupdateOptions( {\n\t\t\t[ method.optionName ]: {\n\t\t\t\t...options[ method.optionName ],\n\t\t\t\tenabled: method.isEnabled ? 'no' : 'yes',\n\t\t\t},\n\t\t} );\n\t}\n\n\tasync handleClick( method ) {\n\t\tconst { methods } = this.props;\n\t\tconst { key, onClick } = method;\n\n\t\trecordEvent( 'tasklist_payment_setup', {\n\t\t\toptions: methods.map( ( option ) => option.key ),\n\t\t\tselected: key,\n\t\t} );\n\n\t\tif ( onClick ) {\n\t\t\tthis.setState( { busyMethod: key } );\n\t\t\tawait new Promise( onClick )\n\t\t\t\t.then( () => {\n\t\t\t\t\tthis.setState( { busyMethod: null } );\n\t\t\t\t} )\n\t\t\t\t.catch( () => {\n\t\t\t\t\tthis.setState( { busyMethod: null } );\n\t\t\t\t} );\n\n\t\t\treturn;\n\t\t}\n\n\t\tupdateQueryString( {\n\t\t\tmethod: key,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst currentMethod = this.getCurrentMethod();\n\t\tconst { busyMethod, enabledMethods, recommendedMethod } = this.state;\n\t\tconst { methods, query, requesting } = this.props;\n\t\tconst hasEnabledMethods = Object.keys( enabledMethods ).filter(\n\t\t\t( method ) => enabledMethods[ method ]\n\t\t).length;\n\n\t\tif ( currentMethod ) {\n\t\t\treturn (\n\t\t\t\t<Card className=\"woocommerce-task-payment-method is-narrow\">\n\t\t\t\t\t{ cloneElement( currentMethod.container, {\n\t\t\t\t\t\tquery,\n\t\t\t\t\t\tinstallStep: this.getInstallStep(),\n\t\t\t\t\t\tmarkConfigured: this.markConfigured,\n\t\t\t\t\t\thasCbdIndustry: currentMethod.hasCbdIndustry,\n\t\t\t\t\t} ) }\n\t\t\t\t</Card>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-payments\">\n\t\t\t\t{ methods.map( ( method ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tbefore,\n\t\t\t\t\t\tcontainer,\n\t\t\t\t\t\tcontent,\n\t\t\t\t\t\tisConfigured,\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t\tvisible,\n\t\t\t\t\t} = method;\n\n\t\t\t\t\tif ( ! visible ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst classes = classnames(\n\t\t\t\t\t\t'woocommerce-task-payment',\n\t\t\t\t\t\t'is-narrow',\n\t\t\t\t\t\t! isConfigured &&\n\t\t\t\t\t\t\t'woocommerce-task-payment-not-configured',\n\t\t\t\t\t\t'woocommerce-task-payment-' + key\n\t\t\t\t\t);\n\n\t\t\t\t\tconst isRecommended =\n\t\t\t\t\t\tkey === recommendedMethod && ! isConfigured;\n\t\t\t\t\tconst showRecommendedRibbon =\n\t\t\t\t\t\tisRecommended && key !== 'wcpay';\n\t\t\t\t\tconst showRecommendedPill =\n\t\t\t\t\t\tisRecommended && key === 'wcpay';\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Card key={ key } className={ classes }>\n\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__before\">\n\t\t\t\t\t\t\t\t{ showRecommendedRibbon && (\n\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__recommended-ribbon\">\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Recommended',\n\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ before }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__text\">\n\t\t\t\t\t\t\t\t<H className=\"woocommerce-task-payment__title\">\n\t\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t\t\t{ showRecommendedPill && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"woocommerce-task-payment__recommended-pill\">\n\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Recommended',\n\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</H>\n\t\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__content\">\n\t\t\t\t\t\t\t\t\t{ content }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__after\">\n\t\t\t\t\t\t\t\t{ container && ! isConfigured ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tisPrimary={ key === recommendedMethod }\n\t\t\t\t\t\t\t\t\t\tisSecondary={\n\t\t\t\t\t\t\t\t\t\t\tkey !== recommendedMethod\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisBusy={ busyMethod === key }\n\t\t\t\t\t\t\t\t\t\tdisabled={ busyMethod }\n\t\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\t\tthis.handleClick( method )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Set up', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<FormToggle\n\t\t\t\t\t\t\t\t\t\tchecked={ enabledMethods[ key ] }\n\t\t\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\t\t\tthis.toggleMethod( key )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonClick={ ( e ) => e.stopPropagation() }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t\t<div className=\"woocommerce-task-payments__actions\">\n\t\t\t\t\t{ ! hasEnabledMethods ? (\n\t\t\t\t\t\t<Button isLink onClick={ this.skipTask }>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'My store doesn’t take payments',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\tisBusy={ requesting }\n\t\t\t\t\t\t\tonClick={ this.completeTask }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Done', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { installAndActivatePlugins } = dispatch( PLUGINS_STORE_NAME );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t\tupdateOptions,\n\t\t};\n\t} ),\n\twithSelect( ( select, props ) => {\n\t\tconst { createNotice, installAndActivatePlugins } = props;\n\t\tconst { getProfileItems } = select( ONBOARDING_STORE_NAME );\n\t\tconst { getOption, isOptionsUpdating } = select( OPTIONS_STORE_NAME );\n\t\tconst { getActivePlugins, isJetpackConnected } = select(\n\t\t\tPLUGINS_STORE_NAME\n\t\t);\n\n\t\tconst activePlugins = getActivePlugins();\n\t\tconst profileItems = getProfileItems();\n\n\t\tconst optionNames = [\n\t\t\t'woocommerce_default_country',\n\t\t\t'woocommerce_woocommerce_payments_settings',\n\t\t\t'woocommerce_stripe_settings',\n\t\t\t'woocommerce_ppec_paypal_settings',\n\t\t\t'woocommerce_payfast_settings',\n\t\t\t'woocommerce_square_credit_card_settings',\n\t\t\t'woocommerce_klarna_payments_settings',\n\t\t\t'woocommerce_kco_settings',\n\t\t\t'wc_square_refresh_tokens',\n\t\t\t'woocommerce_cod_settings',\n\t\t\t'woocommerce_bacs_settings',\n\t\t\t'woocommerce_bacs_accounts',\n\t\t];\n\n\t\tconst options = optionNames.reduce( ( result, name ) => {\n\t\t\tresult[ name ] = getOption( name );\n\t\t\treturn result;\n\t\t}, {} );\n\t\tconst countryCode = getCountryCode(\n\t\t\toptions.woocommerce_default_country\n\t\t);\n\n\t\tconst methods = getPaymentMethods( {\n\t\t\tactivePlugins,\n\t\t\tcountryCode,\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\toptions,\n\t\t\tprofileItems,\n\t\t} );\n\n\t\tconst requesting = isOptionsUpdating();\n\n\t\treturn {\n\t\t\tcountryCode,\n\t\t\tprofileItems,\n\t\t\tactivePlugins,\n\t\t\toptions,\n\t\t\tmethods,\n\t\t\trequesting,\n\t\t};\n\t} )\n)( Payments );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport interpolateComponents from 'interpolate-components';\n\n/**\n * WooCommerce dependencies\n */\nimport { ADMIN_URL as adminUrl } from '@woocommerce/wc-admin-settings';\nimport { Link, Stepper } from '@woocommerce/components';\n\nclass Klarna extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.continue = this.continue.bind( this );\n\t}\n\n\tcontinue() {\n\t\tconst { markConfigured, plugin } = this.props;\n\n\t\tconst slug =\n\t\t\tplugin === 'checkout' ? 'klarna-checkout' : 'klarna-payments';\n\n\t\tmarkConfigured( slug );\n\t}\n\n\trenderConnectStep() {\n\t\tconst { plugin } = this.props;\n\n\t\tconst slug =\n\t\t\tplugin === 'checkout' ? 'klarna-checkout' : 'klarna-payments';\n\t\tconst section = plugin === 'checkout' ? 'kco' : 'klarna_payments';\n\n\t\tconst link = (\n\t\t\t<Link\n\t\t\t\thref={\n\t\t\t\t\tadminUrl +\n\t\t\t\t\t'admin.php?page=wc-settings&tab=checkout&section=' +\n\t\t\t\t\tsection\n\t\t\t\t}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\ttype=\"external\"\n\t\t\t/>\n\t\t);\n\n\t\tconst helpLink = (\n\t\t\t<Link\n\t\t\t\thref={\n\t\t\t\t\t'https://docs.woocommerce.com/document/' +\n\t\t\t\t\tslug +\n\t\t\t\t\t'/#section-3'\n\t\t\t\t}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\ttype=\"external\"\n\t\t\t/>\n\t\t);\n\n\t\tconst configureText = interpolateComponents( {\n\t\t\tmixedString: __(\n\t\t\t\t'Klarna can be configured under your {{link}}store settings{{/link}}. Figure out {{helpLink}}what you need{{/helpLink}}.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tlink,\n\t\t\t\thelpLink,\n\t\t\t},\n\t\t} );\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<p>{ configureText }</p>\n\t\t\t\t<Button isPrimary onClick={ this.continue }>\n\t\t\t\t\t{ __( 'Continue', 'woocommerce-admin' ) }\n\t\t\t\t</Button>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { installStep } = this.props;\n\n\t\treturn (\n\t\t\t<Stepper\n\t\t\t\tisVertical\n\t\t\t\tisPending={ ! installStep.isComplete }\n\t\t\t\tcurrentStep={ installStep.isComplete ? 'connect' : 'install' }\n\t\t\t\tsteps={ [\n\t\t\t\t\tinstallStep,\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'connect',\n\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t'Connect your Klarna account',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcontent: this.renderConnectStep(),\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default Klarna;\n","/**\n * External dependencies\n */\n\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Fragment } from '@wordpress/element';\nimport { filter, some } from 'lodash';\nimport interpolateComponents from 'interpolate-components';\n\n/**\n * WooCommerce dependencies\n */\nimport {\n\tgetSetting,\n\tgetAdminLink,\n\tWC_ASSET_URL as wcAssetUrl,\n} from '@woocommerce/wc-admin-settings';\nimport { Link } from '@woocommerce/components';\nimport { WC_ADMIN_NAMESPACE } from 'wc-api/constants';\n\n/**\n * Internal dependencies\n */\nimport Bacs from './bacs';\nimport BacsIcon from './images/bacs';\nimport CodIcon from './images/cod';\nimport { createNoticesFromResponse } from 'lib/notices';\nimport Stripe from './stripe';\nimport Square from './square';\nimport WCPay from './wcpay';\nimport WCPayIcon from './images/wcpay';\nimport PayPal from './paypal';\nimport Klarna from './klarna';\nimport PayFast from './payfast';\n\nexport function getPaymentMethods( {\n\tactivePlugins,\n\tcountryCode,\n\tcreateNotice,\n\tinstallAndActivatePlugins,\n\toptions,\n\tprofileItems,\n} ) {\n\tconst settings = getSetting( 'onboarding', {\n\t\tstripeSupportedCountries: [],\n\t\twcPayIsConnected: false,\n\t} );\n\tconst { stripeSupportedCountries, wcPayIsConnected } = settings;\n\n\tconst hasCbdIndustry =\n\t\tsome( profileItems.industry, {\n\t\t\tslug: 'cbd-other-hemp-derived-products',\n\t\t} ) || false;\n\n\tconst methods = [];\n\n\tif ( window.wcAdminFeatures.wcpay ) {\n\t\tconst tosLink = (\n\t\t\t<Link\n\t\t\t\thref={ 'https://wordpress.com/tos/' }\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\ttype=\"external\"\n\t\t\t/>\n\t\t);\n\n\t\tconst tosPrompt = interpolateComponents( {\n\t\t\tmixedString: __(\n\t\t\t\t'By clicking \"Set up,\" you agree to the {{link}}Terms of Service{{/link}}',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tlink: tosLink,\n\t\t\t},\n\t\t} );\n\n\t\tconst wcPayDocLink = (\n\t\t\t<Link\n\t\t\t\thref={\n\t\t\t\t\t'https://docs.woocommerce.com/document/payments/testing/dev-mode/'\n\t\t\t\t}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\ttype=\"external\"\n\t\t\t/>\n\t\t);\n\n\t\tconst wcPayDocPrompt = interpolateComponents( {\n\t\t\tmixedString: __(\n\t\t\t\t'Setting up a store for a client? {{link}}Start here{{/link}}',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tlink: wcPayDocLink,\n\t\t\t},\n\t\t} );\n\n\t\tconst wcPaySettingsLink = (\n\t\t\t<Link\n\t\t\t\thref={ getAdminLink(\n\t\t\t\t\t'admin.php?page=wc-settings&tab=checkout&section=woocommerce_payments'\n\t\t\t\t) }\n\t\t\t\ttype=\"wp-admin\"\n\t\t\t>\n\t\t\t\t{ __( 'Settings', 'woocommerce-admin' ) }\n\t\t\t</Link>\n\t\t);\n\n\t\tmethods.push( {\n\t\t\tkey: 'wcpay',\n\t\t\ttitle: __( 'WooCommerce Payments', 'woocommerce-admin' ),\n\t\t\tcontent: (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Accept credit card payments the easy way! No setup fees. No ' +\n\t\t\t\t\t\t\t'monthly fees. Just 2.9% + $0.30 per transaction ' +\n\t\t\t\t\t\t\t'on U.S. issued cards. ',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t\t{ wcPayIsConnected && wcPaySettingsLink }\n\t\t\t\t\t{ ! wcPayIsConnected && <p>{ tosPrompt }</p> }\n\t\t\t\t\t{ profileItems.setup_client && <p>{ wcPayDocPrompt }</p> }\n\t\t\t\t</Fragment>\n\t\t\t),\n\t\t\tbefore: <WCPayIcon />,\n\t\t\tonClick: ( resolve, reject ) => {\n\t\t\t\tconst errorMessage = __(\n\t\t\t\t\t'There was an error connecting to WooCommerce Payments. Please try again or connect later in store settings.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t);\n\n\t\t\t\tconst connect = () => {\n\t\t\t\t\tapiFetch( {\n\t\t\t\t\t\tpath: WC_ADMIN_NAMESPACE + '/plugins/connect-wcpay',\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t} )\n\t\t\t\t\t\t.then( ( response ) => {\n\t\t\t\t\t\t\twindow.location = response.connectUrl;\n\t\t\t\t\t\t} )\n\t\t\t\t\t\t.catch( () => {\n\t\t\t\t\t\t\tcreateNotice( 'error', errorMessage );\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t} );\n\t\t\t\t};\n\n\t\t\t\tinstallAndActivatePlugins( [ 'woocommerce-payments' ] )\n\t\t\t\t\t.then( () => connect() )\n\t\t\t\t\t.catch( ( error ) => {\n\t\t\t\t\t\tcreateNoticesFromResponse( error );\n\t\t\t\t\t\treject();\n\t\t\t\t\t} );\n\t\t\t},\n\t\t\tvisible: [ 'US', 'PR' ].includes( countryCode ) && ! hasCbdIndustry,\n\t\t\tplugins: [ 'woocommerce-payments' ],\n\t\t\tcontainer: <WCPay />,\n\t\t\tisConfigured: wcPayIsConnected,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_woocommerce_payments_settings &&\n\t\t\t\toptions.woocommerce_woocommerce_payments_settings.enabled ===\n\t\t\t\t\t'yes',\n\t\t\toptionName: 'woocommerce_woocommerce_payments_settings',\n\t\t} );\n\t}\n\n\tmethods.push(\n\t\t{\n\t\t\tkey: 'stripe',\n\t\t\ttitle: __(\n\t\t\t\t'Credit cards - powered by Stripe',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcontent: (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Accept debit and credit cards in 135+ currencies, methods such as Alipay, ' +\n\t\t\t\t\t\t\t'and one-touch checkout with Apple Pay.',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t),\n\t\t\tbefore: <img src={ wcAssetUrl + 'images/stripe.png' } alt=\"\" />,\n\t\t\tvisible:\n\t\t\t\tstripeSupportedCountries.includes( countryCode ) &&\n\t\t\t\t! hasCbdIndustry,\n\t\t\tplugins: [ 'woocommerce-gateway-stripe' ],\n\t\t\tcontainer: <Stripe />,\n\t\t\tisConfigured:\n\t\t\t\toptions.woocommerce_stripe_settings &&\n\t\t\t\toptions.woocommerce_stripe_settings.publishable_key &&\n\t\t\t\toptions.woocommerce_stripe_settings.secret_key,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_stripe_settings &&\n\t\t\t\toptions.woocommerce_stripe_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_stripe_settings',\n\t\t},\n\t\t{\n\t\t\tkey: 'paypal',\n\t\t\ttitle: __( 'PayPal Checkout', 'woocommerce-admin' ),\n\t\t\tcontent: (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t\"Safe and secure payments using credit cards or your customer's PayPal account.\",\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t),\n\t\t\tbefore: <img src={ wcAssetUrl + 'images/paypal.png' } alt=\"\" />,\n\t\t\tvisible: ! hasCbdIndustry,\n\t\t\tplugins: [ 'woocommerce-gateway-paypal-express-checkout' ],\n\t\t\tcontainer: <PayPal />,\n\t\t\tisConfigured:\n\t\t\t\toptions.woocommerce_ppec_paypal_settings &&\n\t\t\t\toptions.woocommerce_ppec_paypal_settings.api_username &&\n\t\t\t\toptions.woocommerce_ppec_paypal_settings.api_password,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_ppec_paypal_settings &&\n\t\t\t\toptions.woocommerce_ppec_paypal_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_ppec_paypal_settings',\n\t\t},\n\t\t{\n\t\t\tkey: 'klarna_checkout',\n\t\t\ttitle: __( 'Klarna Checkout', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Choose the payment that you want, pay now, pay later or slice it. No credit card numbers, no passwords, no worries.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tbefore: (\n\t\t\t\t<img src={ wcAssetUrl + 'images/klarna-black.png' } alt=\"\" />\n\t\t\t),\n\t\t\tvisible:\n\t\t\t\t[ 'SE', 'FI', 'NO', 'NL' ].includes( countryCode ) &&\n\t\t\t\t! hasCbdIndustry,\n\t\t\tplugins: [ 'klarna-checkout-for-woocommerce' ],\n\t\t\tcontainer: <Klarna plugin={ 'checkout' } />,\n\t\t\t// @todo This should check actual Klarna connection information.\n\t\t\tisConfigured: activePlugins.includes(\n\t\t\t\t'klarna-checkout-for-woocommerce'\n\t\t\t),\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_kco_settings &&\n\t\t\t\toptions.woocommerce_kco_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_kco_settings',\n\t\t},\n\t\t{\n\t\t\tkey: 'klarna_payments',\n\t\t\ttitle: __( 'Klarna Payments', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Choose the payment that you want, pay now, pay later or slice it. No credit card numbers, no passwords, no worries.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tbefore: (\n\t\t\t\t<img src={ wcAssetUrl + 'images/klarna-black.png' } alt=\"\" />\n\t\t\t),\n\t\t\tvisible:\n\t\t\t\t[ 'DK', 'DE', 'AT' ].includes( countryCode ) &&\n\t\t\t\t! hasCbdIndustry,\n\t\t\tplugins: [ 'klarna-payments-for-woocommerce' ],\n\t\t\tcontainer: <Klarna plugin={ 'payments' } />,\n\t\t\t// @todo This should check actual Klarna connection information.\n\t\t\tisConfigured: activePlugins.includes(\n\t\t\t\t'klarna-payments-for-woocommerce'\n\t\t\t),\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_klarna_payments_settings &&\n\t\t\t\toptions.woocommerce_klarna_payments_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_klarna_payments_settings',\n\t\t},\n\t\t{\n\t\t\tkey: 'square',\n\t\t\ttitle: __( 'Square', 'woocommerce-admin' ),\n\t\t\tcontent: (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Securely accept credit and debit cards with one low rate, no surprise fees (custom rates available). ' +\n\t\t\t\t\t\t\t'Sell online and in store and track sales and inventory in one place.',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t\t{ hasCbdIndustry && (\n\t\t\t\t\t\t<span className=\"text-style-strong\">\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t' Selling CBD products is only supported by Square.',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t),\n\t\t\tbefore: (\n\t\t\t\t<img src={ wcAssetUrl + 'images/square-black.png' } alt=\"\" />\n\t\t\t),\n\t\t\tvisible:\n\t\t\t\t( hasCbdIndustry && [ 'US' ].includes( countryCode ) ) ||\n\t\t\t\t( [ 'brick-mortar', 'brick-mortar-other' ].includes(\n\t\t\t\t\tprofileItems.selling_venues\n\t\t\t\t) &&\n\t\t\t\t\t[ 'US', 'CA', 'JP', 'GB', 'AU' ].includes( countryCode ) ),\n\t\t\tplugins: [ 'woocommerce-square' ],\n\t\t\tcontainer: <Square />,\n\t\t\tisConfigured:\n\t\t\t\toptions.wc_square_refresh_tokens &&\n\t\t\t\toptions.wc_square_refresh_tokens.length,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_square_credit_card_settings &&\n\t\t\t\toptions.woocommerce_square_credit_card_settings.enabled ===\n\t\t\t\t\t'yes',\n\t\t\toptionName: 'woocommerce_square_credit_card_settings',\n\t\t\thasCbdIndustry,\n\t\t},\n\t\t{\n\t\t\tkey: 'payfast',\n\t\t\ttitle: __( 'PayFast', 'woocommerce-admin' ),\n\t\t\tcontent: (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'The PayFast extension for WooCommerce enables you to accept payments by Credit Card and EFT via one of South Africa’s most popular payment gateways. No setup fees or monthly subscription costs.',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Selecting this extension will configure your store to use South African rands as the selected currency.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t</Fragment>\n\t\t\t),\n\t\t\tbefore: (\n\t\t\t\t<img\n\t\t\t\t\tsrc={ wcAssetUrl + 'images/payfast.png' }\n\t\t\t\t\talt=\"PayFast logo\"\n\t\t\t\t/>\n\t\t\t),\n\t\t\tvisible: [ 'ZA' ].includes( countryCode ) && ! hasCbdIndustry,\n\t\t\tplugins: [ 'woocommerce-payfast-gateway' ],\n\t\t\tcontainer: <PayFast />,\n\t\t\tisConfigured:\n\t\t\t\toptions.woocommerce_payfast_settings &&\n\t\t\t\toptions.woocommerce_payfast_settings.merchant_id &&\n\t\t\t\toptions.woocommerce_payfast_settings.merchant_key &&\n\t\t\t\toptions.woocommerce_payfast_settings.pass_phrase,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_payfast_settings &&\n\t\t\t\toptions.woocommerce_payfast_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_payfast_settings',\n\t\t},\n\t\t{\n\t\t\tkey: 'cod',\n\t\t\ttitle: __( 'Cash on delivery', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Take payments in cash upon delivery.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tbefore: <CodIcon />,\n\t\t\tvisible: ! hasCbdIndustry,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_cod_settings &&\n\t\t\t\toptions.woocommerce_cod_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_cod_settings',\n\t\t},\n\t\t{\n\t\t\tkey: 'bacs',\n\t\t\ttitle: __( 'Direct bank transfer', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Take payments via bank transfer.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tbefore: <BacsIcon />,\n\t\t\tvisible: ! hasCbdIndustry,\n\t\t\tcontainer: <Bacs />,\n\t\t\tisConfigured:\n\t\t\t\toptions.woocommerce_bacs_accounts &&\n\t\t\t\toptions.woocommerce_bacs_accounts.length,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_bacs_settings &&\n\t\t\t\toptions.woocommerce_bacs_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_bacs_settings',\n\t\t}\n\t);\n\n\treturn filter( methods, ( method ) => method.visible );\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport interpolateComponents from 'interpolate-components';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Form, Link, Stepper, TextControl } from '@woocommerce/components';\nimport { OPTIONS_STORE_NAME } from '@woocommerce/data';\n\nclass PayFast extends Component {\n\tgetInitialConfigValues = () => {\n\t\treturn {\n\t\t\tmerchant_id: '',\n\t\t\tmerchant_key: '',\n\t\t\tpass_phrase: '',\n\t\t};\n\t};\n\n\tvalidate = ( values ) => {\n\t\tconst errors = {};\n\n\t\tif ( ! values.merchant_id ) {\n\t\t\terrors.merchant_id = __(\n\t\t\t\t'Please enter your merchant ID',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\tif ( ! values.merchant_key ) {\n\t\t\terrors.merchant_key = __(\n\t\t\t\t'Please enter your merchant key',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\tif ( ! values.pass_phrase ) {\n\t\t\terrors.pass_phrase = __(\n\t\t\t\t'Please enter your passphrase',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\treturn errors;\n\t};\n\n\tupdateSettings = async ( values ) => {\n\t\tconst { updateOptions, createNotice, markConfigured } = this.props;\n\n\t\t// Because the PayFast extension only works with the South African Rand\n\t\t// currency, force the store to use it while setting the PayFast settings\n\t\tconst update = await updateOptions( {\n\t\t\twoocommerce_currency: 'ZAR',\n\t\t\twoocommerce_payfast_settings: {\n\t\t\t\tmerchant_id: values.merchant_id,\n\t\t\t\tmerchant_key: values.merchant_key,\n\t\t\t\tpass_phrase: values.pass_phrase,\n\t\t\t\tenabled: 'yes',\n\t\t\t},\n\t\t} );\n\n\t\tif ( update.success ) {\n\t\t\tmarkConfigured( 'payfast' );\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__( 'PayFast connected successfully', 'woocommerce-admin' )\n\t\t\t);\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'error',\n\t\t\t\t__(\n\t\t\t\t\t'There was a problem saving your payment setings',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t};\n\n\trenderConnectStep() {\n\t\tconst { isOptionsRequesting } = this.props;\n\t\tconst helpText = interpolateComponents( {\n\t\t\tmixedString: __(\n\t\t\t\t'Your API details can be obtained from your {{link}}PayFast account{{/link}}',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tlink: (\n\t\t\t\t\t<Link\n\t\t\t\t\t\thref=\"https://www.payfast.co.za/\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t},\n\t\t} );\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialConfigValues() }\n\t\t\t\tonSubmitCallback={ this.updateSettings }\n\t\t\t\tvalidate={ this.validate }\n\t\t\t>\n\t\t\t\t{ ( { getInputProps, handleSubmit } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Merchant ID',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'merchant_id' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Merchant Key',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'merchant_key' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Passphrase',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'pass_phrase' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tisBusy={ isOptionsRequesting }\n\t\t\t\t\t\t\t\tonClick={ handleSubmit }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Proceed', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<p>{ helpText }</p>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Form>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { installStep, isOptionsRequesting } = this.props;\n\n\t\treturn (\n\t\t\t<Stepper\n\t\t\t\tisVertical\n\t\t\t\tisPending={ ! installStep.isComplete || isOptionsRequesting }\n\t\t\t\tcurrentStep={ installStep.isComplete ? 'connect' : 'install' }\n\t\t\t\tsteps={ [\n\t\t\t\t\tinstallStep,\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'connect',\n\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t'Connect your PayFast account',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcontent: this.renderConnectStep(),\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { isOptionsUpdating } = select( OPTIONS_STORE_NAME );\n\t\tconst isOptionsRequesting = isOptionsUpdating();\n\n\t\treturn {\n\t\t\tisOptionsRequesting,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( PayFast );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport interpolateComponents from 'interpolate-components';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Form, Link, Stepper, TextControl } from '@woocommerce/components';\nimport { getQuery } from '@woocommerce/navigation';\nimport { WC_ADMIN_NAMESPACE } from 'wc-api/constants';\nimport { PLUGINS_STORE_NAME, OPTIONS_STORE_NAME } from '@woocommerce/data';\n\nclass PayPal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tautoConnectFailed: false,\n\t\t\tconnectURL: '',\n\t\t\tisPending: false,\n\t\t};\n\n\t\tthis.updateSettings = this.updateSettings.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { createNotice, markConfigured } = this.props;\n\n\t\tconst query = getQuery();\n\t\t// Handle redirect back from PayPal\n\t\tif ( query[ 'paypal-connect' ] ) {\n\t\t\tif ( query[ 'paypal-connect' ] === '1' ) {\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'success',\n\t\t\t\t\t__( 'PayPal connected successfully.', 'woocommerce-admin' )\n\t\t\t\t);\n\t\t\t\tmarkConfigured( 'paypal' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/* eslint-disable react/no-did-mount-set-state */\n\t\t\tthis.setState( {\n\t\t\t\tautoConnectFailed: true,\n\t\t\t} );\n\t\t\t/* eslint-enable react/no-did-mount-set-state */\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fetchOAuthConnectURL();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { activePlugins } = this.props;\n\n\t\tif (\n\t\t\t! prevProps.activePlugins.includes(\n\t\t\t\t'woocommerce-gateway-paypal-express-checkout'\n\t\t\t) &&\n\t\t\tactivePlugins.includes(\n\t\t\t\t'woocommerce-gateway-paypal-express-checkout'\n\t\t\t)\n\t\t) {\n\t\t\tthis.fetchOAuthConnectURL();\n\t\t}\n\t}\n\n\tasync fetchOAuthConnectURL() {\n\t\tconst { activePlugins } = this.props;\n\n\t\tif (\n\t\t\t! activePlugins.includes(\n\t\t\t\t'woocommerce-gateway-paypal-express-checkout'\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( { isPending: true } );\n\t\ttry {\n\t\t\tconst result = await apiFetch( {\n\t\t\t\tpath: WC_ADMIN_NAMESPACE + '/plugins/connect-paypal',\n\t\t\t\tmethod: 'POST',\n\t\t\t} );\n\t\t\tif ( ! result || ! result.connectUrl ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tautoConnectFailed: true,\n\t\t\t\t} );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.setState( {\n\t\t\t\tconnectURL: result.connectUrl,\n\t\t\t\tisPending: false,\n\t\t\t} );\n\t\t} catch ( error ) {\n\t\t\tthis.setState( {\n\t\t\t\tautoConnectFailed: true,\n\t\t\t\tisPending: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\trenderConnectButton() {\n\t\tconst { connectURL } = this.state;\n\t\treturn (\n\t\t\t<Button isPrimary href={ connectURL }>\n\t\t\t\t{ __( 'Connect', 'woocommerce-admin' ) }\n\t\t\t</Button>\n\t\t);\n\t}\n\n\tasync updateSettings( values ) {\n\t\tconst {\n\t\t\tcreateNotice,\n\t\t\toptions,\n\t\t\tupdateOptions,\n\t\t\tmarkConfigured,\n\t\t} = this.props;\n\n\t\tconst update = await updateOptions( {\n\t\t\twoocommerce_ppec_paypal_settings: {\n\t\t\t\t...options.woocommerce_ppec_paypal_settings,\n\t\t\t\tapi_username: values.api_username,\n\t\t\t\tapi_password: values.api_password,\n\t\t\t\tenabled: 'yes',\n\t\t\t},\n\t\t} );\n\n\t\tif ( update.success ) {\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__( 'PayPal connected successfully.', 'woocommerce-admin' )\n\t\t\t);\n\t\t\tmarkConfigured( 'paypal' );\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'error',\n\t\t\t\t__(\n\t\t\t\t\t'There was a problem saving your payment settings.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tgetInitialConfigValues() {\n\t\treturn {\n\t\t\tapi_username: '',\n\t\t\tapi_password: '',\n\t\t};\n\t}\n\n\tvalidate( values ) {\n\t\tconst errors = {};\n\n\t\tif ( ! values.api_username ) {\n\t\t\terrors.api_username = __(\n\t\t\t\t'Please enter your API username',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\t\tif ( ! values.api_password ) {\n\t\t\terrors.api_password = __(\n\t\t\t\t'Please enter your API password',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\treturn errors;\n\t}\n\n\trenderManualConfig() {\n\t\tconst { isOptionsUpdating } = this.props;\n\t\tconst link = (\n\t\t\t<Link\n\t\t\t\thref=\"https://docs.woocommerce.com/document/paypal-express-checkout/#section-8\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\ttype=\"external\"\n\t\t\t/>\n\t\t);\n\t\tconst help = interpolateComponents( {\n\t\t\tmixedString: __(\n\t\t\t\t'Your API details can be obtained from your {{link}}PayPal account{{/link}}',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tlink,\n\t\t\t},\n\t\t} );\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialConfigValues() }\n\t\t\t\tonSubmitCallback={ this.updateSettings }\n\t\t\t\tvalidate={ this.validate }\n\t\t\t>\n\t\t\t\t{ ( { getInputProps, handleSubmit } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'API Username',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'api_username' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'API Password',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'api_password' ) }\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={ handleSubmit }\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tisBusy={ isOptionsUpdating }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Proceed', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<p>{ help }</p>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Form>\n\t\t);\n\t}\n\n\tgetConnectStep() {\n\t\tconst { autoConnectFailed, connectURL, isPending } = this.state;\n\t\tconst connectStep = {\n\t\t\tkey: 'connect',\n\t\t\tlabel: __( 'Connect your PayPal account', 'woocommerce-admin' ),\n\t\t};\n\n\t\tif ( isPending ) {\n\t\t\treturn connectStep;\n\t\t}\n\n\t\tif ( ! autoConnectFailed && connectURL ) {\n\t\t\treturn {\n\t\t\t\t...connectStep,\n\t\t\t\tdescription: __(\n\t\t\t\t\t'A Paypal account is required to process payments. You will be redirected to the Paypal website to create the connection.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: this.renderConnectButton(),\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\t...connectStep,\n\t\t\tdescription: __(\n\t\t\t\t'Connect your store to your PayPal account. Don’t have a PayPal account? Create one.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcontent: this.renderManualConfig(),\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { installStep } = this.props;\n\t\tconst { isPending } = this.state;\n\n\t\treturn (\n\t\t\t<Stepper\n\t\t\t\tisVertical\n\t\t\t\tisPending={ ! installStep.isComplete || isPending }\n\t\t\t\tcurrentStep={ installStep.isComplete ? 'connect' : 'install' }\n\t\t\t\tsteps={ [ installStep, this.getConnectStep() ] }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nPayPal.defaultProps = {\n\tmanualConfig: false, // WCS is not required for the PayPal OAuth flow, so we can default to smooth connection.\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getOption, isOptionsUpdating } = select( OPTIONS_STORE_NAME );\n\t\tconst { getActivePlugins } = select( PLUGINS_STORE_NAME );\n\t\tconst options = getOption( 'woocommerce_ppec_paypal_settings' );\n\t\tconst activePlugins = getActivePlugins();\n\n\t\treturn {\n\t\t\tactivePlugins,\n\t\t\toptions,\n\t\t\tisOptionsUpdating: isOptionsUpdating(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( PayPal );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Button } from '@wordpress/components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * WooCommerce dependencies\n */\nimport { getQuery } from '@woocommerce/navigation';\nimport { WC_ADMIN_NAMESPACE } from 'wc-api/constants';\nimport { Stepper } from '@woocommerce/components';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\nimport { OPTIONS_STORE_NAME } from '@woocommerce/data';\n\nclass Square extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisPending: false,\n\t\t};\n\n\t\tthis.connect = this.connect.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { createNotice, markConfigured } = this.props;\n\t\tconst query = getQuery();\n\t\t// Handle redirect back from Square\n\t\tif ( query[ 'square-connect' ] ) {\n\t\t\tif ( query[ 'square-connect' ] === '1' ) {\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'success',\n\t\t\t\t\t__( 'Square connected successfully.', 'woocommerce-admin' )\n\t\t\t\t);\n\t\t\t\tmarkConfigured( 'square' );\n\t\t\t}\n\t\t}\n\t}\n\n\tasync connect() {\n\t\tconst {\n\t\t\tcreateNotice,\n\t\t\thasCbdIndustry,\n\t\t\toptions,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\t\tthis.setState( { isPending: true } );\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_square_credit_card_settings: {\n\t\t\t\t...options.woocommerce_square_credit_card_settings,\n\t\t\t\tenabled: 'yes',\n\t\t\t},\n\t\t} );\n\n\t\tconst errorMessage = __(\n\t\t\t'There was an error connecting to Square. Please try again or skip to connect later in store settings.',\n\t\t\t'woocommerce-admin'\n\t\t);\n\n\t\ttry {\n\t\t\tlet newWindow = null;\n\t\t\tif ( hasCbdIndustry ) {\n\t\t\t\t// It's necessary to declare the new tab before the async call,\n\t\t\t\t// otherwise, it won't be possible to open it.\n\t\t\t\tnewWindow = window.open( '/', '_blank' );\n\t\t\t}\n\n\t\t\tconst result = await apiFetch( {\n\t\t\t\tpath: WC_ADMIN_NAMESPACE + '/plugins/connect-square',\n\t\t\t\tmethod: 'POST',\n\t\t\t} );\n\n\t\t\tif ( ! result || ! result.connectUrl ) {\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t\tcreateNotice( 'error', errorMessage );\n\t\t\t\tif ( hasCbdIndustry ) {\n\t\t\t\t\tnewWindow.close();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setState( { isPending: true } );\n\t\t\tthis.redirect( result.connectUrl, newWindow );\n\t\t} catch ( error ) {\n\t\t\tthis.setState( { isPending: false } );\n\t\t\tcreateNotice( 'error', errorMessage );\n\t\t}\n\t}\n\n\tredirect( connectUrl, newWindow ) {\n\t\tif ( newWindow ) {\n\t\t\tnewWindow.location.href = connectUrl;\n\t\t\twindow.location = getAdminLink( 'admin.php?page=wc-admin' );\n\t\t} else {\n\t\t\twindow.location = connectUrl;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { installStep } = this.props;\n\t\tconst { isPending } = this.state;\n\n\t\treturn (\n\t\t\t<Stepper\n\t\t\t\tisVertical\n\t\t\t\tisPending={ ! installStep.isComplete || isPending }\n\t\t\t\tcurrentStep={ installStep.isComplete ? 'connect' : 'install' }\n\t\t\t\tsteps={ [\n\t\t\t\t\tinstallStep,\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'connect',\n\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t'Connect your Square account',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tdescription: __(\n\t\t\t\t\t\t\t'A Square account is required to process payments. You will be redirected to the Square website to create the connection.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcontent: (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\t\t\tonClick={ this.connect }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Connect', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getOption, isResolving } = select( OPTIONS_STORE_NAME );\n\t\tconst options = getOption( 'woocommerce_square_credit_card_settings' );\n\t\tconst optionsIsRequesting = isResolving( 'getOption', [\n\t\t\t'woocommerce_square_credit_card_settings',\n\t\t] );\n\n\t\treturn {\n\t\t\toptions,\n\t\t\toptionsIsRequesting,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( Square );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport apiFetch from '@wordpress/api-fetch';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport interpolateComponents from 'interpolate-components';\nimport { Button } from '@wordpress/components';\n\n/**\n * WooCommerce dependencies\n */\nimport { Form, Link, Stepper, TextControl } from '@woocommerce/components';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\nimport { getQuery } from '@woocommerce/navigation';\nimport { WCS_NAMESPACE } from 'wc-api/constants';\nimport { PLUGINS_STORE_NAME, OPTIONS_STORE_NAME } from '@woocommerce/data';\n\nclass Stripe extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\toAuthConnectFailed: false,\n\t\t\tconnectURL: null,\n\t\t\tisPending: false,\n\t\t};\n\n\t\tthis.updateSettings = this.updateSettings.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { stripeSettings } = this.props;\n\t\tconst query = getQuery();\n\n\t\t// Handle redirect back from Stripe.\n\t\tif ( query[ 'stripe-connect' ] && query[ 'stripe-connect' ] === '1' ) {\n\t\t\tconst isStripeConnected =\n\t\t\t\tstripeSettings.publishable_key && stripeSettings.secret_key;\n\n\t\t\tif ( isStripeConnected ) {\n\t\t\t\tthis.completeMethod();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif ( ! this.requiresManualConfig() ) {\n\t\t\tthis.fetchOAuthConnectURL();\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { activePlugins } = this.props;\n\n\t\tif (\n\t\t\t! prevProps.activePlugins.includes(\n\t\t\t\t'woocommerce-gateway-stripe'\n\t\t\t) &&\n\t\t\tactivePlugins.includes( 'woocommerce-gateway-stripe' )\n\t\t) {\n\t\t\tthis.fetchOAuthConnectURL();\n\t\t}\n\t}\n\n\trequiresManualConfig() {\n\t\tconst { activePlugins, isJetpackConnected } = this.props;\n\t\tconst { oAuthConnectFailed } = this.state;\n\n\t\treturn (\n\t\t\t! isJetpackConnected ||\n\t\t\t! activePlugins.includes( 'woocommerce-services' ) ||\n\t\t\toAuthConnectFailed\n\t\t);\n\t}\n\n\tcompleteMethod() {\n\t\tconst { createNotice, markConfigured } = this.props;\n\n\t\tthis.setState( { isPending: false } );\n\n\t\tcreateNotice(\n\t\t\t'success',\n\t\t\t__( 'Stripe connected successfully.', 'woocommerce-admin' )\n\t\t);\n\n\t\tmarkConfigured( 'stripe' );\n\t}\n\n\tasync fetchOAuthConnectURL() {\n\t\tconst { activePlugins } = this.props;\n\t\tif ( ! activePlugins.includes( 'woocommerce-gateway-stripe' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tthis.setState( { isPending: true } );\n\t\t\tconst result = await apiFetch( {\n\t\t\t\tpath: WCS_NAMESPACE + '/connect/stripe/oauth/init',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\treturnUrl: getAdminLink(\n\t\t\t\t\t\t'admin.php?page=wc-admin&task=payments&method=stripe&stripe-connect=1'\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t} );\n\t\t\tif ( ! result || ! result.oauthUrl ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\toAuthConnectFailed: true,\n\t\t\t\t\tisPending: false,\n\t\t\t\t} );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.setState( {\n\t\t\t\tconnectURL: result.oauthUrl,\n\t\t\t\tisPending: false,\n\t\t\t} );\n\t\t} catch ( error ) {\n\t\t\tthis.setState( {\n\t\t\t\toAuthConnectFailed: true,\n\t\t\t\tisPending: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\trenderConnectButton() {\n\t\tconst { connectURL } = this.state;\n\t\treturn (\n\t\t\t<Button isPrimary href={ connectURL }>\n\t\t\t\t{ __( 'Connect', 'woocommerce-admin' ) }\n\t\t\t</Button>\n\t\t);\n\t}\n\n\tasync updateSettings( values ) {\n\t\tconst { updateOptions, stripeSettings, createNotice } = this.props;\n\n\t\tconst update = await updateOptions( {\n\t\t\twoocommerce_stripe_settings: {\n\t\t\t\t...stripeSettings,\n\t\t\t\tpublishable_key: values.publishable_key,\n\t\t\t\tsecret_key: values.secret_key,\n\t\t\t\tenabled: 'yes',\n\t\t\t},\n\t\t} );\n\n\t\tif ( update.success ) {\n\t\t\tthis.completeMethod();\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'error',\n\t\t\t\t__(\n\t\t\t\t\t'There was a problem saving your payment setings',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tgetInitialConfigValues() {\n\t\treturn {\n\t\t\tpublishable_key: '',\n\t\t\tsecret_key: '',\n\t\t};\n\t}\n\n\tvalidateManualConfig( values ) {\n\t\tconst errors = {};\n\n\t\tif ( values.publishable_key.match( /^pk_live_/ ) === null ) {\n\t\t\terrors.publishable_key = __(\n\t\t\t\t'Please enter a valid publishable key. Valid keys start with \"pk_live\".',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\t\tif ( values.secret_key.match( /^[rs]k_live_/ ) === null ) {\n\t\t\terrors.secret_key = __(\n\t\t\t\t'Please enter a valid secret key. Valid keys start with \"sk_live\" or \"rk_live\".',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\treturn errors;\n\t}\n\n\trenderManualConfig() {\n\t\tconst { isOptionsUpdating } = this.props;\n\t\tconst stripeHelp = interpolateComponents( {\n\t\t\tmixedString: __(\n\t\t\t\t'Your API details can be obtained from your {{docsLink}}Stripe account{{/docsLink}}.  Don’t have a Stripe account? {{registerLink}}Create one.{{/registerLink}}',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tdocsLink: (\n\t\t\t\t\t<Link\n\t\t\t\t\t\thref=\"https://stripe.com/docs/keys\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tregisterLink: (\n\t\t\t\t\t<Link\n\t\t\t\t\t\thref=\"https://dashboard.stripe.com/register\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t},\n\t\t} );\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialConfigValues() }\n\t\t\t\tonSubmitCallback={ this.updateSettings }\n\t\t\t\tvalidate={ this.validateManualConfig }\n\t\t\t>\n\t\t\t\t{ ( { getInputProps, handleSubmit } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Live Publishable Key',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'publishable_key' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Live Secret Key',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'secret_key' ) }\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tisBusy={ isOptionsUpdating }\n\t\t\t\t\t\t\t\tonClick={ handleSubmit }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Proceed', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<p>{ stripeHelp }</p>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Form>\n\t\t);\n\t}\n\n\tgetConnectStep() {\n\t\tconst { connectURL, isPending, oAuthConnectFailed } = this.state;\n\n\t\tconst connectStep = {\n\t\t\tkey: 'connect',\n\t\t\tlabel: __( 'Connect your Stripe account', 'woocommerce-admin' ),\n\t\t};\n\n\t\tif ( isPending ) {\n\t\t\treturn connectStep;\n\t\t}\n\n\t\tif ( ! oAuthConnectFailed && connectURL ) {\n\t\t\treturn {\n\t\t\t\t...connectStep,\n\t\t\t\tdescription: __(\n\t\t\t\t\t'A Stripe account is required to process payments.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: this.renderConnectButton(),\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\t...connectStep,\n\t\t\tdescription: __(\n\t\t\t\t'Connect your store to your Stripe account. Don’t have a Stripe account? Create one.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcontent: this.renderManualConfig(),\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { installStep, isOptionsUpdating } = this.props;\n\t\tconst { isPending } = this.state;\n\n\t\treturn (\n\t\t\t<Stepper\n\t\t\t\tisVertical\n\t\t\t\tisPending={\n\t\t\t\t\t! installStep.isComplete || isOptionsUpdating || isPending\n\t\t\t\t}\n\t\t\t\tcurrentStep={ installStep.isComplete ? 'connect' : 'install' }\n\t\t\t\tsteps={ [ installStep, this.getConnectStep() ] }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getOption, isOptionsUpdating } = select( OPTIONS_STORE_NAME );\n\t\tconst { getActivePlugins, isJetpackConnected } = select(\n\t\t\tPLUGINS_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tactivePlugins: getActivePlugins(),\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tisOptionsUpdating: isOptionsUpdating(),\n\t\t\tstripeSettings: getOption( 'woocommerce_stripe_settings' ) || [],\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( Stripe );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { getQuery } from '@woocommerce/navigation';\n\nclass WCPay extends Component {\n\tcomponentDidMount() {\n\t\tconst { createNotice, markConfigured } = this.props;\n\t\tconst query = getQuery();\n\t\t// Handle redirect back from WCPay on-boarding\n\t\tif ( query[ 'wcpay-connection-success' ] ) {\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t'WooCommerce Payments connected successfully.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\tmarkConfigured( 'wcpay' );\n\t\t}\n\t}\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default withDispatch( ( dispatch ) => {\n\tconst { createNotice } = dispatch( 'core/notices' );\n\treturn {\n\t\tcreateNotice,\n\t};\n} )( WCPay );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\n\n/**\n * WooCommerce dependencies\n */\nimport { Card, List } from '@woocommerce/components';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport { recordEvent } from 'lib/tracks';\n\nconst subTasks = [\n\t{\n\t\ttitle: __( 'Add manually (recommended)', 'woocommerce-admin' ),\n\t\tcontent: __(\n\t\t\t'For small stores we recommend adding products manually',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <i className=\"material-icons-outlined\">add_box</i>,\n\t\tafter: <i className=\"material-icons-outlined\">chevron_right</i>,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', { method: 'manually' } ),\n\t\thref: getAdminLink(\n\t\t\t'post-new.php?post_type=product&wc_onboarding_active_task=products&tutorial=true'\n\t\t),\n\t},\n\t{\n\t\ttitle: __( 'Import', 'woocommerce-admin' ),\n\t\tcontent: __(\n\t\t\t'For larger stores we recommend importing all products at once via CSV file',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <i className=\"material-icons-outlined\">import_export</i>,\n\t\tafter: <i className=\"material-icons-outlined\">chevron_right</i>,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', { method: 'import' } ),\n\t\thref: getAdminLink(\n\t\t\t'edit.php?post_type=product&page=product_importer&wc_onboarding_active_task=product-import'\n\t\t),\n\t},\n\t{\n\t\ttitle: __( 'Migrate', 'woocommerce-admin' ),\n\t\tcontent: __(\n\t\t\t'For stores currently selling elsewhere we suggest using a product migration service',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <i className=\"material-icons-outlined\">cloud_download</i>,\n\t\tafter: <i className=\"material-icons-outlined\">chevron_right</i>,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', { method: 'migrate' } ),\n\t\t// @todo This should be replaced with the in-app purchase iframe when ready.\n\t\thref: 'https://woocommerce.com/products/cart2cart/',\n\t\ttarget: '_blank',\n\t},\n];\n\nexport default class Products extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Card className=\"woocommerce-task-card\">\n\t\t\t\t\t<List items={ subTasks } />\n\t\t\t\t</Card>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { difference, filter } from 'lodash';\nimport interpolateComponents from 'interpolate-components';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Card, Link, Stepper, Plugins } from '@woocommerce/components';\nimport { getAdminLink, getSetting } from '@woocommerce/wc-admin-settings';\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport { SETTINGS_STORE_NAME, PLUGINS_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport Connect from 'dashboard/components/connect';\nimport { getCountryCode } from 'dashboard/utils';\nimport StoreLocation from '../steps/location';\nimport ShippingRates from './rates';\nimport { recordEvent } from 'lib/tracks';\n\nclass Shipping extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.initialState = {\n\t\t\tisPending: false,\n\t\t\tstep: 'store_location',\n\t\t\tshippingZones: [],\n\t\t};\n\n\t\t// Cache active plugins to prevent removal mid-step.\n\t\tthis.activePlugins = props.activePlugins;\n\t\tthis.state = this.initialState;\n\t\tthis.completeStep = this.completeStep.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tthis.setState( this.initialState );\n\t}\n\n\tasync fetchShippingZones() {\n\t\tthis.setState( { isPending: true } );\n\t\tconst { countryCode, countryName } = this.props;\n\n\t\t// @todo The following fetches for shipping information should be moved into\n\t\t// the wc-api to make these methods and states more readily available.\n\t\tconst shippingZones = [];\n\t\tconst zones = await apiFetch( { path: '/wc/v3/shipping/zones' } );\n\t\tlet hasCountryZone = false;\n\n\t\tawait Promise.all(\n\t\t\tzones.map( async ( zone ) => {\n\t\t\t\t// \"Rest of the world zone\"\n\t\t\t\tif ( zone.id === 0 ) {\n\t\t\t\t\tzone.methods = await apiFetch( {\n\t\t\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/methods`,\n\t\t\t\t\t} );\n\t\t\t\t\tzone.name = __( 'Rest of the world', 'woocommerce-admin' );\n\t\t\t\t\tzone.toggleable = true;\n\t\t\t\t\tshippingZones.push( zone );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Return any zone with a single location matching the country zone.\n\t\t\t\tzone.locations = await apiFetch( {\n\t\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/locations`,\n\t\t\t\t} );\n\t\t\t\tconst countryLocation = zone.locations.find(\n\t\t\t\t\t( location ) => countryCode === location.code\n\t\t\t\t);\n\t\t\t\tif ( countryLocation ) {\n\t\t\t\t\tzone.methods = await apiFetch( {\n\t\t\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/methods`,\n\t\t\t\t\t} );\n\t\t\t\t\tshippingZones.push( zone );\n\t\t\t\t\thasCountryZone = true;\n\t\t\t\t}\n\t\t\t} )\n\t\t);\n\n\t\t// Create the default store country zone if it doesn't exist.\n\t\tif ( ! hasCountryZone ) {\n\t\t\tconst zone = await apiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: '/wc/v3/shipping/zones',\n\t\t\t\tdata: { name: countryName },\n\t\t\t} );\n\t\t\tzone.locations = await apiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/locations`,\n\t\t\t\tdata: [ { code: countryCode, type: 'country' } ],\n\t\t\t} );\n\t\t\tshippingZones.push( zone );\n\t\t}\n\n\t\tshippingZones.reverse();\n\n\t\tthis.setState( { isPending: false, shippingZones } );\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState ) {\n\t\tconst { countryCode, settings } = this.props;\n\t\tconst {\n\t\t\twoocommerce_store_address: storeAddress,\n\t\t\twoocommerce_default_country: defaultCountry,\n\t\t\twoocommerce_store_postcode: storePostCode,\n\t\t} = settings;\n\t\tconst { step } = this.state;\n\n\t\tif (\n\t\t\tstep === 'rates' &&\n\t\t\t( prevProps.countryCode !== countryCode ||\n\t\t\t\tprevState.step !== 'rates' )\n\t\t) {\n\t\t\tthis.fetchShippingZones();\n\t\t}\n\n\t\tconst isCompleteAddress = Boolean(\n\t\t\tstoreAddress && defaultCountry && storePostCode\n\t\t);\n\n\t\tif ( step === 'store_location' && isCompleteAddress ) {\n\t\t\tthis.completeStep();\n\t\t}\n\t}\n\n\tcompleteStep() {\n\t\tconst { createNotice } = this.props;\n\t\tconst { step } = this.state;\n\t\tconst steps = this.getSteps();\n\t\tconst currentStepIndex = steps.findIndex( ( s ) => s.key === step );\n\t\tconst nextStep = steps[ currentStepIndex + 1 ];\n\n\t\tif ( nextStep ) {\n\t\t\tthis.setState( { step: nextStep.key } );\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t\"📦 Shipping is done! Don't worry, you can always change it later.\",\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t}\n\t}\n\n\tgetPluginsToActivate() {\n\t\tconst { countryCode } = this.props;\n\n\t\tconst plugins = [];\n\t\tif ( [ 'GB', 'CA', 'AU' ].includes( countryCode ) ) {\n\t\t\tplugins.push( 'woocommerce-shipstation-integration' );\n\t\t} else if ( countryCode === 'US' ) {\n\t\t\tplugins.push( 'woocommerce-services' );\n\t\t\tplugins.push( 'jetpack' );\n\t\t}\n\t\treturn difference( plugins, this.activePlugins );\n\t}\n\n\tgetSteps() {\n\t\tconst { countryCode, isJetpackConnected } = this.props;\n\t\tconst pluginsToActivate = this.getPluginsToActivate();\n\t\tconst requiresJetpackConnection =\n\t\t\t! isJetpackConnected && countryCode === 'US';\n\n\t\tconst steps = [\n\t\t\t{\n\t\t\t\tkey: 'store_location',\n\t\t\t\tlabel: __( 'Set store location', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'The address from which your business operates',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<StoreLocation\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonComplete={ ( values ) => {\n\t\t\t\t\t\t\tconst country = getCountryCode(\n\t\t\t\t\t\t\t\tvalues.countryState\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_set_location', {\n\t\t\t\t\t\t\t\tcountry,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'rates',\n\t\t\t\tlabel: __( 'Set shipping costs', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Define how much customers pay to ship to different destinations',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<ShippingRates\n\t\t\t\t\t\tbuttonText={\n\t\t\t\t\t\t\tpluginsToActivate.length ||\n\t\t\t\t\t\t\trequiresJetpackConnection\n\t\t\t\t\t\t\t\t? __( 'Proceed', 'woocommerce-admin' )\n\t\t\t\t\t\t\t\t: __( 'Complete task', 'woocommerce-admin' )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshippingZones={ this.state.shippingZones }\n\t\t\t\t\t\tonComplete={ this.completeStep }\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'label_printing',\n\t\t\t\tlabel: __(\n\t\t\t\t\t'Enable shipping label printing',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tdescription: pluginsToActivate.includes(\n\t\t\t\t\t'woocommerce-shipstation-integration'\n\t\t\t\t)\n\t\t\t\t\t? interpolateComponents( {\n\t\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t\t'We recommend using ShipStation to save time at the post office by printing your shipping ' +\n\t\t\t\t\t\t\t\t\t'labels at home. Try ShipStation free for 30 days. {{link}}Learn more{{/link}}.',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\tlink: (\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\thref=\"https://woocommerce.com/products/shipstation-integration\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t  } )\n\t\t\t\t\t: __(\n\t\t\t\t\t\t\t'With WooCommerce Services and Jetpack you can save time at the ' +\n\t\t\t\t\t\t\t\t'Post Office by printing your shipping labels at home',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t  ),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Plugins\n\t\t\t\t\t\tonComplete={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_label_printing', {\n\t\t\t\t\t\t\t\tinstall: true,\n\t\t\t\t\t\t\t\tpluginsToActivate,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonSkip={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_label_printing', {\n\t\t\t\t\t\t\t\tinstall: false,\n\t\t\t\t\t\t\t\tpluginsToActivate,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tpluginSlugs={ pluginsToActivate }\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: pluginsToActivate.length,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'connect',\n\t\t\t\tlabel: __( 'Connect your store', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Connect your store to WordPress.com to enable label printing',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Connect\n\t\t\t\t\t\tredirectUrl={ getAdminLink(\n\t\t\t\t\t\t\t'admin.php?page=wc-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tcompleteStep={ this.completeStep }\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonConnect={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_connect_store' );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: requiresJetpackConnection,\n\t\t\t},\n\t\t];\n\n\t\treturn filter( steps, ( step ) => step.visible );\n\t}\n\n\trender() {\n\t\tconst { isPending, step } = this.state;\n\t\tconst { isSettingsRequesting } = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-shipping\">\n\t\t\t\t<Card className=\"is-narrow\">\n\t\t\t\t\t<Stepper\n\t\t\t\t\t\tisPending={ isPending || isSettingsRequesting }\n\t\t\t\t\t\tisVertical\n\t\t\t\t\t\tcurrentStep={ step }\n\t\t\t\t\t\tsteps={ this.getSteps() }\n\t\t\t\t\t/>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSettings,\n\t\t\tgetSettingsError,\n\t\t\tisGetSettingsRequesting,\n\t\t} = select( SETTINGS_STORE_NAME );\n\t\tconst { getActivePlugins, isJetpackConnected } = select(\n\t\t\tPLUGINS_STORE_NAME\n\t\t);\n\n\t\tconst { general: settings = {} } = getSettings( 'general' );\n\t\tconst isSettingsError = Boolean( getSettingsError( 'general' ) );\n\t\tconst isSettingsRequesting = isGetSettingsRequesting( 'general' );\n\n\t\tconst countryCode = getCountryCode(\n\t\t\tsettings.woocommerce_default_country\n\t\t);\n\n\t\tconst { countries = [] } = getSetting( 'dataEndpoints', {} );\n\t\tconst country = countryCode\n\t\t\t? countries.find( ( c ) => c.code === countryCode )\n\t\t\t: null;\n\t\tconst countryName = country ? country.name : null;\n\t\tconst activePlugins = getActivePlugins();\n\n\t\treturn {\n\t\t\tcountryCode,\n\t\t\tcountryName,\n\t\t\tisSettingsError,\n\t\t\tisSettingsRequesting,\n\t\t\tsettings,\n\t\t\tactivePlugins,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateAndPersistSettingsForGroup } = dispatch(\n\t\t\tSETTINGS_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t};\n\t} )\n)( Shipping );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Button, FormToggle } from '@wordpress/components';\nimport PropTypes from 'prop-types';\n\n/**\n * WooCommerce dependencies\n */\nimport { Flag, Form, TextControlWithAffixes } from '@woocommerce/components';\nimport { getSetting, setSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport { recordEvent } from 'lib/tracks';\nimport { CurrencyContext } from 'lib/currency-context';\n\nclass ShippingRates extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.updateShippingZones = this.updateShippingZones.bind( this );\n\t}\n\n\tgetShippingMethods( zone, type = null ) {\n\t\t// Sometimes the wc/v3/shipping/zones response does not include a methods attribute, return early if so.\n\t\tif ( ! zone || ! zone.methods || ! Array.isArray( zone.methods ) ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif ( ! type ) {\n\t\t\treturn zone.methods;\n\t\t}\n\n\t\treturn zone.methods\n\t\t\t? zone.methods.filter( ( method ) => method.method_id === type )\n\t\t\t: [];\n\t}\n\n\tdisableShippingMethods( zone, methods ) {\n\t\tif ( ! methods.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tmethods.forEach( ( method ) => {\n\t\t\tapiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/methods/${ method.instance_id }`,\n\t\t\t\tdata: {\n\t\t\t\t\tenabled: false,\n\t\t\t\t},\n\t\t\t} );\n\t\t} );\n\t}\n\n\tasync updateShippingZones( values ) {\n\t\tconst { createNotice, shippingZones } = this.props;\n\n\t\tlet restOfTheWorld = false;\n\t\tlet shippingCost = false;\n\t\tshippingZones.forEach( ( zone ) => {\n\t\t\tif ( zone.id === 0 ) {\n\t\t\t\trestOfTheWorld =\n\t\t\t\t\tzone.toggleable && values[ `${ zone.id }_enabled` ];\n\t\t\t} else {\n\t\t\t\tshippingCost =\n\t\t\t\t\tvalues[ `${ zone.id }_rate` ] !== '' &&\n\t\t\t\t\tparseFloat( values[ `${ zone.id }_rate` ] ) !==\n\t\t\t\t\t\tparseFloat( 0 );\n\t\t\t}\n\n\t\t\tconst shippingMethods = this.getShippingMethods( zone );\n\t\t\tconst methodType =\n\t\t\t\tparseFloat( values[ `${ zone.id }_rate` ] ) === parseFloat( 0 )\n\t\t\t\t\t? 'free_shipping'\n\t\t\t\t\t: 'flat_rate';\n\t\t\tconst shippingMethod = this.getShippingMethods( zone, methodType )\n\t\t\t\t.length\n\t\t\t\t? this.getShippingMethods( zone, methodType )[ 0 ]\n\t\t\t\t: null;\n\n\t\t\tif ( zone.toggleable && ! values[ `${ zone.id }_enabled` ] ) {\n\t\t\t\t// Disable any shipping methods that exist if toggled off.\n\t\t\t\tthis.disableShippingMethods( zone, shippingMethods );\n\t\t\t\treturn;\n\t\t\t} else if ( shippingMethod ) {\n\t\t\t\t// Disable all methods except the one being updated.\n\t\t\t\tconst methodsToDisable = shippingMethods.filter(\n\t\t\t\t\t( method ) =>\n\t\t\t\t\t\tmethod.instance_id !== shippingMethod.instance_id\n\t\t\t\t);\n\t\t\t\tthis.disableShippingMethods( zone, methodsToDisable );\n\t\t\t}\n\n\t\t\tapiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: shippingMethod\n\t\t\t\t\t? // Update the first existing method if one exists, otherwise create a new one.\n\t\t\t\t\t  `/wc/v3/shipping/zones/${ zone.id }/methods/${ shippingMethod.instance_id }`\n\t\t\t\t\t: `/wc/v3/shipping/zones/${ zone.id }/methods`,\n\t\t\t\tdata: {\n\t\t\t\t\tmethod_id: methodType,\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tsettings: { cost: values[ `${ zone.id }_rate` ] },\n\t\t\t\t},\n\t\t\t} );\n\t\t} );\n\n\t\trecordEvent( 'tasklist_shipping_set_costs', {\n\t\t\tshipping_cost: shippingCost,\n\t\t\trest_world: restOfTheWorld,\n\t\t} );\n\n\t\t// @todo This is a workaround to force the task to mark as complete.\n\t\t// This should probably be updated to use wc-api so we can fetch shipping methods.\n\t\tsetSetting( 'onboarding', {\n\t\t\t...getSetting( 'onboarding', {} ),\n\t\t\tshippingZonesCount: 1,\n\t\t} );\n\n\t\tcreateNotice(\n\t\t\t'success',\n\t\t\t__( 'Your shipping rates have been updated.', 'woocommerce-admin' )\n\t\t);\n\n\t\tthis.props.onComplete();\n\t}\n\n\trenderInputPrefix() {\n\t\tconst { symbolPosition, symbol } = this.context.getCurrency();\n\t\tif ( symbolPosition.indexOf( 'right' ) === 0 ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<span className=\"woocommerce-shipping-rate__control-prefix\">\n\t\t\t\t{ symbol }\n\t\t\t</span>\n\t\t);\n\t}\n\n\trenderInputSuffix( rate ) {\n\t\tconst { symbolPosition, symbol } = this.context.getCurrency();\n\t\tif ( symbolPosition.indexOf( 'right' ) === 0 ) {\n\t\t\treturn (\n\t\t\t\t<span className=\"woocommerce-shipping-rate__control-suffix\">\n\t\t\t\t\t{ symbol }\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\n\t\treturn parseFloat( rate ) === parseFloat( 0 ) ? (\n\t\t\t<span className=\"woocommerce-shipping-rate__control-suffix\">\n\t\t\t\t{ __( 'Free shipping', 'woocommerce-admin' ) }\n\t\t\t</span>\n\t\t) : null;\n\t}\n\n\tgetFormattedRate( value ) {\n\t\tconst { formatDecimalString } = this.context;\n\t\tconst currencyString = formatDecimalString( value );\n\t\tif ( ! value.length || ! currencyString.length ) {\n\t\t\treturn formatDecimalString( 0 );\n\t\t}\n\n\t\treturn formatDecimalString( value );\n\t}\n\n\tgetInitialValues() {\n\t\tconst { formatDecimalString } = this.context;\n\t\tconst values = {};\n\n\t\tthis.props.shippingZones.forEach( ( zone ) => {\n\t\t\tconst shippingMethods = this.getShippingMethods( zone );\n\t\t\tconst rate =\n\t\t\t\tshippingMethods.length && shippingMethods[ 0 ].settings.cost\n\t\t\t\t\t? this.getFormattedRate(\n\t\t\t\t\t\t\tshippingMethods[ 0 ].settings.cost.value\n\t\t\t\t\t  )\n\t\t\t\t\t: formatDecimalString( 0 );\n\t\t\tvalues[ `${ zone.id }_rate` ] = rate;\n\n\t\t\tif ( shippingMethods.length && shippingMethods[ 0 ].enabled ) {\n\t\t\t\tvalues[ `${ zone.id }_enabled` ] = true;\n\t\t\t} else {\n\t\t\t\tvalues[ `${ zone.id }_enabled` ] = false;\n\t\t\t}\n\t\t} );\n\n\t\treturn values;\n\t}\n\n\tvalidate( values ) {\n\t\tconst errors = {};\n\n\t\tconst rates = Object.keys( values ).filter( ( field ) =>\n\t\t\tfield.endsWith( '_rate' )\n\t\t);\n\n\t\trates.forEach( ( rate ) => {\n\t\t\tif ( values[ rate ] < 0 ) {\n\t\t\t\terrors[ rate ] = __(\n\t\t\t\t\t'Shipping rates can not be negative numbers.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\treturn errors;\n\t}\n\n\trender() {\n\t\tconst { buttonText, shippingZones } = this.props;\n\n\t\tif ( ! shippingZones.length ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialValues() }\n\t\t\t\tonSubmitCallback={ this.updateShippingZones }\n\t\t\t\tvalidate={ this.validate }\n\t\t\t>\n\t\t\t\t{ ( {\n\t\t\t\t\tgetInputProps,\n\t\t\t\t\thandleSubmit,\n\t\t\t\t\tsetTouched,\n\t\t\t\t\tsetValue,\n\t\t\t\t\tvalues,\n\t\t\t\t} ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rates\">\n\t\t\t\t\t\t\t\t{ shippingZones.map( ( zone ) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"woocommerce-shipping-rate\"\n\t\t\t\t\t\t\t\t\t\tkey={ zone.id }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rate__icon\">\n\t\t\t\t\t\t\t\t\t\t\t{ zone.locations ? (\n\t\t\t\t\t\t\t\t\t\t\t\tzone.locations.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t( location ) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flag\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcode={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocation.code\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocation.code\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t// Icon used for zones without locations or \"Rest of the world\".\n\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"material-icons-outlined\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tpublic\n\t\t\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rate__main\">\n\t\t\t\t\t\t\t\t\t\t\t{ zone.toggleable ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor={ `woocommerce-shipping-rate__toggle-${ zone.id }` }\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"woocommerce-shipping-rate__name\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ zone.name }\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormToggle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={ `woocommerce-shipping-rate__toggle-${ zone.id }` }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ ...getInputProps(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_enabled`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rate__name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ zone.name }\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t{ ( ! zone.toggleable ||\n\t\t\t\t\t\t\t\t\t\t\t\tvalues[\n\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_enabled`\n\t\t\t\t\t\t\t\t\t\t\t\t] ) && (\n\t\t\t\t\t\t\t\t\t\t\t\t<TextControlWithAffixes\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Shipping cost',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ ...getInputProps(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTouched(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.getFormattedRate(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\t\tprefix={ this.renderInputPrefix() }\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuffix={ this.renderInputSuffix(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"muriel-input-text woocommerce-shipping-rate__control-wrapper\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button isPrimary onClick={ handleSubmit }>\n\t\t\t\t\t\t\t\t{ buttonText ||\n\t\t\t\t\t\t\t\t\t__( 'Update', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Form>\n\t\t);\n\t}\n}\n\nShippingRates.propTypes = {\n\t/**\n\t * Text displayed on the primary button.\n\t */\n\tbuttonText: PropTypes.string,\n\t/**\n\t * Function used to mark the step complete.\n\t */\n\tonComplete: PropTypes.func.isRequired,\n\t/**\n\t * Function to create a transient notice in the store.\n\t */\n\tcreateNotice: PropTypes.func.isRequired,\n\t/**\n\t * Array of shipping zones returned from the WC REST API with added\n\t * `methods` and `locations` properties appended from separate API calls.\n\t */\n\tshippingZones: PropTypes.array,\n};\n\nShippingRates.defaultProps = {\n\tshippingZones: [],\n};\n\nShippingRates.contextType = CurrencyContext;\n\nexport default ShippingRates;\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\n\n/**\n * WooCommerce dependencies\n */\nimport { Form } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nimport {\n\tStoreAddress,\n\tvalidateStoreAddress,\n} from 'dashboard/components/settings/general/store-address';\n\nexport default class StoreLocation extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onSubmit = this.onSubmit.bind( this );\n\t}\n\n\tasync onSubmit( values ) {\n\t\tconst {\n\t\t\tonComplete,\n\t\t\tcreateNotice,\n\t\t\tisSettingsError,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t} = this.props;\n\n\t\tawait updateAndPersistSettingsForGroup( 'general', {\n\t\t\tgeneral: {\n\t\t\t\twoocommerce_store_address: values.addressLine1,\n\t\t\t\twoocommerce_store_address_2: values.addressLine2,\n\t\t\t\twoocommerce_default_country: values.countryState,\n\t\t\t\twoocommerce_store_city: values.city,\n\t\t\t\twoocommerce_store_postcode: values.postCode,\n\t\t\t},\n\t\t} );\n\n\t\tif ( ! isSettingsError ) {\n\t\t\tonComplete( values );\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'error',\n\t\t\t\t__(\n\t\t\t\t\t'There was a problem saving your store location.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tgetInitialValues() {\n\t\tconst { settings } = this.props;\n\n\t\tconst {\n\t\t\twoocommerce_store_address: storeAddress,\n\t\t\twoocommerce_store_address_2: storeAddress2,\n\t\t\twoocommerce_store_city: storeCity,\n\t\t\twoocommerce_default_country: defaultCountry,\n\t\t\twoocommerce_store_postcode: storePostcode,\n\t\t} = settings;\n\n\t\treturn {\n\t\t\taddressLine1: storeAddress || '',\n\t\t\taddressLine2: storeAddress2 || '',\n\t\t\tcity: storeCity || '',\n\t\t\tcountryState: defaultCountry || '',\n\t\t\tpostCode: storePostcode || '',\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { isSettingsRequesting } = this.props;\n\n\t\tif ( isSettingsRequesting ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialValues() }\n\t\t\t\tonSubmitCallback={ this.onSubmit }\n\t\t\t\tvalidate={ validateStoreAddress }\n\t\t\t>\n\t\t\t\t{ ( { getInputProps, handleSubmit, setValue } ) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<StoreAddress\n\t\t\t\t\t\t\tgetInputProps={ getInputProps }\n\t\t\t\t\t\t\tsetValue={ setValue }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button isPrimary onClick={ handleSubmit }>\n\t\t\t\t\t\t\t{ __( 'Continue', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t</Form>\n\t\t);\n\t}\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { difference, filter } from 'lodash';\nimport interpolateComponents from 'interpolate-components';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Card, H, Link, Stepper, Plugins } from '@woocommerce/components';\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport {\n\tgetAdminLink,\n\tgetSetting,\n\tsetSetting,\n} from '@woocommerce/wc-admin-settings';\nimport {\n\tSETTINGS_STORE_NAME,\n\tPLUGINS_STORE_NAME,\n\tOPTIONS_STORE_NAME,\n} from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport Connect from 'dashboard/components/connect';\nimport { getCountryCode } from 'dashboard/utils';\nimport StoreLocation from './steps/location';\nimport { recordEvent, queueRecordEvent } from 'lib/tracks';\n\nclass Tax extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.initialState = {\n\t\t\tisPending: false,\n\t\t\tstepIndex: 0,\n\t\t\tautomatedTaxEnabled: true,\n\t\t\t// Cache the value of pluginsToActivate so that we can show/hide tasks based on it, but not have them update mid task.\n\t\t\tpluginsToActivate: props.pluginsToActivate,\n\t\t};\n\n\t\tthis.state = this.initialState;\n\n\t\tthis.completeStep = this.completeStep.bind( this );\n\t\tthis.configureTaxRates = this.configureTaxRates.bind( this );\n\t\tthis.updateAutomatedTax = this.updateAutomatedTax.bind( this );\n\t\tthis.setIsPending = this.setIsPending.bind( this );\n\t\tthis.shouldShowSuccessScreen = this.shouldShowSuccessScreen.bind(\n\t\t\tthis\n\t\t);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tthis.setState( this.initialState );\n\t}\n\n\tshouldShowSuccessScreen() {\n\t\tconst { stepIndex } = this.state;\n\t\tconst {\n\t\t\tisJetpackConnected,\n\t\t\tpluginsToActivate,\n\t\t\tgeneralSettings,\n\t\t} = this.props;\n\t\tconst {\n\t\t\twoocommerce_store_address: storeAddress,\n\t\t\twoocommerce_default_country: defaultCountry,\n\t\t\twoocommerce_store_postcode: storePostCode,\n\t\t} = generalSettings;\n\t\tconst isCompleteAddress = Boolean(\n\t\t\tstoreAddress && defaultCountry && storePostCode\n\t\t);\n\t\treturn (\n\t\t\tstepIndex !== null &&\n\t\t\tisCompleteAddress &&\n\t\t\t! pluginsToActivate.length &&\n\t\t\tisJetpackConnected &&\n\t\t\tthis.isTaxJarSupported()\n\t\t);\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst {\n\t\t\tgeneralSettings,\n\t\t\tisJetpackConnected,\n\t\t\ttaxSettings,\n\t\t\tisGeneralSettingsRequesting,\n\t\t} = this.props;\n\t\tconst {\n\t\t\twoocommerce_calc_taxes: calcTaxes,\n\t\t\twoocommerce_store_address: storeAddress,\n\t\t\twoocommerce_default_country: defaultCountry,\n\t\t\twoocommerce_store_postcode: storePostCode,\n\t\t} = generalSettings;\n\t\tconst { stepIndex } = this.state;\n\t\tconst currentStep = this.getSteps()[ stepIndex ];\n\t\tconst currentStepKey = currentStep && currentStep.key;\n\n\t\t// If general settings have stopped requesting, check if we should show success screen.\n\t\tif (\n\t\t\tprevProps.isGeneralSettingsRequesting &&\n\t\t\t! isGeneralSettingsRequesting\n\t\t) {\n\t\t\tif ( this.shouldShowSuccessScreen() ) {\n\t\t\t\t/* eslint-disable react/no-did-update-set-state */\n\t\t\t\tthis.setState( { stepIndex: null } );\n\t\t\t\t/* eslint-enable react/no-did-update-set-state */\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\ttaxSettings.wc_connect_taxes_enabled &&\n\t\t\ttaxSettings.wc_connect_taxes_enabled !==\n\t\t\t\tprevProps.taxSettings.wc_connect_taxes_enabled\n\t\t) {\n\t\t\t/* eslint-disable react/no-did-update-set-state */\n\t\t\tthis.setState( {\n\t\t\t\tautomatedTaxEnabled:\n\t\t\t\t\ttaxSettings.wc_connect_taxes_enabled === 'yes'\n\t\t\t\t\t\t? true\n\t\t\t\t\t\t: false,\n\t\t\t} );\n\t\t\t/* eslint-enable react/no-did-update-set-state */\n\t\t}\n\n\t\tif ( currentStepKey === 'connect' && isJetpackConnected ) {\n\t\t\tthis.completeStep();\n\t\t}\n\n\t\tconst isCompleteAddress = Boolean(\n\t\t\tstoreAddress && defaultCountry && storePostCode\n\t\t);\n\n\t\tif ( currentStepKey === 'store_location' && isCompleteAddress ) {\n\t\t\tthis.completeStep();\n\t\t}\n\n\t\tconst {\n\t\t\twoocommerce_calc_taxes: prevCalcTaxes,\n\t\t} = prevProps.generalSettings;\n\t\tif ( prevCalcTaxes === 'no' && calcTaxes === 'yes' ) {\n\t\t\twindow.location = getAdminLink(\n\t\t\t\t'admin.php?page=wc-settings&tab=tax&section=standard'\n\t\t\t);\n\t\t}\n\t}\n\n\tisTaxJarSupported() {\n\t\tconst { countryCode, tosAccepted } = this.props;\n\t\tconst {\n\t\t\tautomatedTaxSupportedCountries = [],\n\t\t\ttaxJarActivated,\n\t\t} = getSetting( 'onboarding', {} );\n\n\t\treturn (\n\t\t\t! taxJarActivated && // WCS integration doesn't work with the official TaxJar plugin.\n\t\t\ttosAccepted &&\n\t\t\tautomatedTaxSupportedCountries.includes( countryCode )\n\t\t);\n\t}\n\n\tcompleteStep() {\n\t\tconst { stepIndex } = this.state;\n\t\tconst steps = this.getSteps();\n\t\tconst nextStep = steps[ stepIndex + 1 ];\n\n\t\tif ( nextStep ) {\n\t\t\tthis.setState( { stepIndex: stepIndex + 1 } );\n\t\t} else {\n\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t}\n\t}\n\n\tasync configureTaxRates() {\n\t\tconst {\n\t\t\tgeneralSettings,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t} = this.props;\n\n\t\tif ( generalSettings.woocommerce_calc_taxes !== 'yes' ) {\n\t\t\tthis.setState( { isPending: true } );\n\t\t\tawait updateAndPersistSettingsForGroup( 'general', {\n\t\t\t\tgeneral: {\n\t\t\t\t\twoocommerce_calc_taxes: 'yes',\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\n\t\twindow.location = getAdminLink(\n\t\t\t'admin.php?page=wc-settings&tab=tax&section=standard&wc_onboarding_active_task=tax'\n\t\t);\n\t}\n\n\tasync updateAutomatedTax() {\n\t\tconst { createNotice, updateAndPersistSettingsForGroup } = this.props;\n\t\tconst { automatedTaxEnabled } = this.state;\n\n\t\tawait updateAndPersistSettingsForGroup( 'tax', {\n\t\t\ttax: {\n\t\t\t\twc_connect_taxes_enabled: automatedTaxEnabled ? 'yes' : 'no',\n\t\t\t},\n\t\t} );\n\n\t\tawait updateAndPersistSettingsForGroup( 'general', {\n\t\t\tgeneral: {\n\t\t\t\twoocommerce_calc_taxes: 'yes',\n\t\t\t},\n\t\t} );\n\n\t\tif (\n\t\t\t! this.props.isTaxSettingsError &&\n\t\t\t! this.props.isGeneralSettingsError\n\t\t) {\n\t\t\t// @todo This is a workaround to force the task to mark as complete.\n\t\t\t// This should probably be updated to use wc-api so we can fetch tax rates.\n\t\t\tsetSetting( 'onboarding', {\n\t\t\t\t...getSetting( 'onboarding', {} ),\n\t\t\t\tisTaxComplete: true,\n\t\t\t} );\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t\"You're awesome! One less item on your to-do list ✅\",\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\tif ( automatedTaxEnabled ) {\n\t\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t\t} else {\n\t\t\t\tthis.configureTaxRates();\n\t\t\t}\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'error',\n\t\t\t\t__(\n\t\t\t\t\t'There was a problem updating your tax settings.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tsetIsPending( value ) {\n\t\tthis.setState( { isPending: value } );\n\t}\n\n\tgetSteps() {\n\t\tconst {\n\t\t\tgeneralSettings,\n\t\t\tisGeneralSettingsRequesting,\n\t\t\tisJetpackConnected,\n\t\t} = this.props;\n\t\tconst { isPending, pluginsToActivate } = this.state;\n\n\t\tconst steps = [\n\t\t\t{\n\t\t\t\tkey: 'store_location',\n\t\t\t\tlabel: __( 'Set store location', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'The address from which your business operates',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<StoreLocation\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonComplete={ ( values ) => {\n\t\t\t\t\t\t\tconst country = getCountryCode(\n\t\t\t\t\t\t\t\tvalues.countryState\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_set_location', {\n\t\t\t\t\t\t\t\tcountry,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tif ( this.shouldShowSuccessScreen() ) {\n\t\t\t\t\t\t\t\tthis.setState( { stepIndex: null } );\n\t\t\t\t\t\t\t\t// Only complete step if another update hasn't already shown succes screen.\n\t\t\t\t\t\t\t} else if ( this.state.stepIndex !== null ) {\n\t\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tisSettingsRequesting={ isGeneralSettingsRequesting }\n\t\t\t\t\t\tsettings={ generalSettings }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'plugins',\n\t\t\t\tlabel: __(\n\t\t\t\t\t'Install Jetpack and WooCommerce Services',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Jetpack and WooCommerce Services allow you to automate sales tax calculations',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Plugins\n\t\t\t\t\t\tonComplete={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_install_extensions', {\n\t\t\t\t\t\t\t\tinstall_extensions: true,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonSkip={ () => {\n\t\t\t\t\t\t\tqueueRecordEvent(\n\t\t\t\t\t\t\t\t'tasklist_tax_install_extensions',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tinstall_extensions: false,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\twindow.location.href = getAdminLink(\n\t\t\t\t\t\t\t\t'admin.php?page=wc-settings&tab=tax&section=standard'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tskipText={ __(\n\t\t\t\t\t\t\t'Set up tax rates manually',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: pluginsToActivate.length && this.isTaxJarSupported(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'connect',\n\t\t\t\tlabel: __( 'Connect your store', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Connect your store to WordPress.com to enable automated sales tax calculations',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Connect\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tsetIsPending={ this.setIsPending }\n\t\t\t\t\t\tonConnect={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_connect_store', {\n\t\t\t\t\t\t\t\tconnect: true,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonSkip={ () => {\n\t\t\t\t\t\t\tqueueRecordEvent( 'tasklist_tax_connect_store', {\n\t\t\t\t\t\t\t\tconnect: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\twindow.location.href = getAdminLink(\n\t\t\t\t\t\t\t\t'admin.php?page=wc-settings&tab=tax&section=standard'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tskipText={ __(\n\t\t\t\t\t\t\t'Set up tax rates manually',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: ! isJetpackConnected && this.isTaxJarSupported(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'manual_configuration',\n\t\t\t\tlabel: __( 'Configure tax rates', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Head over to the tax rate settings screen to configure your tax rates',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_config_rates' );\n\t\t\t\t\t\t\t\tthis.configureTaxRates();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Configure', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{ generalSettings.woocommerce_calc_taxes !==\n\t\t\t\t\t\t\t\t'yes' &&\n\t\t\t\t\t\t\t\tinterpolateComponents( {\n\t\t\t\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t\t\t\t/*eslint-disable max-len*/\n\t\t\t\t\t\t\t\t\t\t'By clicking \"Configure\" you\\'re enabling tax rates and calculations. More info {{link}}here{{/link}}.',\n\t\t\t\t\t\t\t\t\t\t/*eslint-enable max-len*/\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\t\t\tlink: (\n\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"https://docs.woocommerce.com/document/setting-up-taxes-in-woocommerce/#section-1\"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: ! this.isTaxJarSupported(),\n\t\t\t},\n\t\t];\n\n\t\treturn filter( steps, ( step ) => step.visible );\n\t}\n\n\trender() {\n\t\tconst { isPending, stepIndex } = this.state;\n\t\tconst {\n\t\t\tisGeneralSettingsRequesting,\n\t\t\tisTaxSettingsRequesting,\n\t\t\ttaxSettings,\n\t\t} = this.props;\n\t\tconst step = this.getSteps()[ stepIndex ];\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-tax\">\n\t\t\t\t<Card className=\"is-narrow\">\n\t\t\t\t\t{ step ? (\n\t\t\t\t\t\t<Stepper\n\t\t\t\t\t\t\tisPending={\n\t\t\t\t\t\t\t\tisPending ||\n\t\t\t\t\t\t\t\tisGeneralSettingsRequesting ||\n\t\t\t\t\t\t\t\tisTaxSettingsRequesting\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisVertical={ true }\n\t\t\t\t\t\t\tcurrentStep={ step.key }\n\t\t\t\t\t\t\tsteps={ this.getSteps() }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"woocommerce-task-tax__success\">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-task-tax__success-icon\"\n\t\t\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\t\t\taria-labelledby=\"woocommerce-task-tax__success-message\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t🎊\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<H id=\"woocommerce-task-tax__success-message\">\n\t\t\t\t\t\t\t\t{ __( 'Good news!', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</H>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t\t\t\t'{{strong}}Jetpack{{/strong}} and {{strong}}WooCommerce Services{{/strong}} ' +\n\t\t\t\t\t\t\t\t\t\t\t'can automate your sales tax calculations for you.',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\t\t\tstrong: <strong />,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tisBusy={\n\t\t\t\t\t\t\t\t\tObject.keys( taxSettings ).length &&\n\t\t\t\t\t\t\t\t\tisTaxSettingsRequesting\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t'tasklist_tax_setup_automated_proceed',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tsetup_automatically: true,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t{ automatedTaxEnabled: true },\n\t\t\t\t\t\t\t\t\t\tthis.updateAutomatedTax\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Yes please', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t'tasklist_tax_setup_automated_proceed',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tsetup_automatically: false,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t{ automatedTaxEnabled: false },\n\t\t\t\t\t\t\t\t\t\tthis.updateAutomatedTax\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\"No thanks, I'll configure taxes manually\",\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSettings,\n\t\t\tgetSettingsError,\n\t\t\tisGetSettingsRequesting,\n\t\t} = select( SETTINGS_STORE_NAME );\n\t\tconst { getOption } = select( OPTIONS_STORE_NAME );\n\t\tconst { getActivePlugins, isJetpackConnected } = select(\n\t\t\tPLUGINS_STORE_NAME\n\t\t);\n\n\t\tconst { general: generalSettings = {} } = getSettings( 'general' );\n\t\tconst isGeneralSettingsError = Boolean( getSettingsError( 'general' ) );\n\t\tconst isGeneralSettingsRequesting = isGetSettingsRequesting(\n\t\t\t'general'\n\t\t);\n\t\tconst countryCode = getCountryCode(\n\t\t\tgeneralSettings.woocommerce_default_country\n\t\t);\n\n\t\tconst { tax: taxSettings = {} } = getSettings( 'tax' );\n\t\tconst isTaxSettingsError = Boolean( getSettingsError( 'tax' ) );\n\t\tconst isTaxSettingsRequesting = isGetSettingsRequesting( 'tax' );\n\n\t\tconst activePlugins = getActivePlugins();\n\t\tconst pluginsToActivate = difference(\n\t\t\t[ 'jetpack', 'woocommerce-services' ],\n\t\t\tactivePlugins\n\t\t);\n\t\tconst connectOptions = getOption( 'wc_connect_options' ) || {};\n\t\tconst tosAccepted =\n\t\t\tconnectOptions.tos_accepted ||\n\t\t\tgetOption( 'woocommerce_setup_jetpack_opted_in' );\n\n\t\treturn {\n\t\t\tisGeneralSettingsError,\n\t\t\tisGeneralSettingsRequesting,\n\t\t\tgeneralSettings,\n\t\t\tcountryCode,\n\t\t\ttaxSettings,\n\t\t\tisTaxSettingsError,\n\t\t\tisTaxSettingsRequesting,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tpluginsToActivate,\n\t\t\ttosAccepted,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateAndPersistSettingsForGroup } = dispatch(\n\t\t\tSETTINGS_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t};\n\t} )\n)( Tax );\n"],"sourceRoot":""}