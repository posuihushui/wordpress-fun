{"version":3,"sources":["webpack://wc.[modulename]/./client/dashboard/store-performance/index.js","webpack://wc.[modulename]/./client/dashboard/store-performance/style.scss","webpack://wc.[modulename]/./client/dashboard/store-performance/utils.js"],"names":["getSetting","performanceIndicators","indicators","StorePerformance","props","hiddenBlocks","isFirst","isLast","onMove","onRemove","onTitleBlur","onTitleChange","onToggleHiddenBlock","titleInput","Controls","controls","__","onToggle","map","indicator","i","checked","includes","stat","recordEvent","status","key","label","window","wcAdminFeatures","query","primaryRequesting","secondaryRequesting","primaryError","secondaryError","primaryData","secondaryData","userIndicators","defaultDateRange","length","persistedQuery","getPersistedQuery","getDateParamsFromQuery","compare","prevLabel","context","formatCurrency","getCurrency","currency","getIndicatorValues","primaryValue","secondaryValue","delta","reportUrl","reportUrlType","title","renderMenu","renderList","Component","contextType","CurrencyContext","compose","withSelect","select","filter","SETTINGS_STORE_NAME","woocommerce_default_date_range","data","indicatorData","getIndicatorData","getReportUrl","href","primaryItem","getAdminLink","getNewPath","chart","find","secondaryItem","_links","report","isCurrency","format","calculateDelta","value","formatValue","getReportItems","getReportItemsError","isReportItemsRequesting","datesFromQuery","getCurrentDates","endPrimary","primary","before","endSecondary","secondary","statKeys","join","primaryQuery","after","appendTimestamp","isSame","moment","stats","secondaryQuery"],"mappings":"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","file":"chunks/store-performance.bacf49121f088165b3d3.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\n\n/**\n * WooCommerce dependencies\n */\nimport { getDateParamsFromQuery } from 'lib/date';\nimport { getPersistedQuery } from '@woocommerce/navigation';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\nimport { SETTINGS_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport {\n\tEllipsisMenu,\n\tMenuItem,\n\tMenuTitle,\n\tSectionHeader,\n\tSummaryList,\n\tSummaryListPlaceholder,\n\tSummaryNumber,\n} from '@woocommerce/components';\nimport withSelect from 'wc-api/with-select';\nimport './style.scss';\nimport { recordEvent } from 'lib/tracks';\nimport { CurrencyContext } from 'lib/currency-context';\nimport { getIndicatorData, getIndicatorValues } from './utils';\n\nconst { performanceIndicators: indicators } = getSetting( 'dataEndpoints', {\n\tperformanceIndicators: [],\n} );\n\nclass StorePerformance extends Component {\n\trenderMenu() {\n\t\tconst {\n\t\t\thiddenBlocks,\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tonMove,\n\t\t\tonRemove,\n\t\t\tonTitleBlur,\n\t\t\tonTitleChange,\n\t\t\tonToggleHiddenBlock,\n\t\t\ttitleInput,\n\t\t\tcontrols: Controls,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<EllipsisMenu\n\t\t\t\tlabel={ __(\n\t\t\t\t\t'Choose which analytics to display and the section name',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t) }\n\t\t\t\trenderContent={ ( { onToggle } ) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<MenuTitle>\n\t\t\t\t\t\t\t{ __( 'Display Stats:', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</MenuTitle>\n\t\t\t\t\t\t{ indicators.map( ( indicator, i ) => {\n\t\t\t\t\t\t\tconst checked = ! hiddenBlocks.includes(\n\t\t\t\t\t\t\t\tindicator.stat\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tchecked={ checked }\n\t\t\t\t\t\t\t\t\tisCheckbox\n\t\t\t\t\t\t\t\t\tisClickable\n\t\t\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\t\t\tonInvoke={ () => {\n\t\t\t\t\t\t\t\t\t\tonToggleHiddenBlock( indicator.stat )();\n\t\t\t\t\t\t\t\t\t\trecordEvent( 'dash_indicators_toggle', {\n\t\t\t\t\t\t\t\t\t\t\tstatus: checked ? 'off' : 'on',\n\t\t\t\t\t\t\t\t\t\t\tkey: indicator.stat,\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ indicator.label }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t{ window.wcAdminFeatures[\n\t\t\t\t\t\t\t'analytics-dashboard/customizable'\n\t\t\t\t\t\t] && (\n\t\t\t\t\t\t\t<Controls\n\t\t\t\t\t\t\t\tonToggle={ onToggle }\n\t\t\t\t\t\t\t\tonMove={ onMove }\n\t\t\t\t\t\t\t\tonRemove={ onRemove }\n\t\t\t\t\t\t\t\tisFirst={ isFirst }\n\t\t\t\t\t\t\t\tisLast={ isLast }\n\t\t\t\t\t\t\t\tonTitleBlur={ onTitleBlur }\n\t\t\t\t\t\t\t\tonTitleChange={ onTitleChange }\n\t\t\t\t\t\t\t\ttitleInput={ titleInput }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t/>\n\t\t);\n\t}\n\n\trenderList() {\n\t\tconst {\n\t\t\tquery,\n\t\t\tprimaryRequesting,\n\t\t\tsecondaryRequesting,\n\t\t\tprimaryError,\n\t\t\tsecondaryError,\n\t\t\tprimaryData,\n\t\t\tsecondaryData,\n\t\t\tuserIndicators,\n\t\t\tdefaultDateRange,\n\t\t} = this.props;\n\t\tif ( primaryRequesting || secondaryRequesting ) {\n\t\t\treturn (\n\t\t\t\t<SummaryListPlaceholder\n\t\t\t\t\tnumberOfItems={ userIndicators.length }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif ( primaryError || secondaryError ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst persistedQuery = getPersistedQuery( query );\n\n\t\tconst { compare } = getDateParamsFromQuery( query, defaultDateRange );\n\t\tconst prevLabel =\n\t\t\tcompare === 'previous_period'\n\t\t\t\t? __( 'Previous Period:', 'woocommerce-admin' )\n\t\t\t\t: __( 'Previous Year:', 'woocommerce-admin' );\n\t\tconst { formatCurrency, getCurrency } = this.context;\n\t\tconst currency = getCurrency();\n\t\treturn (\n\t\t\t<SummaryList>\n\t\t\t\t{ () =>\n\t\t\t\t\tuserIndicators.map( ( indicator, i ) => {\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tprimaryValue,\n\t\t\t\t\t\t\tsecondaryValue,\n\t\t\t\t\t\t\tdelta,\n\t\t\t\t\t\t\treportUrl,\n\t\t\t\t\t\t\treportUrlType,\n\t\t\t\t\t\t} = getIndicatorValues( {\n\t\t\t\t\t\t\tindicator,\n\t\t\t\t\t\t\tprimaryData,\n\t\t\t\t\t\t\tsecondaryData,\n\t\t\t\t\t\t\tcurrency,\n\t\t\t\t\t\t\tformatCurrency,\n\t\t\t\t\t\t\tpersistedQuery,\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SummaryNumber\n\t\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\t\thref={ reportUrl }\n\t\t\t\t\t\t\t\threfType={ reportUrlType }\n\t\t\t\t\t\t\t\tlabel={ indicator.label }\n\t\t\t\t\t\t\t\tvalue={ primaryValue }\n\t\t\t\t\t\t\t\tprevLabel={ prevLabel }\n\t\t\t\t\t\t\t\tprevValue={ secondaryValue }\n\t\t\t\t\t\t\t\tdelta={ delta }\n\t\t\t\t\t\t\t\tonLinkClickCallback={ () => {\n\t\t\t\t\t\t\t\t\trecordEvent( 'dash_indicators_click', {\n\t\t\t\t\t\t\t\t\t\tkey: indicator.stat,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t</SummaryList>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { userIndicators, title } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<SectionHeader\n\t\t\t\t\ttitle={\n\t\t\t\t\t\ttitle || __( 'Store Performance', 'woocommerce-admin' )\n\t\t\t\t\t}\n\t\t\t\t\tmenu={ this.renderMenu() }\n\t\t\t\t/>\n\t\t\t\t{ userIndicators.length > 0 && (\n\t\t\t\t\t<div className=\"woocommerce-dashboard__store-performance\">\n\t\t\t\t\t\t{ this.renderList() }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nStorePerformance.contextType = CurrencyContext;\n\nexport default compose(\n\twithSelect( ( select, props ) => {\n\t\tconst { hiddenBlocks, query } = props;\n\t\tconst userIndicators = indicators.filter(\n\t\t\t( indicator ) => ! hiddenBlocks.includes( indicator.stat )\n\t\t);\n\t\tconst { woocommerce_default_date_range: defaultDateRange } = select(\n\t\t\tSETTINGS_STORE_NAME\n\t\t).getSetting( 'wc_admin', 'wcAdminSettings' );\n\n\t\tconst data = {\n\t\t\thiddenBlocks,\n\t\t\tuserIndicators,\n\t\t\tindicators,\n\t\t\tdefaultDateRange,\n\t\t};\n\t\tif ( userIndicators.length === 0 ) {\n\t\t\treturn data;\n\t\t}\n\t\tconst indicatorData = getIndicatorData( select, userIndicators, query );\n\n\t\treturn {\n\t\t\t...data,\n\t\t\t...indicatorData,\n\t\t};\n\t} )\n)( StorePerformance );\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport moment from 'moment';\nimport { find } from 'lodash';\n\n/**\n * WooCommerce dependencies\n */\nimport { getCurrentDates, appendTimestamp } from '@woocommerce/date';\nimport { SETTINGS_STORE_NAME } from '@woocommerce/data';\nimport { getNewPath } from '@woocommerce/navigation';\nimport { calculateDelta, formatValue } from '@woocommerce/number';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\n\nfunction getReportUrl( href, persistedQuery, primaryItem ) {\n\tif ( ! href ) {\n\t\treturn '';\n\t}\n\n\tif ( href === '/jetpack' ) {\n\t\treturn getAdminLink( 'admin.php?page=jetpack#/dashboard' );\n\t}\n\n\treturn getNewPath( persistedQuery, href, {\n\t\tchart: primaryItem.chart,\n\t} );\n}\n\nexport const getIndicatorValues = ( {\n\tindicator,\n\tprimaryData,\n\tsecondaryData,\n\tcurrency,\n\tformatCurrency,\n\tpersistedQuery,\n} ) => {\n\tconst primaryItem = find(\n\t\tprimaryData.data,\n\t\t( data ) => data.stat === indicator.stat\n\t);\n\tconst secondaryItem = find(\n\t\tsecondaryData.data,\n\t\t( data ) => data.stat === indicator.stat\n\t);\n\n\tif ( ! primaryItem || ! secondaryItem ) {\n\t\treturn {};\n\t}\n\n\tconst href =\n\t\t( primaryItem._links &&\n\t\t\tprimaryItem._links.report[ 0 ] &&\n\t\t\tprimaryItem._links.report[ 0 ].href ) ||\n\t\t'';\n\tconst reportUrl = getReportUrl( href, persistedQuery, primaryItem );\n\tconst reportUrlType = href === '/jetpack' ? 'wp-admin' : 'wc-admin';\n\tconst isCurrency = primaryItem.format === 'currency';\n\n\tconst delta = calculateDelta( primaryItem.value, secondaryItem.value );\n\tconst primaryValue = isCurrency\n\t\t? formatCurrency( primaryItem.value )\n\t\t: formatValue( currency, primaryItem.format, primaryItem.value );\n\tconst secondaryValue = isCurrency\n\t\t? formatCurrency( secondaryItem.value )\n\t\t: formatValue( currency, secondaryItem.format, secondaryItem.value );\n\treturn {\n\t\tprimaryValue,\n\t\tsecondaryValue,\n\t\tdelta,\n\t\treportUrl,\n\t\treportUrlType,\n\t};\n};\n\nexport const getIndicatorData = ( select, indicators, query ) => {\n\tconst {\n\t\tgetReportItems,\n\t\tgetReportItemsError,\n\t\tisReportItemsRequesting,\n\t} = select( 'wc-api' );\n\tconst { woocommerce_default_date_range: defaultDateRange } = select(\n\t\tSETTINGS_STORE_NAME\n\t).getSetting( 'wc_admin', 'wcAdminSettings' );\n\tconst datesFromQuery = getCurrentDates( query, defaultDateRange );\n\tconst endPrimary = datesFromQuery.primary.before;\n\tconst endSecondary = datesFromQuery.secondary.before;\n\tconst statKeys = indicators\n\t\t.map( ( indicator ) => indicator.stat )\n\t\t.join( ',' );\n\tconst primaryQuery = {\n\t\tafter: appendTimestamp( datesFromQuery.primary.after, 'start' ),\n\t\tbefore: appendTimestamp(\n\t\t\tendPrimary,\n\t\t\tendPrimary.isSame( moment(), 'day' ) ? 'now' : 'end'\n\t\t),\n\t\tstats: statKeys,\n\t};\n\n\tconst secondaryQuery = {\n\t\tafter: appendTimestamp( datesFromQuery.secondary.after, 'start' ),\n\t\tbefore: appendTimestamp(\n\t\t\tendSecondary,\n\t\t\tendSecondary.isSame( moment(), 'day' ) ? 'now' : 'end'\n\t\t),\n\t\tstats: statKeys,\n\t};\n\n\tconst primaryData = getReportItems(\n\t\t'performance-indicators',\n\t\tprimaryQuery\n\t);\n\tconst primaryError =\n\t\tgetReportItemsError( 'performance-indicators', primaryQuery ) || null;\n\tconst primaryRequesting = isReportItemsRequesting(\n\t\t'performance-indicators',\n\t\tprimaryQuery\n\t);\n\n\tconst secondaryData = getReportItems(\n\t\t'performance-indicators',\n\t\tsecondaryQuery\n\t);\n\tconst secondaryError =\n\t\tgetReportItemsError( 'performance-indicators', secondaryQuery ) || null;\n\tconst secondaryRequesting = isReportItemsRequesting(\n\t\t'performance-indicators',\n\t\tsecondaryQuery\n\t);\n\n\treturn {\n\t\tprimaryData,\n\t\tprimaryError,\n\t\tprimaryRequesting,\n\t\tsecondaryData,\n\t\tsecondaryError,\n\t\tsecondaryRequesting,\n\t\tdefaultDateRange,\n\t};\n};\n"],"sourceRoot":""}