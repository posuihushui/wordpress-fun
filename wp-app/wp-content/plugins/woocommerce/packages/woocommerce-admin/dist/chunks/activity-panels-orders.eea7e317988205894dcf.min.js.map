{"version":3,"sources":["webpack://wc.[modulename]/./client/header/activity-panel/activity-outbound-link/index.js","webpack://wc.[modulename]/./client/header/activity-panel/activity-outbound-link/style.scss","webpack://wc.[modulename]/./client/header/activity-panel/panels/orders.js"],"names":["ActivityOutboundLink","props","href","type","className","children","restOfProps","classes","classnames","propTypes","PropTypes","string","isRequired","oneOf","defaultProps","OrdersPanel","hasNonActionableOrders","__","orders","Currency","context","length","renderEmptyCard","getCustomerString","order","extendedInfo","extended_info","customer","firstName","first_name","lastName","last_name","name","join","sprintf","customerName","orderCardTitle","orderId","order_id","orderNumber","order_number","customerUrl","customer_id","getNewPath","filter","customers","interpolateComponents","mixedString","customerString","components","orderLink","getAdminLink","destinationFlag","country","customerLink","cards","forEach","productsCount","products","total","total_sales","push","date_created_gmt","_n","formatCurrency","getSetting","isRequesting","isError","orderStatuses","title","actionLabel","actionCallback","window","location","reload","renderOrders","Component","array","bool","contextType","CurrencyContext","compose","withSelect","select","hasActionableOrders","getItems","getItemsTotalCount","getItemsError","isGetItemsRequesting","getReportItems","getReportItemsError","isReportItemsRequesting","SETTINGS_STORE_NAME","getMutableSetting","woocommerce_actionable_order_statuses","DEFAULT_ACTIONABLE_STATUSES","actionableOrdersQuery","page","per_page","QUERY_DEFAULTS","pageSize","status","_fields","actionableOrders","Array","from","values","isRequestingActionable","Boolean","ordersQuery","order_includes","map","reportOrders","data","actionableOrdersById","keyBy","merge","allOrdersQuery","totalNonActionableOrders"],"mappings":"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","file":"chunks/activity-panels-orders.eea7e317988205894dcf.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport Gridicon from 'gridicons';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { Link } from '@woocommerce/components';\n\nconst ActivityOutboundLink = ( props ) => {\n\tconst { href, type, className, children, ...restOfProps } = props;\n\tconst classes = classnames(\n\t\t'woocommerce-layout__activity-panel-outbound-link',\n\t\tclassName\n\t);\n\treturn (\n\t\t<Link\n\t\t\thref={ href }\n\t\t\ttype={ type }\n\t\t\tclassName={ classes }\n\t\t\t{ ...restOfProps }\n\t\t>\n\t\t\t{ children }\n\t\t\t<Gridicon icon=\"arrow-right\" />\n\t\t</Link>\n\t);\n};\n\nActivityOutboundLink.propTypes = {\n\thref: PropTypes.string.isRequired,\n\ttype: PropTypes.oneOf( [ 'wp-admin', 'wc-admin', 'external' ] ).isRequired,\n\tclassName: PropTypes.string,\n};\n\nActivityOutboundLink.defaultProps = {\n\ttype: 'wp-admin',\n};\n\nexport default ActivityOutboundLink;\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport Gridicon from 'gridicons';\nimport PropTypes from 'prop-types';\nimport interpolateComponents from 'interpolate-components';\nimport { keyBy, map, merge } from 'lodash';\n\n/**\n * WooCommerce dependencies\n */\nimport {\n\tEmptyContent,\n\tFlag,\n\tLink,\n\tOrderStatus,\n\tSection,\n} from '@woocommerce/components';\nimport { getNewPath } from '@woocommerce/navigation';\nimport { getAdminLink, getSetting } from '@woocommerce/wc-admin-settings';\nimport { SETTINGS_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport { ActivityCard, ActivityCardPlaceholder } from '../activity-card';\nimport ActivityHeader from '../activity-header';\nimport ActivityOutboundLink from '../activity-outbound-link';\nimport { QUERY_DEFAULTS } from 'wc-api/constants';\nimport { DEFAULT_ACTIONABLE_STATUSES } from 'analytics/settings/config';\nimport withSelect from 'wc-api/with-select';\nimport { CurrencyContext } from 'lib/currency-context';\n\nclass OrdersPanel extends Component {\n\trenderEmptyCard() {\n\t\tconst { hasNonActionableOrders } = this.props;\n\t\tif ( hasNonActionableOrders ) {\n\t\t\treturn (\n\t\t\t\t<ActivityCard\n\t\t\t\t\tclassName=\"woocommerce-empty-activity-card\"\n\t\t\t\t\ttitle={ __(\n\t\t\t\t\t\t'You have no orders to fulfill',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t\ticon={ <Gridicon icon=\"checkmark\" size={ 48 } /> }\n\t\t\t\t>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t\"Good job, you've fulfilled all of your new orders!\",\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t</ActivityCard>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<ActivityCard\n\t\t\t\tclassName=\"woocommerce-empty-activity-card\"\n\t\t\t\ttitle={ __(\n\t\t\t\t\t'You have no orders to fulfill',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t) }\n\t\t\t\ticon={ <Gridicon icon=\"time\" size={ 48 } /> }\n\t\t\t\tactions={\n\t\t\t\t\t<Button\n\t\t\t\t\t\thref=\"https://docs.woocommerce.com/document/managing-orders/\"\n\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Learn more', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ __(\n\t\t\t\t\t\"You're still waiting for your customers to make their first orders. \" +\n\t\t\t\t\t\t'While you wait why not learn how to manage orders?',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t) }\n\t\t\t</ActivityCard>\n\t\t);\n\t}\n\n\trenderOrders() {\n\t\tconst { orders } = this.props;\n\t\tconst Currency = this.context;\n\n\t\tif ( orders.length === 0 ) {\n\t\t\treturn this.renderEmptyCard();\n\t\t}\n\n\t\tconst getCustomerString = ( order ) => {\n\t\t\tconst extendedInfo = order.extended_info || {};\n\t\t\tconst { first_name: firstName, last_name: lastName } =\n\t\t\t\textendedInfo.customer || {};\n\n\t\t\tif ( ! firstName && ! lastName ) {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tconst name = [ firstName, lastName ].join( ' ' );\n\t\t\treturn sprintf(\n\t\t\t\t__(\n\t\t\t\t\t/* translators: describes who placed an order, e.g. Order #123 placed by John Doe */\n\t\t\t\t\t'placed by {{customerLink}}%(customerName)s{{/customerLink}}',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\tcustomerName: name,\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\tconst orderCardTitle = ( order ) => {\n\t\t\tconst {\n\t\t\t\textended_info: extendedInfo,\n\t\t\t\torder_id: orderId,\n\t\t\t\torder_number: orderNumber,\n\t\t\t} = order;\n\t\t\tconst { customer } = extendedInfo || {};\n\t\t\tconst customerUrl = customer.customer_id\n\t\t\t\t? getNewPath( {}, '/analytics/customers', {\n\t\t\t\t\t\tfilter: 'single_customer',\n\t\t\t\t\t\tcustomers: customer.customer_id,\n\t\t\t\t  } )\n\t\t\t\t: null;\n\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\t\tmixedString: sprintf(\n\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t'Order {{orderLink}}#%(orderNumber)s{{/orderLink}} %(customerString)s {{destinationFlag/}}',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\torderNumber,\n\t\t\t\t\t\t\t\tcustomerString: getCustomerString( order ),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\torderLink: (\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\thref={ getAdminLink(\n\t\t\t\t\t\t\t\t\t\t'post.php?action=edit&post=' + orderId\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\ttype=\"wp-admin\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tdestinationFlag: customer.country ? (\n\t\t\t\t\t\t\t\t<Flag\n\t\t\t\t\t\t\t\t\tcode={ customer.country }\n\t\t\t\t\t\t\t\t\tround={ false }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : null,\n\t\t\t\t\t\t\tcustomerLink: customerUrl ? (\n\t\t\t\t\t\t\t\t<Link href={ customerUrl } type=\"wc-admin\" />\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<span />\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t} ) }\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t};\n\n\t\tconst cards = [];\n\t\torders.forEach( ( order ) => {\n\t\t\tconst extendedInfo = order.extended_info || {};\n\t\t\tconst productsCount =\n\t\t\t\textendedInfo && extendedInfo.products\n\t\t\t\t\t? extendedInfo.products.length\n\t\t\t\t\t: 0;\n\n\t\t\tconst total = order.total_sales;\n\n\t\t\tcards.push(\n\t\t\t\t<ActivityCard\n\t\t\t\t\tkey={ order.order_id }\n\t\t\t\t\tclassName=\"woocommerce-order-activity-card\"\n\t\t\t\t\ttitle={ orderCardTitle( order ) }\n\t\t\t\t\tdate={ order.date_created_gmt }\n\t\t\t\t\tsubtitle={\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t\t\t\t'%d product',\n\t\t\t\t\t\t\t\t\t\t'%d products',\n\t\t\t\t\t\t\t\t\t\tproductsCount,\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tproductsCount\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>{ Currency.formatCurrency( total ) }</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\tactions={\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\thref={ getAdminLink(\n\t\t\t\t\t\t\t\t'post.php?action=edit&post=' + order.order_id\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Begin fulfillment' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<OrderStatus\n\t\t\t\t\t\torder={ order }\n\t\t\t\t\t\torderStatusMap={ getSetting( 'orderStatuses', {} ) }\n\t\t\t\t\t/>\n\t\t\t\t</ActivityCard>\n\t\t\t);\n\t\t} );\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{ cards }\n\t\t\t\t<ActivityOutboundLink href={ 'edit.php?post_type=shop_order' }>\n\t\t\t\t\t{ __( 'Manage all orders', 'woocommerce-admin' ) }\n\t\t\t\t</ActivityOutboundLink>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { orders, isRequesting, isError, orderStatuses } = this.props;\n\n\t\tif ( isError ) {\n\t\t\tif ( ! orderStatuses.length ) {\n\t\t\t\treturn (\n\t\t\t\t\t<EmptyContent\n\t\t\t\t\t\ttitle={ __(\n\t\t\t\t\t\t\t\"You currently don't have any actionable statuses. \" +\n\t\t\t\t\t\t\t\t'To display orders here, select orders that require further review in settings.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tactionLabel={ __( 'Settings', 'woocommerce-admin' ) }\n\t\t\t\t\t\tactionURL={ getAdminLink(\n\t\t\t\t\t\t\t'admin.php?page=wc-admin&path=/analytics/settings'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst title = __(\n\t\t\t\t'There was an error getting your orders. Please try again.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t\tconst actionLabel = __( 'Reload', 'woocommerce-admin' );\n\t\t\tconst actionCallback = () => {\n\t\t\t\t// @todo Add tracking for how often an error is displayed, and the reload action is clicked.\n\t\t\t\twindow.location.reload();\n\t\t\t};\n\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<EmptyContent\n\t\t\t\t\t\ttitle={ title }\n\t\t\t\t\t\tactionLabel={ actionLabel }\n\t\t\t\t\t\tactionURL={ null }\n\t\t\t\t\t\tactionCallback={ actionCallback }\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\n\t\tconst title =\n\t\t\tisRequesting || orders.length\n\t\t\t\t? __( 'Orders', 'woocommerce-admin' )\n\t\t\t\t: __( 'No orders to fulfill', 'woocommerce-admin' );\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<ActivityHeader title={ title } />\n\t\t\t\t<Section>\n\t\t\t\t\t{ isRequesting ? (\n\t\t\t\t\t\t<ActivityCardPlaceholder\n\t\t\t\t\t\t\tclassName=\"woocommerce-order-activity-card\"\n\t\t\t\t\t\t\thasAction\n\t\t\t\t\t\t\thasDate\n\t\t\t\t\t\t\tlines={ 2 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tthis.renderOrders()\n\t\t\t\t\t) }\n\t\t\t\t</Section>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nOrdersPanel.propTypes = {\n\torders: PropTypes.array.isRequired,\n\tisError: PropTypes.bool,\n\tisRequesting: PropTypes.bool,\n};\n\nOrdersPanel.defaultProps = {\n\torders: [],\n\tisError: false,\n\tisRequesting: false,\n};\n\nOrdersPanel.contextType = CurrencyContext;\n\nexport default compose(\n\twithSelect( ( select, props ) => {\n\t\tconst { hasActionableOrders } = props;\n\t\tconst {\n\t\t\tgetItems,\n\t\t\tgetItemsTotalCount,\n\t\t\tgetItemsError,\n\t\t\tisGetItemsRequesting,\n\t\t\tgetReportItems,\n\t\t\tgetReportItemsError,\n\t\t\tisReportItemsRequesting,\n\t\t} = select( 'wc-api' );\n\t\tconst { getSetting: getMutableSetting } = select( SETTINGS_STORE_NAME );\n\t\tconst {\n\t\t\twoocommerce_actionable_order_statuses: orderStatuses = DEFAULT_ACTIONABLE_STATUSES,\n\t\t} = getMutableSetting( 'wc_admin', 'wcAdminSettings', {} );\n\t\tif ( ! orderStatuses.length ) {\n\t\t\treturn {\n\t\t\t\torders: [],\n\t\t\t\tisError: true,\n\t\t\t\tisRequesting: false,\n\t\t\t\torderStatuses,\n\t\t\t};\n\t\t}\n\n\t\tif ( hasActionableOrders ) {\n\t\t\t// Query the core Orders endpoint for the most up-to-date statuses.\n\t\t\tconst actionableOrdersQuery = {\n\t\t\t\tpage: 1,\n\t\t\t\tper_page: QUERY_DEFAULTS.pageSize,\n\t\t\t\tstatus: orderStatuses,\n\t\t\t\t_fields: [ 'id', 'date_created_gmt', 'status' ],\n\t\t\t};\n\t\t\tconst actionableOrders = Array.from(\n\t\t\t\tgetItems( 'orders', actionableOrdersQuery ).values()\n\t\t\t);\n\t\t\tconst isRequestingActionable = isGetItemsRequesting(\n\t\t\t\t'orders',\n\t\t\t\tactionableOrdersQuery\n\t\t\t);\n\n\t\t\tif ( isRequestingActionable ) {\n\t\t\t\treturn {\n\t\t\t\t\tisError: Boolean(\n\t\t\t\t\t\tgetItemsError( 'orders', actionableOrdersQuery )\n\t\t\t\t\t),\n\t\t\t\t\tisRequesting: isRequestingActionable,\n\t\t\t\t\torderStatuses,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Retrieve the Order stats data from our reporting table.\n\t\t\tconst ordersQuery = {\n\t\t\t\tpage: 1,\n\t\t\t\tper_page: QUERY_DEFAULTS.pageSize,\n\t\t\t\textended_info: true,\n\t\t\t\torder_includes: map( actionableOrders, 'id' ),\n\t\t\t\t_fields: [\n\t\t\t\t\t'order_id',\n\t\t\t\t\t'order_number',\n\t\t\t\t\t'status',\n\t\t\t\t\t'data_created_gmt',\n\t\t\t\t\t'total_sales',\n\t\t\t\t\t'extended_info.customer',\n\t\t\t\t\t'extended_info.products',\n\t\t\t\t],\n\t\t\t};\n\n\t\t\tconst reportOrders = getReportItems( 'orders', ordersQuery ).data;\n\t\t\tconst isError = Boolean(\n\t\t\t\tgetReportItemsError( 'orders', ordersQuery )\n\t\t\t);\n\t\t\tconst isRequesting = isReportItemsRequesting(\n\t\t\t\t'orders',\n\t\t\t\tordersQuery\n\t\t\t);\n\t\t\tlet orders = [];\n\n\t\t\tif ( reportOrders && reportOrders.length ) {\n\t\t\t\t// Merge the core endpoint data with our reporting table.\n\t\t\t\tconst actionableOrdersById = keyBy( actionableOrders, 'id' );\n\t\t\t\torders = reportOrders.map( ( order ) =>\n\t\t\t\t\tmerge(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\torder,\n\t\t\t\t\t\tactionableOrdersById[ order.order_id ] || {}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn { orders, isError, isRequesting, orderStatuses };\n\t\t}\n\n\t\t// Get a count of all orders for messaging purposes.\n\t\t// @todo Add a property to settings api for this?\n\t\tconst allOrdersQuery = {\n\t\t\tpage: 1,\n\t\t\tper_page: 1,\n\t\t\t_fields: [ 'id' ],\n\t\t};\n\n\t\tgetItems( 'orders', allOrdersQuery );\n\t\tconst totalNonActionableOrders = getItemsTotalCount(\n\t\t\t'orders',\n\t\t\tallOrdersQuery\n\t\t);\n\t\tconst isError = Boolean( getItemsError( 'orders', allOrdersQuery ) );\n\t\tconst isRequesting = isGetItemsRequesting( 'orders', allOrdersQuery );\n\n\t\treturn {\n\t\t\thasNonActionableOrders: totalNonActionableOrders > 0,\n\t\t\tisError,\n\t\t\tisRequesting,\n\t\t\torderStatuses,\n\t\t};\n\t} )\n)( OrdersPanel );\n"],"sourceRoot":""}