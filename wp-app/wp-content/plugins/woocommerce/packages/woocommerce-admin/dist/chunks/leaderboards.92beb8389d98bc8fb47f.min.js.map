{"version":3,"sources":["webpack://wc.[modulename]/./client/analytics/components/leaderboard/index.js","webpack://wc.[modulename]/./client/analytics/components/leaderboard/style.scss","webpack://wc.[modulename]/./client/dashboard/leaderboards/index.js","webpack://wc.[modulename]/./client/dashboard/leaderboards/style.scss","webpack://wc.[modulename]/./client/lib/sanitize-html/index.js"],"names":["Leaderboard","props","headers","map","header","i","isLeftAligned","hiddenByDefault","isSortable","key","label","rows","row","column","display","sanitizeHTML","value","isRequesting","isError","totalRows","title","classes","getFormattedRows","length","__","getFormattedHeaders","Component","propTypes","PropTypes","arrayOf","shape","string","id","isRequired","query","object","node","oneOfType","number","bool","defaultProps","compose","withSelect","select","SETTINGS_STORE_NAME","getSetting","defaultDateRange","woocommerce_default_date_range","leaderboardQuery","per_page","persisted_query","getPersistedQuery","leaderboardData","getLeaderboard","renderLeaderboardToggles","allLeaderboards","hiddenBlocks","onToggleHiddenBlock","leaderboard","checked","includes","recordEvent","status","renderLeaderboards","rowsPerTable","undefined","Leaderboards","Controls","controls","isFirst","isLast","onMove","onRemove","onTitleBlur","onTitleChange","titleInput","useUserPreferences","updateUserPreferences","userPrefs","useState","parseInt","dashboard_leaderboard_rows","setRowsPerTableState","setRowsPerTable","userDataFields","renderMenu","onToggle","Array","from","v","window","wcAdminFeatures","getItems","getItemsError","isGetItemsRequesting","leaderboards","ALLOWED_TAGS","ALLOWED_ATTR","html","__html","sanitize"],"mappings":"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","file":"chunks/leaderboards.92beb8389d98bc8fb47f.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport PropTypes from 'prop-types';\n\n/**\n * WooCommerce dependencies\n */\nimport { Card, EmptyTable, TableCard } from '@woocommerce/components';\nimport { getPersistedQuery } from '@woocommerce/navigation';\nimport { SETTINGS_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport { getLeaderboard } from 'wc-api/items/utils';\nimport ReportError from 'analytics/components/report-error';\nimport sanitizeHTML from 'lib/sanitize-html';\nimport withSelect from 'wc-api/with-select';\nimport './style.scss';\n\nexport class Leaderboard extends Component {\n\tgetFormattedHeaders() {\n\t\treturn this.props.headers.map( ( header, i ) => {\n\t\t\treturn {\n\t\t\t\tisLeftAligned: i === 0,\n\t\t\t\thiddenByDefault: false,\n\t\t\t\tisSortable: false,\n\t\t\t\tkey: header.label,\n\t\t\t\tlabel: header.label,\n\t\t\t};\n\t\t} );\n\t}\n\n\tgetFormattedRows() {\n\t\treturn this.props.rows.map( ( row ) => {\n\t\t\treturn row.map( ( column ) => {\n\t\t\t\treturn {\n\t\t\t\t\tdisplay: (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML(\n\t\t\t\t\t\t\t\tcolumn.display\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t\tvalue: column.value,\n\t\t\t\t};\n\t\t\t} );\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { isRequesting, isError, totalRows, title } = this.props;\n\t\tconst classes = 'woocommerce-leaderboard';\n\n\t\tif ( isError ) {\n\t\t\treturn <ReportError className={ classes } isError />;\n\t\t}\n\n\t\tconst rows = this.getFormattedRows();\n\n\t\tif ( ! isRequesting && rows.length === 0 ) {\n\t\t\treturn (\n\t\t\t\t<Card title={ title } className={ classes }>\n\t\t\t\t\t<EmptyTable>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'No data recorded for the selected time period.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</EmptyTable>\n\t\t\t\t</Card>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<TableCard\n\t\t\t\tclassName={ classes }\n\t\t\t\theaders={ this.getFormattedHeaders() }\n\t\t\t\tisLoading={ isRequesting }\n\t\t\t\trows={ rows }\n\t\t\t\trowsPerPage={ totalRows }\n\t\t\t\tshowMenu={ false }\n\t\t\t\ttitle={ title }\n\t\t\t\ttotalRows={ totalRows }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nLeaderboard.propTypes = {\n\t/**\n\t * An array of column headers.\n\t */\n\theaders: PropTypes.arrayOf(\n\t\tPropTypes.shape( {\n\t\t\tlabel: PropTypes.string,\n\t\t} )\n\t),\n\t/**\n\t * String of leaderboard ID to display.\n\t */\n\tid: PropTypes.string.isRequired,\n\t/**\n\t * Query args added to the report table endpoint request.\n\t */\n\tquery: PropTypes.object,\n\t/**\n\t * Which column should be the row header, defaults to the first item (`0`) (see `Table` props).\n\t */\n\trows: PropTypes.arrayOf(\n\t\tPropTypes.arrayOf(\n\t\t\tPropTypes.shape( {\n\t\t\t\tdisplay: PropTypes.node,\n\t\t\t\tvalue: PropTypes.oneOfType( [\n\t\t\t\t\tPropTypes.string,\n\t\t\t\t\tPropTypes.number,\n\t\t\t\t\tPropTypes.bool,\n\t\t\t\t] ),\n\t\t\t} )\n\t\t)\n\t).isRequired,\n\t/**\n\t * String to display as the title of the table.\n\t */\n\ttitle: PropTypes.string.isRequired,\n\t/**\n\t * Number of table rows.\n\t */\n\ttotalRows: PropTypes.number.isRequired,\n};\n\nLeaderboard.defaultProps = {\n\trows: [],\n\tisError: false,\n\tisRequesting: false,\n};\n\nexport default compose(\n\twithSelect( ( select, props ) => {\n\t\tconst { id, query, totalRows } = props;\n\t\tconst { woocommerce_default_date_range: defaultDateRange } = select(\n\t\t\tSETTINGS_STORE_NAME\n\t\t).getSetting( 'wc_admin', 'wcAdminSettings' );\n\n\t\tconst leaderboardQuery = {\n\t\t\tid,\n\t\t\tper_page: totalRows,\n\t\t\tpersisted_query: getPersistedQuery( query ),\n\t\t\tquery,\n\t\t\tselect,\n\t\t\tdefaultDateRange,\n\t\t};\n\t\tconst leaderboardData = getLeaderboard( leaderboardQuery );\n\n\t\treturn leaderboardData;\n\t} )\n)( Leaderboard );\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useState } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport PropTypes from 'prop-types';\nimport { SelectControl } from '@wordpress/components';\n\n/**\n * WooCommerce dependencies\n */\nimport {\n\tEllipsisMenu,\n\tMenuItem,\n\tMenuTitle,\n\tSectionHeader,\n} from '@woocommerce/components';\nimport { useUserPreferences } from '@woocommerce/data';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport Leaderboard from 'analytics/components/leaderboard';\nimport withSelect from 'wc-api/with-select';\nimport { recordEvent } from 'lib/tracks';\nimport './style.scss';\n\nconst renderLeaderboardToggles = ( { allLeaderboards, hiddenBlocks, onToggleHiddenBlock } ) => {\n\treturn allLeaderboards.map( ( leaderboard ) => {\n\t\tconst checked = ! hiddenBlocks.includes(\n\t\t\tleaderboard.id\n\t\t);\n\t\treturn (\n\t\t\t<MenuItem\n\t\t\t\tchecked={ checked }\n\t\t\t\tisCheckbox\n\t\t\t\tisClickable\n\t\t\t\tkey={ leaderboard.id }\n\t\t\t\tonInvoke={ () => {\n\t\t\t\t\tonToggleHiddenBlock( leaderboard.id )();\n\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t'dash_leaderboards_toggle',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstatus: checked ? 'off' : 'on',\n\t\t\t\t\t\t\tkey: leaderboard.id,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ leaderboard.label }\n\t\t\t</MenuItem>\n\t\t);\n\t} );\n};\n\nconst renderLeaderboards = ( { allLeaderboards, hiddenBlocks, query, rowsPerTable } ) => {\n\treturn allLeaderboards.map( ( leaderboard ) => {\n\t\tif ( hiddenBlocks.includes( leaderboard.id ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn (\n\t\t\t<Leaderboard\n\t\t\t\theaders={ leaderboard.headers }\n\t\t\t\tid={ leaderboard.id }\n\t\t\t\tkey={ leaderboard.id }\n\t\t\t\tquery={ query }\n\t\t\t\ttitle={ leaderboard.label }\n\t\t\t\ttotalRows={ rowsPerTable }\n\t\t\t/>\n\t\t);\n\t} );\n};\n\nconst Leaderboards = ( props ) => {\n\tconst {\n\t\tallLeaderboards,\n\t\tcontrols: Controls,\n\t\tisFirst,\n\t\tisLast,\n\t\thiddenBlocks,\n\t\tonMove,\n\t\tonRemove,\n\t\tonTitleBlur,\n\t\tonTitleChange,\n\t\tonToggleHiddenBlock,\n\t\tquery,\n\t\ttitle,\n\t\ttitleInput,\n\t} = props;\n\tconst { updateUserPreferences, ...userPrefs } = useUserPreferences();\n\tconst [ rowsPerTable, setRowsPerTableState ] = useState( parseInt( userPrefs.dashboard_leaderboard_rows || 5, 10 ) );\n\n\tconst setRowsPerTable = ( rows ) => {\n\t\tsetRowsPerTableState( parseInt( rows, 10 ) );\n\t\tconst userDataFields = {\n\t\t\tdashboard_leaderboard_rows: parseInt( rows, 10 ),\n\t\t};\n\t\tupdateUserPreferences( userDataFields );\n\t};\n\n\tconst renderMenu = () =>  (\n\t\t<EllipsisMenu\n\t\t\tlabel={ __(\n\t\t\t\t'Choose which leaderboards to display and other settings',\n\t\t\t\t'woocommerce-admin'\n\t\t\t) }\n\t\t\trenderContent={ ( { onToggle } ) => (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<MenuTitle>\n\t\t\t\t\t\t{ __( 'Leaderboards', 'woocommerce-admin' ) }\n\t\t\t\t\t</MenuTitle>\n\t\t\t\t\t{ renderLeaderboardToggles( { allLeaderboards, hiddenBlocks, onToggleHiddenBlock } ) }\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tclassName=\"woocommerce-dashboard__dashboard-leaderboards__select\"\n\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t'Rows Per Table',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tvalue={ rowsPerTable }\n\t\t\t\t\t\toptions={ Array.from(\n\t\t\t\t\t\t\t{ length: 20 },\n\t\t\t\t\t\t\t( v, key ) => ( {\n\t\t\t\t\t\t\t\tv: key + 1,\n\t\t\t\t\t\t\t\tlabel: key + 1,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonChange={ setRowsPerTable }\n\t\t\t\t\t/>\n\t\t\t\t\t{ window.wcAdminFeatures[\n\t\t\t\t\t\t'analytics-dashboard/customizable'\n\t\t\t\t\t] && (\n\t\t\t\t\t\t<Controls\n\t\t\t\t\t\t\tonToggle={ onToggle }\n\t\t\t\t\t\t\tonMove={ onMove }\n\t\t\t\t\t\t\tonRemove={ onRemove }\n\t\t\t\t\t\t\tisFirst={ isFirst }\n\t\t\t\t\t\t\tisLast={ isLast }\n\t\t\t\t\t\t\tonTitleBlur={ onTitleBlur }\n\t\t\t\t\t\t\tonTitleChange={ onTitleChange }\n\t\t\t\t\t\t\ttitleInput={ titleInput }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t) }\n\t\t/>\n\t);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<div className=\"woocommerce-dashboard__dashboard-leaderboards\">\n\t\t\t\t<SectionHeader\n\t\t\t\t\ttitle={\n\t\t\t\t\t\ttitle || __( 'Leaderboards', 'woocommerce-admin' )\n\t\t\t\t\t}\n\t\t\t\t\tmenu={ renderMenu() }\n\t\t\t\t/>\n\t\t\t\t<div className=\"woocommerce-dashboard__columns\">\n\t\t\t\t\t{ renderLeaderboards( { allLeaderboards, hiddenBlocks, query, rowsPerTable } ) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n}\n\nLeaderboards.propTypes = {\n\tquery: PropTypes.object.isRequired,\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetItems,\n\t\t\tgetItemsError,\n\t\t\tisGetItemsRequesting,\n\t\t} = select( 'wc-api' );\n\t\tconst { leaderboards: allLeaderboards } = getSetting( 'dataEndpoints', {\n\t\t\tleaderboards: [],\n\t\t} );\n\n\t\treturn {\n\t\t\tallLeaderboards,\n\t\t\tgetItems,\n\t\t\tgetItemsError,\n\t\t\tisGetItemsRequesting,\n\t\t};\n\t} )\n)( Leaderboards );\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport { sanitize } from 'dompurify';\n\nexport const ALLOWED_TAGS = [ 'a', 'b', 'em', 'i', 'strong', 'p' ];\nexport const ALLOWED_ATTR = [ 'target', 'href', 'rel', 'name', 'download' ];\n\nexport default ( html ) => {\n\treturn {\n\t\t__html: sanitize( html, { ALLOWED_TAGS, ALLOWED_ATTR } ),\n\t};\n};\n"],"sourceRoot":""}